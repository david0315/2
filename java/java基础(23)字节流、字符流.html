<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修java基础(23)字节流、字符流' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>java基础(23)字节流、字符流</center></div><div class='banquan'>原文出处:本文由博客园博主爱编程的小灰灰提供。<br/>
原文连接:https://www.cnblogs.com/liuhui0308/p/11655220.html</div><br>
    <h1>1.&nbsp;<strong>字节流</strong></h1>
<p>在前面的学习过程中，我们一直都是在操作文件或者文件夹，并没有给文件中写任何数据。现在我们就要开始给文件中写数据，或者读取文件中的数据。</p>
<h2><!--[if !supportLists]-->1.1&nbsp;<!--[endif]--><strong><span style="font-family: 华文楷体;">字节输出流</span>OutputStream</strong></h2>
<p>OutputStream<span style="font-family: 宋体;">此抽象类</span>，<span style="font-family: 宋体;">是表示输出字节流的所有类的超类</span>。操作的数据都是字节，定义了输出字节流的基本共性功能方法。</p>
<p><span style="font-family: 宋体;">输出流中定义都是写</span>write<span style="font-family: 宋体;">方法，如下图</span><span style="font-family: Calibri;">:</span></p>
<p><span style="font-family: Calibri;"><img src="./images/java基础(23)字节流、字符流0.png" alt="" /></span></p>
<h3><!--[if !supportLists]-->1.1.1&nbsp;<!--[endif]--><strong>FileOutputStream<span style="font-family: 黑体;">类</span></strong></h3>
<p>&nbsp;</p>
<p>OutputStream<span style="font-family: 宋体;">有很多子类，其中子类</span><span style="font-family: Calibri;">FileOutputStream</span><span style="font-family: 宋体;">可用来写入数据到文件。</span></p>
<p>FileOutputStream<span style="font-family: 宋体;">类</span>，即<span style="font-family: 宋体;">文件输出流</span>，<span style="font-family: 宋体;">是用于将数据写入</span> File<span style="font-family: 宋体;">的输出流。</span></p>
<p><strong><img src="./images/java基础(23)字节流、字符流1.png" alt="" /></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>构造方法</p>
<p><img src="./images/java基础(23)字节流、字符流2.png" alt="" /></p>
<h3><!--[if !supportLists]-->1.1.2&nbsp;<!--[endif]--><strong>FileOutputStream<span style="font-family: 黑体;">类写入数据到文件中</span></strong></h3>
<p class="16">将数据写到文件中，代码演示：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileOutputStreamDemo {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">需求：将数据写入到文件中。
        </span><span style="color: #008000;">//</span><span style="color: #008000;">创建存储数据的文件。</span>
        File file = <span style="color: #0000ff;">new</span> File("c:\\file.txt"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">创建一个用于操作文件的字节输出流对象。一创建就必须明确数据存储目的地。
        </span><span style="color: #008000;">//</span><span style="color: #008000;">输出流目的是文件，会自动创建。如果文件存在，则覆盖。</span>
        FileOutputStream fos = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileOutputStream(file);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用父类中的write方法。</span>
        <span style="color: #0000ff;">byte</span>[] data = "abcde"<span style="color: #000000;">.getBytes();
        fos.write(data);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">关闭流资源。</span>
<span style="color: #000000;">        fos.close();
    }
}</span></code></pre>

<h3><!--[if !supportLists]-->1.1.3&nbsp;<!--[endif]--><strong>给文件中续写和换行</strong></h3>
<p>我们直接<strong>new</strong>&nbsp;FileOutputStream(file)这样创建对象，写入数据，会覆盖原有的文件，那么我们想在原有的文件中续写内容怎么办呢？</p>
<p>继续查阅FileOutputStream<span style="font-family: 宋体;">的</span>API<span style="font-family: 宋体;">。发现在</span>FileOutputStream<span style="font-family: 宋体;">的构造函数中，可以接受一个</span>boolean<span style="font-family: 宋体;">类型的值，如果值</span><span style="font-family: Calibri;">true</span><span style="font-family: 宋体;">，就会在文件末位继续添加。</span></p>
<p class="16">构造方法</p>
<p><img src="./images/java基础(23)字节流、字符流3.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;给文件中续写数据和换行，代码演示：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileOutputStreamDemo2 {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
        File file </span>= <span style="color: #0000ff;">new</span> File("c:\\file.txt"<span style="color: #000000;">);
        FileOutputStream fos </span>= <span style="color: #0000ff;">new</span> FileOutputStream(file, <span style="color: #0000ff;">true</span><span style="color: #000000;">);[设置给指定文件续写数据]
        String str </span>= "\r\n"[实现换行]+"itcast"<span style="color: #000000;">;
        fos.write(str.getBytes());
        fos.close();
    }
}</span></code></pre>

<h3><!--[if !supportLists]-->1.1.4&nbsp;<!--[endif]--><strong>IO<span style="font-family: 黑体;">异常的处理</span></strong></h3>
<p><span style="font-family: 宋体;">在前面编写代码中都发生了</span>IO<span style="font-family: 宋体;">的异常。我们在实际开发中，对异常时如何处理的，我们来演示一下。</span></p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileOutputStreamDemo3 {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        File file </span>= <span style="color: #0000ff;">new</span> File("c:\\file.txt"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">定义FileOutputStream的引用</span>
        FileOutputStream fos = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建FileOutputStream对象</span>
            fos = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileOutputStream(file);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">写出数据</span>
            fos.write("abcde"<span style="color: #000000;">.getBytes());
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
            System.out.println(e.toString() </span>+ "----"<span style="color: #000000;">);
        } </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">一定要判断fos是否为null，只有不为null时，才可以关闭资源</span>
            <span style="color: #0000ff;">if</span> (fos != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
                </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
                    fos.close();
                } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
                    </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> RuntimeException(""<span style="color: #000000;">);
                }
            }
        }
    }
}</span></code></pre>

<p>&nbsp;</p>
<h2><!--[if !supportLists]-->1.2&nbsp;<!--[endif]--><strong><span style="font-family: 华文楷体;">字节输入流</span>InputStream</strong></h2>
<p>&nbsp;</p>
<p><span style="font-family: 宋体;">通过前面的学习，我们可以把内存中的数据写出到文件中，那如何想把内存中的数据读到内存中，我们通过</span>InputStream<span style="font-family: 宋体;">可以实现。</span><span style="font-family: Calibri;">InputStream</span><span style="font-family: 宋体;">此抽象类</span>，<span style="font-family: 宋体;">是表示字节输入流的所有类的超类</span>。，定义了字节输入流的基本共性功能方法。</p>
<p><img src="./images/java基础(23)字节流、字符流4.png" alt="" /></p>
<p class="16">int read():读取一个字节并返回，没有字节返回-1.</p>
<p class="16">int read(byte[]): 读取一定量的字节数，并存储到字节数组中，返回读取到的字节数。</p>
<h3><!--[if !supportLists]-->1.2.1&nbsp;<!--[endif]--><strong>FileInputStream<span style="font-family: 黑体;">类</span></strong></h3>
<p>InputStream<span style="font-family: 宋体;">有很多子类，其中子类</span><span style="font-family: Calibri;">FileInputStream</span><span style="font-family: 宋体;">可用来读取文件内容。</span></p>
<p>FileInputStream <span style="font-family: 宋体;">从文件系统中的某个文件中获得输入字节。</span></p>
<p><span style="font-family: 宋体;"><img src="./images/java基础(23)字节流、字符流5.png" alt="" /></span></p>
<p>&nbsp;</p>
<p class="16">构造方法</p>
<p><strong><img src="./images/java基础(23)字节流、字符流6.png" alt="" /></strong></p>
<h3><!--[if !supportLists]-->1.2.2&nbsp;<!--[endif]--><strong>FileInputStream<span style="font-family: 黑体;">类读取数据</span><span style="font-family: 'Times New Roman';">read</span><span style="font-family: 黑体;">方法</span></strong></h3>
<p><span style="font-family: 宋体;">在读取文件中的数据时，调用</span>read<span style="font-family: 宋体;">方法，实现从文件中读取数据</span></p>
<p><strong><img src="./images/java基础(23)字节流、字符流7.png" alt="" /></strong></p>
<p>&nbsp;</p>
<p>从文件中读取数据，代码演示：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileInputStreamDemo {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        File file </span>= <span style="color: #0000ff;">new</span> File("c:\\file.txt"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">创建一个字节输入流对象,必须明确数据源，其实就是创建字节读取流和数据源相关联。</span>
        FileInputStream fis = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileInputStream(file);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">读取数据。使用 read();一次读一个字节。</span>
        <span style="color: #0000ff;">int</span> ch = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((ch=fis.read())!=-1<span style="color: #000000;">){
            System.out.pr        }intln(</span>"ch="+(<span style="color: #0000ff;">char</span><span style="color: #000000;">)ch);

        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 关闭资源。</span>
<span style="color: #000000;">        fis.close();
    }
}</span></code></pre>

<h3><!--[if !supportLists]-->1.2.3&nbsp;<!--[endif]--><strong><span style="font-family: 黑体;">读取数据</span>read(byte[])<span style="font-family: 黑体;">方法</span></strong></h3>
<p><span style="font-family: 宋体;">在读取文件中的数据时，调用</span>read<span style="font-family: 宋体;">方法，每次只能读取一个，太麻烦了，于是我们可以定义数组作为临时的存储容器，这时可以调用重载的</span><span style="font-family: Calibri;">read</span><span style="font-family: 宋体;">方法，一次可以读取多个字符。</span></p>
<p><strong><img src="./images/java基础(23)字节流、字符流8.png" alt="" /></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileInputStreamDemo2 {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">/*</span><span style="color: #008000;">
         * 演示第二个读取方法， read(byte[]);
         </span><span style="color: #008000;">*/</span><span style="color: #000000;">
        File file </span>= <span style="color: #0000ff;">new</span> File("c:\\file.txt"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 创建一个字节输入流对象,必须明确数据源，其实就是创建字节读取流和数据源相关联。</span>
        FileInputStream fis = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileInputStream(file);        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">创建一个字节数组。</span>
        <span style="color: #0000ff;">byte</span>[] buf = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024];<span style="color: #008000;">//</span><span style="color: #008000;">长度可以定义成1024的整数倍。        </span>
        <span style="color: #0000ff;">int</span> len = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((len=fis.read(buf))!=-1<span style="color: #000000;">){
            System.out.println(</span><span style="color: #0000ff;">new</span> String(buf,0<span style="color: #000000;">,len));
        }
        fis.close();
    }
}</span></code></pre>

<h2><!--[if !supportLists]-->1.3&nbsp;<!--[endif]--><strong>字节流练习</strong></h2>
<p>既然会了文件的读和写操作了，那么我们就要在这个基础上进行更为复杂的操作。使用读写操作完成文件的复制。</p>
<h3><!--[if !supportLists]-->1.3.1&nbsp;<!--[endif]--><strong>复制文件</strong></h3>
<p>原理；读取一个已有的数据，并将这些读到的数据写入到另一个文件中。</p>
<p><strong><img src="./images/java基础(23)字节流、字符流9.png" alt="" width="758" height="359" /></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CopyFileTest {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">1,明确源和目的。</span>
        File srcFile = <span style="color: #0000ff;">new</span> File("c:\\YesDir\test.JPG"<span style="color: #000000;">);
        File destFile </span>= <span style="color: #0000ff;">new</span> File("copyTest.JPG"<span style="color: #000000;">);
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">2,明确字节流 输入流和源相关联，输出流和目的关联。</span>
        FileInputStream fis = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileInputStream(srcFile);
        FileOutputStream fos </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileOutputStream(destFile);
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">3, 使用输入流的读取方法读取字节，并将字节写入到目的中。</span>
        <span style="color: #0000ff;">int</span> ch = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((ch=fis.read())!=-1<span style="color: #000000;">){
            fos.write(ch);
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">4,关闭资源。</span>
<span style="color: #000000;">        fos.close();
        fis.close();
    }
}</span></code></pre>

<p><span style="font-family: 宋体;">上述代码输入流和输出流之间是通过</span>ch<span style="font-family: 宋体;">这个变量进行数据交换的。</span></p>
<p>上述复制文件有个问题，每次都从源文件读取一个，然后在写到指定文件，接着再读取一个字符，然后再写一个，一直这样下去。效率极低。</p>
<h3><!--[if !supportLists]-->1.3.2&nbsp;<!--[endif]--><strong>缓冲数组方式复制文件</strong></h3>
<p>上述代码复制文件效率太低了，并且频繁的从文件读数据，和写数据，能不能一次多把文件中多个数据都读进内容中，然后在一次写出去，这样的速度一定会比前面代码速度快。</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CopyFileByBufferTest {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        File srcFile </span>= <span style="color: #0000ff;">new</span> File("c:\\YesDir\test.JPG"<span style="color: #000000;">);
        File destFile </span>= <span style="color: #0000ff;">new</span> File("copyTest.JPG"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 明确字节流 输入流和源相关联，输出流和目的关联。</span>
        FileInputStream fis = <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileInputStream(srcFile);
        FileOutputStream fos </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> FileOutputStream(destFile);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">定义一个缓冲区。</span>
        <span style="color: #0000ff;">byte</span>[] buf = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024<span style="color: #000000;">];
        </span><span style="color: #0000ff;">int</span> len = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span> ((len = fis.read(buf)) != -1<span style="color: #000000;">) {
            fos.write(buf, </span>0, len);<span style="color: #008000;">//</span><span style="color: #008000;"> 将数组中的指定长度的数据写入到输出流中。</span>
<span style="color: #000000;">        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 关闭资源。</span>
<span style="color: #000000;">        fos.close();
        fis.close();
    }
}</span></code></pre>

<h1>第1章 字符流</h1>
<p>经过前面的学习，我们基本掌握的文件的读写操作，在操作过程中字节流可以操作所有数据，可是当我们操作的文件中有中文字符，并且需要对中文字符做出处理时怎么办呢？</p>
<h2><!--[if !supportLists]-->2.1&nbsp;<!--[endif]--><strong>字节流读取字符的问题</strong></h2>
<p><span style="font-family: 宋体;">通过以下程序读取带有中文件的文件。</span>&nbsp;&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CharStreamDemo {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">给文件中写中文</span>
<span style="color: #000000;">        writeCNText();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">读取文件中的中文</span>
<span style="color: #000000;">        readCNText();
    }    
    </span><span style="color: #008000;">//</span><span style="color: #008000;">读取中文</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> readCNText() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        FileInputStream fis </span>= <span style="color: #0000ff;">new</span> FileInputStream("c:\\cn.txt"<span style="color: #000000;">);
        </span><span style="color: #0000ff;">int</span> ch = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((ch = fis.read())!=-1<span style="color: #000000;">){
            System.out.println(ch);
        }
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">写中文</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> writeCNText() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        FileOutputStream fos </span>= <span style="color: #0000ff;">new</span> FileOutputStream("c:\\cn.txt"<span style="color: #000000;">);
        fos.write(</span>"a传智播客欢迎你"<span style="color: #000000;">.getBytes());
        fos.close();
    }
}</span></code></pre>

<p>上面程序在读取含有中文的文件时，我们并没有看到具体的中文，而是看到一些数字，这是什么原因呢？既然看不到中文，那么我们如何对其中的中文做处理呢？要解决这个问题，我们必须研究下字符的编码过程。</p>
<h2><!--[if !supportLists]-->2.2&nbsp;<!--[endif]--><strong>字符编码表</strong></h2>
<p>我们知道计算机底层数据存储的都是二进制数据，而我们生活中的各种各样的数据，如何才能和计算机中存储的二进制数据对应起来呢？</p>
<p><span style="font-family: 宋体;">这时老美他们就把每一个字符和一个整数对应起来，就形成了一张编码表，老美他们的编码表就是</span>ASCII<span style="font-family: 宋体;">表。其中就是各种英文字符对应的编码。</span></p>
<p>编码表：其实就是生活中字符和计算机二进制的对应关系表。</p>
<p>1<span style="font-family: 宋体;">、</span><span style="font-family: Calibri;">ascii</span><span style="font-family: 宋体;">： 一个字节中的</span><span style="font-family: Calibri;">7</span><span style="font-family: 宋体;">位就可以表示。对应的字节都是正数。</span><span style="font-family: Calibri;">0-xxxxxxx</span></p>
<p>2<span style="font-family: 宋体;">、</span><span style="font-family: Calibri;">iso-8859-1:</span><span style="font-family: 宋体;">拉丁码表 </span><span style="font-family: Calibri;">latin</span><span style="font-family: 宋体;">，用了一个字节用的</span><span style="font-family: Calibri;">8</span><span style="font-family: 宋体;">位。</span><span style="font-family: Calibri;">1-xxxxxxx &nbsp;</span><span style="font-family: 宋体;">负数。</span></p>
<p>3<span style="font-family: 宋体;">、</span><span style="font-family: Calibri;">GB2312:</span><span style="font-family: 宋体;">简体中文码表。包含</span><span style="font-family: Calibri;">6000-7000</span><span style="font-family: 宋体;">中文和符号。用两个字节表示。两个字节</span>第一个字节是负数,<span style="font-family: 宋体;">第二个字节可能是正数</span></p>
<p>　　GBK:<span style="font-family: 宋体;">目前最常用的中文码表，</span><span style="font-family: Calibri;">2</span><span style="font-family: 宋体;">万的中文和符号。用两个字节表示，其中的一部分文字，第一个字节开头是</span><span style="font-family: Calibri;">1</span><span style="font-family: 宋体;">，第二字节开头是</span><span style="font-family: Calibri;">0</span></p>
<p>　　GB18030<span style="font-family: 宋体;">：最新的中文码表，目前还没有正式使用。</span></p>
<p>4、unicode<span style="font-family: 宋体;">：国际标准码表</span><span style="font-family: Calibri;">:</span><span style="font-family: 宋体;">无论是什么文字，都用两个字节存储。</span></p>
<p class="16">　　Java中的char类型用的就是这个码表。char c = 'a';占两个字节。</p>
<p class="16">　　Java中的字符串是按照系统默认码表来解析的。简体中文版 字符串默认的码表是GBK。</p>
<p>5<span style="font-family: 宋体;">、</span><span style="font-family: Calibri;">UTF-8:</span><span style="font-family: 宋体;">基于</span><span style="font-family: Calibri;">unicode</span><span style="font-family: 宋体;">，一个字节就可以存储数据，不要用两个字节存储，而且这个码表更加的标准化，在每一个字节头加入了编码信息</span><span style="font-family: Calibri;">(</span><span style="font-family: 宋体;">后期到</span><span style="font-family: Calibri;">api</span><span style="font-family: 宋体;">中查找</span><span style="font-family: Calibri;">)</span><span style="font-family: 宋体;">。</span></p>
<p><span style="font-family: 宋体;">　　能识别中文的码表：</span>GBK<span style="font-family: 宋体;">、</span><span style="font-family: Calibri;">UTF-8</span><span style="font-family: 宋体;">；正因为识别中文码表不唯一，涉及到了编码解码问题。</span></p>
<p><span style="font-family: 宋体;">　　对于我们开发而言；常见的编码</span> GBK &nbsp;UTF-8 &nbsp;ISO-8859-1</p>
<p><span style="font-family: 宋体;">　　文字</span>---&gt;(<span style="font-family: 宋体;">数字</span><span style="font-family: Calibri;">) </span><span style="font-family: 宋体;">：编码。</span>&nbsp;&ldquo;abc&rdquo;.getBytes() &nbsp;byte[]</p>
<p>　　(<span style="font-family: 宋体;">数字</span><span style="font-family: Calibri;">)---&gt;</span><span style="font-family: 宋体;">文字 &nbsp;</span><span style="font-family: Calibri;">: </span><span style="font-family: 宋体;">解码。</span>&nbsp;byte[] b={97,98,99} &nbsp;new String(b)&nbsp;</p>
<h2><!--[if !supportLists]-->2.3&nbsp;<!--[endif]--><strong><span style="font-family: 华文楷体;">字符输入流</span>Reader</strong></h2>
<p><span style="font-family: 宋体;">上述程序中我们读取拥有中文的文件时，使用的字节流在读取，那么我们读取到的都是一个一个字节。只要把这些字节去查阅对应的编码表，就能够得到与之对应的字符。</span>API<span style="font-family: 宋体;">中是否给我们已经提供了读取相应字符的功能流对象，</span><span style="font-family: Calibri;">Reader</span><span style="font-family: 宋体;">，读取字符流的抽象超类。</span></p>
<p><span style="font-family: 宋体;"><img src="./images/java基础(23)字节流、字符流10.png" alt="" /></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>read():读取单个字符并返回</p>
<p class="16">read(char[]):将数据读取到数组中，并返回读取的个数。</p>
<p>&nbsp;</p>
<h3><!--[if !supportLists]-->2.3.1&nbsp;<!--[endif]--><strong>FileReader<span style="font-family: 黑体;">类</span></strong></h3>
<p><span style="font-family: 宋体;">查阅</span>FileInputStream<span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">API</span><span style="font-family: 宋体;">，发现</span><span style="font-family: Calibri;">FileInputStream </span><span style="font-family: 宋体;">用于读取诸如图像数据之类的原始字节流。要读取字符流，请考虑使用 </span><span style="font-family: Calibri;">FileReader</span><span style="font-family: 宋体;">。</span></p>
<p><span style="font-family: 宋体;">打开</span>FileReader<span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">API</span><span style="font-family: 宋体;">介绍。用来读取字符文件的便捷类。此类的构造方法假定默认字符编码和默认字节缓冲区大小都是适当的</span></p>
<p class="16">构造方法</p>
<p><strong><img src="./images/java基础(23)字节流、字符流11.png" alt="" /></strong></p>
<h3><!--[if !supportLists]-->2.3.2&nbsp;<!--[endif]--><strong>FileReader<span style="font-family: 黑体;">读取包含中文的文件</span></strong></h3>
<p class="16"><span style="font-family: 宋体;">使用</span>FileReader读取包含中文的文件</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CharStreamDemo {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">给文件中写中文</span>
<span style="color: #000000;">        writeCNText();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">读取文件中的中文</span>
<span style="color: #000000;">        readCNText();
    }    
    </span><span style="color: #008000;">//</span><span style="color: #008000;">读取中文</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> readCNText() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        FileReader fr </span>= <span style="color: #0000ff;">new</span> FileReader("D:\\test\\cn.txt"<span style="color: #000000;">);
        </span><span style="color: #0000ff;">int</span> ch = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((ch = fr.read())!=-1<span style="color: #000000;">){
            </span><span style="color: #008000;">//</span><span style="color: #008000;">输出的字符对应的编码值</span>
<span style="color: #000000;">            System.out.println(ch);
            </span><span style="color: #008000;">//</span><span style="color: #008000;">输出字符本身</span>
            System.out.println((<span style="color: #0000ff;">char</span><span style="color: #000000;">)ch);
        }
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">写中文</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> writeCNText() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        FileOutputStream fos </span>= <span style="color: #0000ff;">new</span> FileOutputStream("D:\\test\\cn.txt"<span style="color: #000000;">);
        fos.write(</span>"a传智播客欢迎你"<span style="color: #000000;">.getBytes());
        fos.close();
    }
}</span></code></pre>

<h2><!--[if !supportLists]-->2.4&nbsp;<!--[endif]--><strong><span style="font-family: 华文楷体;">字符输出流</span>Writer</strong></h2>
<p><span style="font-family: 宋体;">既然有专门用于读取字符的流对象，那么肯定也有写的字符流对象，查阅</span>API<span style="font-family: 宋体;">，发现有一个</span><span style="font-family: Calibri;">Writer</span><span style="font-family: 宋体;">类，</span><span style="font-family: Calibri;">Writer</span><span style="font-family: 宋体;">是写入字符流的抽象类。其中描述了相应的写的动作。</span></p>
<p><strong><img src="./images/java基础(23)字节流、字符流12.png" alt="" /></strong></p>
<h3><!--[if !supportLists]-->2.4.1&nbsp;<!--[endif]--><strong>FileWriter<span style="font-family: 黑体;">类</span></strong></h3>
<p><span style="font-family: 宋体;">查阅</span>FileOutputStream<span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">API</span><span style="font-family: 宋体;">，发现</span><span style="font-family: Calibri;">FileOutputStream </span><span style="font-family: 宋体;">用于写入诸如图像数据之类的原始字节的流。要写入字符流，请考虑使用 </span><span style="font-family: Calibri;">FileWriter</span><span style="font-family: 宋体;">。</span></p>
<p><span style="font-family: 宋体;">打开</span>FileWriter<span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">API</span><span style="font-family: 宋体;">介绍。用来写入字符文件的便捷类。此类的构造方法假定默认字符编码和默认字节缓冲区大小都是可接受的。</span></p>
<p class="16">构造方法</p>
<p><strong><img src="./images/java基础(23)字节流、字符流13.png" alt="" /></strong></p>
<h3><!--[if !supportLists]-->2.4.2&nbsp;<!--[endif]--><strong>FileWriter<span style="font-family: 黑体;">写入中文到文件中</span></strong></h3>
<p class="16">写入字符到文件中，先进行流的刷新，再进行流的关闭。</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> FileWriterDemo {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">演示FileWriter 用于操作文件的便捷类。</span>
        FileWriter fw = <span style="color: #0000ff;">new</span> FileWriter("d：\\text\\fw.txt"<span style="color: #000000;">);
        fw.write(</span>"你好谢谢再见");<span style="color: #008000;">//</span><span style="color: #008000;">这些文字都要先编码。都写入到了流的缓冲区中。</span>
<span style="color: #000000;">        fw.flush();
        fw.close();
    }
}</span></code></pre>

<h2><!--[if !supportLists]-->2.5&nbsp;<!--[endif]--><strong>flush()<span style="font-family: 华文楷体;">和</span><span style="font-family: 'Times New Roman';">close()</span><span style="font-family: 华文楷体;">的区别？</span></strong></h2>
<p><strong><span style="font-family: 华文楷体;"><img src="./images/java基础(23)字节流、字符流14.png" alt="" /></span></strong></p>
<p>flush():<span style="font-family: 宋体;">将流中的缓冲区缓冲的数据刷新到目的地中，刷新后，流还可以继续使用。</span></p>
<p>close():<span style="font-family: 宋体;">关闭资源，但在关闭前会将缓冲区中的数据先刷新到目的地，否则丢失数据，然后在关闭流。流不可以使用。如果写入数据多，一定要一边写一边刷新，最后一次可以不刷新，由</span><span style="font-family: Calibri;">close</span><span style="font-family: 宋体;">完成刷新并关闭。</span></p>
<p>&nbsp;</p>
<p><strong><img src="./images/java基础(23)字节流、字符流15.png" alt="" /></strong></p>
<h2><!--[if !supportLists]-->2.6&nbsp;<!--[endif]--><strong>字符流练习</strong></h2>
<h3><!--[if !supportLists]-->2.6.1&nbsp;<!--[endif]--><strong>复制文本文件</strong></h3>
<p>练习：复制文本文件。</p>
<p>思路：</p>
<p>1<span style="font-family: 宋体;">，既然是文本涉及编码表。需要用字符流。</span></p>
<p>2<span style="font-family: 宋体;">，操作的是文件。涉及硬盘。</span></p>
<p>3<span style="font-family: 宋体;">，有指定码表吗？没有，默认就行。</span></p>
<p><span style="font-family: 宋体;">操作的是文件，使用的</span> <span style="font-family: 宋体;">默认码表。使用哪个字符流对象。直接使用字符流操作文件的便捷类。</span>FileReader &nbsp;FileWriter</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CopyTextFileTest {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        copyTextFile();
    }
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> copyTextFile() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">1,明确源和目的。</span>
        FileReader fr = <span style="color: #0000ff;">new</span> FileReader("c:\\cn.txt"<span style="color: #000000;">);
        FileWriter fw </span>= <span style="color: #0000ff;">new</span> FileWriter("c:\\copy.txt"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">2,为了提高效率。自定义缓冲区数组。字符数组。</span>
        <span style="color: #0000ff;">char</span>[] buf = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">char</span>[1024<span style="color: #000000;">];
        </span><span style="color: #0000ff;">int</span> len = 0<span style="color: #000000;">;
        </span><span style="color: #0000ff;">while</span>((len=fr.read(buf))!=-1<span style="color: #000000;">){
            fw.write(buf,</span>0<span style="color: #000000;">,len);
        }
        </span><span style="color: #008000;">/*</span><span style="color: #008000;">2,循环读写操作。效率低。
        int ch = 0;
        while((ch=fr.read())!=-1){
            fw.write(ch);
        }
        </span><span style="color: #008000;">*/</span>
        <span style="color: #008000;">//</span><span style="color: #008000;">3,关闭资源。</span>
<span style="color: #000000;">        fw.close();
        fr.close();
    }
}</span></code></pre>


</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>