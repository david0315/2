<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Java生成菜单树（目录树）的几种方式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Java生成菜单树（目录树）的几种方式</center></div><div class='banquan'>原文出处:本文由博客园博主软工风少提供。<br/>
原文连接:https://www.cnblogs.com/why5125/p/11492990.html</div><br>
    <p>本文介绍两种不同生成多级目录树的方式：1. <strong>递归生成</strong>，2.&nbsp; <strong>map+list 集合生成</strong>。最下方会附上完整代码。</p>
<p>生成树的基本规则：子节点的par_id等于父节点的id。</p>
<p><strong>1. 实体类</strong></p>
<src class="cnblogs_code" onclick="cnblogs_code_show('0bcc69af-b38d-4897-8448-182e7ac5afa6')"><img id="code_img_closed_0bcc69af-b38d-4897-8448-182e7ac5afa6" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_0bcc69af-b38d-4897-8448-182e7ac5afa6" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0bcc69af-b38d-4897-8448-182e7ac5afa6',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_0bcc69af-b38d-4897-8448-182e7ac5afa6" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Menu {

  </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;
  </span><span style="color: #0000ff;">private</span> String menuName;<span style="color: #008000;">//</span><span style="color: #008000;">名称</span>
  <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span> parId;<span style="color: #008000;">//</span><span style="color: #008000;">上级ID</span>
  <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span> type;<span style="color: #008000;">//</span><span style="color: #008000;">0：目录；1：菜单</span>
  <span style="color: #0000ff;">private</span><span style="color: #000000;"> String url;
  </span><span style="color: #0000ff;">public</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> children;

  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Menu() {
    </span><span style="color: #0000ff;">super</span><span style="color: #000000;">();
    </span><span style="color: #0000ff;">this</span>.children = <span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();
  }

  </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Menu(Builder builder) {
    setId(builder.id);
    setMenuName(builder.menuName);
    setParId(builder.parId);
    setType(builder.type);
    setUrl(builder.url);
    setChildren(builder.children);
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addChildren(Menu menu) {

    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children.add(menu);
  }


  </span><span style="color: #0000ff;">public</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> getChildren() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> children;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setChildren(ArrayList&lt;Menu&gt;<span style="color: #000000;"> children) {
    </span><span style="color: #0000ff;">if</span> (children==<span style="color: #0000ff;">null</span>){<span style="color: #008000;">//</span><span style="color: #008000;">防止添加子节点出现空引用</span>
      children=<span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();
    }
    </span><span style="color: #0000ff;">this</span>.children =<span style="color: #000000;"> children;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getId() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> id;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {
    </span><span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
  }


  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getMenuName() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> menuName;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setMenuName(String menuName) {
    </span><span style="color: #0000ff;">this</span>.menuName =<span style="color: #000000;"> menuName;
  }


  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getParId() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> parId;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setParId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> parId) {
    </span><span style="color: #0000ff;">this</span>.parId =<span style="color: #000000;"> parId;
  }


  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getType() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> type;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setType(<span style="color: #0000ff;">int</span><span style="color: #000000;"> type) {
    </span><span style="color: #0000ff;">this</span>.type =<span style="color: #000000;"> type;
  }


  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getUrl() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> url;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setUrl(String url) {
    </span><span style="color: #0000ff;">this</span>.url =<span style="color: #000000;"> url;
  }

  @Override
  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {
    </span><span style="color: #0000ff;">return</span> "Menu{" +
            "id=" + id +
            ", menuName='" + menuName + '\'' +
            ", parId=" + parId +
            ", type=" + type +
            ", url='" + url + '\'' +
            ", children=" + children +
            '}'<span style="color: #000000;">;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Builder {
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String menuName;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> parId;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> type;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String url;
    </span><span style="color: #0000ff;">private</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> children;

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder() {
    }

    </span><span style="color: #0000ff;">public</span> Builder id(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {
      </span><span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder menuName(String menuName) {
      </span><span style="color: #0000ff;">this</span>.menuName =<span style="color: #000000;"> menuName;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder parId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> parId) {
      </span><span style="color: #0000ff;">this</span>.parId =<span style="color: #000000;"> parId;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder type(<span style="color: #0000ff;">int</span><span style="color: #000000;"> type) {
      </span><span style="color: #0000ff;">this</span>.type =<span style="color: #000000;"> type;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder url(String url) {
      </span><span style="color: #0000ff;">this</span>.url =<span style="color: #000000;"> url;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder children(ArrayList&lt;Menu&gt;<span style="color: #000000;"> children) {
      </span><span style="color: #0000ff;">this</span>.children =<span style="color: #000000;"> children;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Menu build() {
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> Menu(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
    }
  }
}</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p>注意使用build()插入数据时setChildren注意要判空处理，不然添加子节点时出现空引用</p>
<p>public void setChildren(ArrayList&lt;Menu&gt; children) {<br />&nbsp;&nbsp;&nbsp; if (children==null){//防止添加子节点出现空引用<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; children=new ArrayList&lt;&gt;();<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; this.children = children;<br />&nbsp; }</p>
<p><br /><strong>2. 创建测试数据</strong></p>
<src class="cnblogs_code" onclick="cnblogs_code_show('2f8cebae-df5f-4e25-ae28-006069149144')"><img id="code_img_closed_2f8cebae-df5f-4e25-ae28-006069149144" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_2f8cebae-df5f-4e25-ae28-006069149144" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2f8cebae-df5f-4e25-ae28-006069149144',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_2f8cebae-df5f-4e25-ae28-006069149144" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        createData();
        dataList.forEach(e</span>-&gt;<span style="color: #000000;"> System.out.println(e.toString()));
        
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">保存数据</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> List&lt;Menu&gt; dataList=<span style="color: #0000ff;">new</span><span style="color: #000000;"> ArrayList();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">创建数据</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span>  <span style="color: #0000ff;">void</span><span style="color: #000000;">  createData(){
        dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(0).menuName("根节点").parId(-2).type(0).url(""<span style="color: #000000;">).build());
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 1; i &lt;50 ; i++<span style="color: #000000;">) {
            </span><span style="color: #0000ff;">if</span> (i&lt;11<span style="color: #000000;">) {
                dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(i).menuName("1级节点"+i).parId(0).type(0).url(""<span style="color: #000000;">).build());
            }</span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(i).menuName(((i/10)+1)+"级节点"+i).parId(i-10).type(0).url(""<span style="color: #000000;">).build());
            }
        }
    }</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p>生成如下数据：</p>
<src class="cnblogs_code" onclick="cnblogs_code_show('11507345-4209-479b-ad2b-e2af5eb7898f')"><img id="code_img_closed_11507345-4209-479b-ad2b-e2af5eb7898f" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_11507345-4209-479b-ad2b-e2af5eb7898f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('11507345-4209-479b-ad2b-e2af5eb7898f',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_11507345-4209-479b-ad2b-e2af5eb7898f" class="cnblogs_code_hide">
<pre><code>Menu{id=0, menuName='根节点', parId=-2, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=1, menuName='1级节点1', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=2, menuName='1级节点2', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=3, menuName='1级节点3', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=4, menuName='1级节点4', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=5, menuName='1级节点5', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=6, menuName='1级节点6', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=7, menuName='1级节点7', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=8, menuName='1级节点8', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=9, menuName='1级节点9', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=10, menuName='1级节点10', parId=0, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=11, menuName='2级节点11', parId=1, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=12, menuName='2级节点12', parId=2, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=13, menuName='2级节点13', parId=3, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=14, menuName='2级节点14', parId=4, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=15, menuName='2级节点15', parId=5, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=16, menuName='2级节点16', parId=6, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=17, menuName='2级节点17', parId=7, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=18, menuName='2级节点18', parId=8, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=19, menuName='2级节点19', parId=9, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=20, menuName='3级节点20', parId=10, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=21, menuName='3级节点21', parId=11, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=22, menuName='3级节点22', parId=12, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=23, menuName='3级节点23', parId=13, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=24, menuName='3级节点24', parId=14, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=25, menuName='3级节点25', parId=15, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=26, menuName='3级节点26', parId=16, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=27, menuName='3级节点27', parId=17, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=28, menuName='3级节点28', parId=18, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=29, menuName='3级节点29', parId=19, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=30, menuName='4级节点30', parId=20, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=31, menuName='4级节点31', parId=21, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=32, menuName='4级节点32', parId=22, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=33, menuName='4级节点33', parId=23, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=34, menuName='4级节点34', parId=24, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=35, menuName='4级节点35', parId=25, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=36, menuName='4级节点36', parId=26, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=37, menuName='4级节点37', parId=27, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=38, menuName='4级节点38', parId=28, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=39, menuName='4级节点39', parId=29, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=40, menuName='5级节点40', parId=30, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=41, menuName='5级节点41', parId=31, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=42, menuName='5级节点42', parId=32, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=43, menuName='5级节点43', parId=33, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=44, menuName='5级节点44', parId=34, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=45, menuName='5级节点45', parId=35, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=46, menuName='5级节点46', parId=36, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=47, menuName='5级节点47', parId=37, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=48, menuName='5级节点48', parId=38, type=0, url='', children=<span style="color: #000000;">[]}
Menu{id</span>=49, menuName='5级节点49', parId=39, type=0, url='', children=[]}</code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p><strong>3. 生成树（集合方式）</strong></p>
<src class="cnblogs_code" onclick="cnblogs_code_show('ac300ba8-d15b-4fb3-a5d5-f3ecfcf1670b')"><img id="code_img_closed_ac300ba8-d15b-4fb3-a5d5-f3ecfcf1670b" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_ac300ba8-d15b-4fb3-a5d5-f3ecfcf1670b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ac300ba8-d15b-4fb3-a5d5-f3ecfcf1670b',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_ac300ba8-d15b-4fb3-a5d5-f3ecfcf1670b" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> Map&lt;String, Object&gt; getTreeByColl(List&lt;Menu&gt;<span style="color: #000000;"> list) {
        Map</span>&lt;String, Object&gt; resmap=<span style="color: #0000ff;">new</span> HashMap&lt;&gt;<span style="color: #000000;">();
        Map</span>&lt;Integer, Menu&gt;<span style="color: #000000;"> map;
        List</span>&lt;Menu&gt; treelist= <span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();

        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">null</span>==list||<span style="color: #000000;">list.isEmpty()){
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        }
        map </span>= list.stream().collect(Collectors.toMap(Menu::getId, a -&gt; a,(k1, k2)-&gt;<span style="color: #000000;">k1));
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 将list集合对象转换为json的字符串
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 如果id是父级的话就放入tree中treelist</span>
        <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Menu menu : list) {
            </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">null</span>==<span style="color: #000000;">map.get(menu.getParId())) {
                treelist.add(menu);
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 子级通过父id获取到父级的类型</span>
                Menu parent =<span style="color: #000000;"> map.get(menu.getParId());
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 父级获得子级，再将子级放到对应的父级中</span>
<span style="color: #000000;">                parent.addChildren(menu);
            }
        }
        resmap.put(</span>"data"<span style="color: #000000;">,treelist);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> resmap;
    }</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p>打印json如下：打印json时可以通过<span style="color: #bbb529;">@JSONField(<span style="color: #d0d0ff;">ordinal=<span style="color: #6897bb;">1)<span style="color: #000000;"> 在实体类属性设置顺序</span></span></span></span></p>
<src class="cnblogs_code" onclick="cnblogs_code_show('e40d67fe-7eaa-4c3a-916d-93f4a6a4dc8f')"><img id="code_img_closed_e40d67fe-7eaa-4c3a-916d-93f4a6a4dc8f" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_e40d67fe-7eaa-4c3a-916d-93f4a6a4dc8f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e40d67fe-7eaa-4c3a-916d-93f4a6a4dc8f',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_e40d67fe-7eaa-4c3a-916d-93f4a6a4dc8f" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">{
  </span>"data"<span style="color: #000000;">: [
    {
      </span>"id": 0<span style="color: #000000;">,
      </span>"menuName": "根节点"<span style="color: #000000;">,
      </span>"parId": -2<span style="color: #000000;">,
      </span>"type": 0<span style="color: #000000;">,
      </span>"url": ""<span style="color: #000000;">,
      </span>"children"<span style="color: #000000;">: [
        {
          </span>"id": 1<span style="color: #000000;">,
          </span>"menuName": "1级节点1"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 11<span style="color: #000000;">,
              </span>"menuName": "2级节点11"<span style="color: #000000;">,
              </span>"parId": 1<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 21<span style="color: #000000;">,
                  </span>"menuName": "3级节点21"<span style="color: #000000;">,
                  </span>"parId": 11<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 31<span style="color: #000000;">,
                      </span>"menuName": "4级节点31"<span style="color: #000000;">,
                      </span>"parId": 21<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 41<span style="color: #000000;">,
                          </span>"menuName": "5级节点41"<span style="color: #000000;">,
                          </span>"parId": 31<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 2<span style="color: #000000;">,
          </span>"menuName": "1级节点2"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 12<span style="color: #000000;">,
              </span>"menuName": "2级节点12"<span style="color: #000000;">,
              </span>"parId": 2<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 22<span style="color: #000000;">,
                  </span>"menuName": "3级节点22"<span style="color: #000000;">,
                  </span>"parId": 12<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 32<span style="color: #000000;">,
                      </span>"menuName": "4级节点32"<span style="color: #000000;">,
                      </span>"parId": 22<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 42<span style="color: #000000;">,
                          </span>"menuName": "5级节点42"<span style="color: #000000;">,
                          </span>"parId": 32<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 3<span style="color: #000000;">,
          </span>"menuName": "1级节点3"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 13<span style="color: #000000;">,
              </span>"menuName": "2级节点13"<span style="color: #000000;">,
              </span>"parId": 3<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 23<span style="color: #000000;">,
                  </span>"menuName": "3级节点23"<span style="color: #000000;">,
                  </span>"parId": 13<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 33<span style="color: #000000;">,
                      </span>"menuName": "4级节点33"<span style="color: #000000;">,
                      </span>"parId": 23<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 43<span style="color: #000000;">,
                          </span>"menuName": "5级节点43"<span style="color: #000000;">,
                          </span>"parId": 33<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 4<span style="color: #000000;">,
          </span>"menuName": "1级节点4"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 14<span style="color: #000000;">,
              </span>"menuName": "2级节点14"<span style="color: #000000;">,
              </span>"parId": 4<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 24<span style="color: #000000;">,
                  </span>"menuName": "3级节点24"<span style="color: #000000;">,
                  </span>"parId": 14<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 34<span style="color: #000000;">,
                      </span>"menuName": "4级节点34"<span style="color: #000000;">,
                      </span>"parId": 24<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 44<span style="color: #000000;">,
                          </span>"menuName": "5级节点44"<span style="color: #000000;">,
                          </span>"parId": 34<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 5<span style="color: #000000;">,
          </span>"menuName": "1级节点5"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 15<span style="color: #000000;">,
              </span>"menuName": "2级节点15"<span style="color: #000000;">,
              </span>"parId": 5<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 25<span style="color: #000000;">,
                  </span>"menuName": "3级节点25"<span style="color: #000000;">,
                  </span>"parId": 15<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 35<span style="color: #000000;">,
                      </span>"menuName": "4级节点35"<span style="color: #000000;">,
                      </span>"parId": 25<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 45<span style="color: #000000;">,
                          </span>"menuName": "5级节点45"<span style="color: #000000;">,
                          </span>"parId": 35<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 6<span style="color: #000000;">,
          </span>"menuName": "1级节点6"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 16<span style="color: #000000;">,
              </span>"menuName": "2级节点16"<span style="color: #000000;">,
              </span>"parId": 6<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 26<span style="color: #000000;">,
                  </span>"menuName": "3级节点26"<span style="color: #000000;">,
                  </span>"parId": 16<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 36<span style="color: #000000;">,
                      </span>"menuName": "4级节点36"<span style="color: #000000;">,
                      </span>"parId": 26<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 46<span style="color: #000000;">,
                          </span>"menuName": "5级节点46"<span style="color: #000000;">,
                          </span>"parId": 36<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 7<span style="color: #000000;">,
          </span>"menuName": "1级节点7"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 17<span style="color: #000000;">,
              </span>"menuName": "2级节点17"<span style="color: #000000;">,
              </span>"parId": 7<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 27<span style="color: #000000;">,
                  </span>"menuName": "3级节点27"<span style="color: #000000;">,
                  </span>"parId": 17<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 37<span style="color: #000000;">,
                      </span>"menuName": "4级节点37"<span style="color: #000000;">,
                      </span>"parId": 27<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 47<span style="color: #000000;">,
                          </span>"menuName": "5级节点47"<span style="color: #000000;">,
                          </span>"parId": 37<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 8<span style="color: #000000;">,
          </span>"menuName": "1级节点8"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 18<span style="color: #000000;">,
              </span>"menuName": "2级节点18"<span style="color: #000000;">,
              </span>"parId": 8<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 28<span style="color: #000000;">,
                  </span>"menuName": "3级节点28"<span style="color: #000000;">,
                  </span>"parId": 18<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 38<span style="color: #000000;">,
                      </span>"menuName": "4级节点38"<span style="color: #000000;">,
                      </span>"parId": 28<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 48<span style="color: #000000;">,
                          </span>"menuName": "5级节点48"<span style="color: #000000;">,
                          </span>"parId": 38<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 9<span style="color: #000000;">,
          </span>"menuName": "1级节点9"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 19<span style="color: #000000;">,
              </span>"menuName": "2级节点19"<span style="color: #000000;">,
              </span>"parId": 9<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 29<span style="color: #000000;">,
                  </span>"menuName": "3级节点29"<span style="color: #000000;">,
                  </span>"parId": 19<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 39<span style="color: #000000;">,
                      </span>"menuName": "4级节点39"<span style="color: #000000;">,
                      </span>"parId": 29<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        {
                          </span>"id": 49<span style="color: #000000;">,
                          </span>"menuName": "5级节点49"<span style="color: #000000;">,
                          </span>"parId": 39<span style="color: #000000;">,
                          </span>"type": 0<span style="color: #000000;">,
                          </span>"url": ""<span style="color: #000000;">,
                          </span>"children"<span style="color: #000000;">: [
                            
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          </span>"id": 10<span style="color: #000000;">,
          </span>"menuName": "1级节点10"<span style="color: #000000;">,
          </span>"parId": 0<span style="color: #000000;">,
          </span>"type": 0<span style="color: #000000;">,
          </span>"url": ""<span style="color: #000000;">,
          </span>"children"<span style="color: #000000;">: [
            {
              </span>"id": 20<span style="color: #000000;">,
              </span>"menuName": "3级节点20"<span style="color: #000000;">,
              </span>"parId": 10<span style="color: #000000;">,
              </span>"type": 0<span style="color: #000000;">,
              </span>"url": ""<span style="color: #000000;">,
              </span>"children"<span style="color: #000000;">: [
                {
                  </span>"id": 30<span style="color: #000000;">,
                  </span>"menuName": "4级节点30"<span style="color: #000000;">,
                  </span>"parId": 20<span style="color: #000000;">,
                  </span>"type": 0<span style="color: #000000;">,
                  </span>"url": ""<span style="color: #000000;">,
                  </span>"children"<span style="color: #000000;">: [
                    {
                      </span>"id": 40<span style="color: #000000;">,
                      </span>"menuName": "5级节点40"<span style="color: #000000;">,
                      </span>"parId": 30<span style="color: #000000;">,
                      </span>"type": 0<span style="color: #000000;">,
                      </span>"url": ""<span style="color: #000000;">,
                      </span>"children"<span style="color: #000000;">: [
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p><strong>4. 生成树（递归方式）</strong></p>
<p>待续。。。。。</p>
<p>/*********************************************************************************************************************/</p>
<p>最后完整代码如下：</p>
<p>实体类：</p>
<src class="cnblogs_code" onclick="cnblogs_code_show('4c8da809-4ffe-4ebd-8470-4a3abaf64f48')"><img id="code_img_closed_4c8da809-4ffe-4ebd-8470-4a3abaf64f48" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_4c8da809-4ffe-4ebd-8470-4a3abaf64f48" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4c8da809-4ffe-4ebd-8470-4a3abaf64f48',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_4c8da809-4ffe-4ebd-8470-4a3abaf64f48" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> com.alibaba.fastjson.annotation.JSONField;

</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Menu {
  @JSONField(ordinal</span>=1<span style="color: #000000;">)
  </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;
  @JSONField(ordinal</span>=2<span style="color: #000000;">)
  </span><span style="color: #0000ff;">private</span> String menuName;<span style="color: #008000;">//</span><span style="color: #008000;">名称</span>
  @JSONField(ordinal=3<span style="color: #000000;">)
  </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span> parId;<span style="color: #008000;">//</span><span style="color: #008000;">上级ID</span>
  @JSONField(ordinal=4<span style="color: #000000;">)
  </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span> type;<span style="color: #008000;">//</span><span style="color: #008000;">0：目录；1：菜单</span>
  @JSONField(ordinal=5<span style="color: #000000;">)
  </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String url;
  @JSONField(ordinal</span>=6<span style="color: #000000;">)
  </span><span style="color: #0000ff;">public</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> children;

  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Menu() {
    </span><span style="color: #0000ff;">super</span><span style="color: #000000;">();
    </span><span style="color: #0000ff;">this</span>.children = <span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();
  }

  </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Menu(Builder builder) {
    setId(builder.id);
    setMenuName(builder.menuName);
    setParId(builder.parId);
    setType(builder.type);
    setUrl(builder.url);
    setChildren(builder.children);
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addChildren(Menu menu) {

    </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.children.add(menu);
  }


  </span><span style="color: #0000ff;">public</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> getChildren() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> children;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setChildren(ArrayList&lt;Menu&gt;<span style="color: #000000;"> children) {
    </span><span style="color: #0000ff;">if</span> (children==<span style="color: #0000ff;">null</span><span style="color: #000000;">){
      children</span>=<span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();
    }
    </span><span style="color: #0000ff;">this</span>.children =<span style="color: #000000;"> children;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getId() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> id;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {
    </span><span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
  }


  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getMenuName() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> menuName;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setMenuName(String menuName) {
    </span><span style="color: #0000ff;">this</span>.menuName =<span style="color: #000000;"> menuName;
  }


  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getParId() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> parId;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setParId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> parId) {
    </span><span style="color: #0000ff;">this</span>.parId =<span style="color: #000000;"> parId;
  }


  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getType() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> type;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setType(<span style="color: #0000ff;">int</span><span style="color: #000000;"> type) {
    </span><span style="color: #0000ff;">this</span>.type =<span style="color: #000000;"> type;
  }


  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getUrl() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> url;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setUrl(String url) {
    </span><span style="color: #0000ff;">this</span>.url =<span style="color: #000000;"> url;
  }

  @Override
  </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {
    </span><span style="color: #0000ff;">return</span> "Menu{" +
            "id=" + id +
            ", menuName='" + menuName + '\'' +
            ", parId=" + parId +
            ", type=" + type +
            ", url='" + url + '\'' +
            ", children=" + children +
            '}'<span style="color: #000000;">;
  }

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Builder {
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String menuName;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> parId;
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> type;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String url;
    </span><span style="color: #0000ff;">private</span> ArrayList&lt;Menu&gt;<span style="color: #000000;"> children;

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder() {
    }

    </span><span style="color: #0000ff;">public</span> Builder id(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {
      </span><span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder menuName(String menuName) {
      </span><span style="color: #0000ff;">this</span>.menuName =<span style="color: #000000;"> menuName;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder parId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> parId) {
      </span><span style="color: #0000ff;">this</span>.parId =<span style="color: #000000;"> parId;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder type(<span style="color: #0000ff;">int</span><span style="color: #000000;"> type) {
      </span><span style="color: #0000ff;">this</span>.type =<span style="color: #000000;"> type;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Builder url(String url) {
      </span><span style="color: #0000ff;">this</span>.url =<span style="color: #000000;"> url;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span> Builder children(ArrayList&lt;Menu&gt;<span style="color: #000000;"> children) {
      </span><span style="color: #0000ff;">this</span>.children =<span style="color: #000000;"> children;
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Menu build() {
      </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> Menu(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
    }
  }
}</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p>树生成类：</p>
<src class="cnblogs_code" onclick="cnblogs_code_show('4a7704bc-a330-45df-8a7f-5bd3477db1dd')"><img id="code_img_closed_4a7704bc-a330-45df-8a7f-5bd3477db1dd" class="code_img_closed" src="./images/Java生成菜单树（目录树）的几种方式0.png" alt="" /><img id="code_img_opened_4a7704bc-a330-45df-8a7f-5bd3477db1dd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4a7704bc-a330-45df-8a7f-5bd3477db1dd',event)" src="./images/Java生成菜单树（目录树）的几种方式1.png" alt="" />
<src id="cnblogs_code_open_4a7704bc-a330-45df-8a7f-5bd3477db1dd" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> com.alibaba.fastjson.JSONObject;

</span><span style="color: #0000ff;">import</span> java.util.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.stream.Collectors;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TreeUtil {
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
        createData();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">dataList.forEach(e-&gt; System.out.println(e.toString()));</span>
<span style="color: #000000;">        System.out.println(JSONObject.toJSONString(getTreeByColl(dataList)));
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">保存数据</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> List&lt;Menu&gt; dataList=<span style="color: #0000ff;">new</span><span style="color: #000000;"> ArrayList();
    </span><span style="color: #008000;">//</span><span style="color: #008000;">创建数据</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span>  <span style="color: #0000ff;">void</span><span style="color: #000000;">  createData(){
        dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(0).menuName("根节点").parId(-2).type(0).url(""<span style="color: #000000;">).build());
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 1; i &lt;50 ; i++<span style="color: #000000;">) {
            </span><span style="color: #0000ff;">if</span> (i&lt;11<span style="color: #000000;">) {
                dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(i).menuName("1级节点"+i).parId(0).type(0).url(""<span style="color: #000000;">).build());
            }</span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                dataList.add(</span><span style="color: #0000ff;">new</span> Menu.Builder().id(i).menuName(((i/10)+1)+"级节点"+i).parId(i-10).type(0).url(""<span style="color: #000000;">).build());
            }
        }
    }
</span><span style="color: #008000;">//</span><span style="color: #008000;">System.out.println(getTreeByColl(dataList));</span>
    <span style="color: #008000;">/**</span><span style="color: #008000;">
     * 通过集合方式生成树
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> list
     * </span><span style="color: #808080;">@return</span>
     <span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> Map&lt;String, Object&gt; getTreeByColl(List&lt;Menu&gt;<span style="color: #000000;"> list) {
        Map</span>&lt;String, Object&gt; resmap=<span style="color: #0000ff;">new</span> HashMap&lt;&gt;<span style="color: #000000;">();
        Map</span>&lt;Integer, Menu&gt;<span style="color: #000000;"> map;
        List</span>&lt;Menu&gt; treelist= <span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();

        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">null</span>==list||<span style="color: #000000;">list.isEmpty()){
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        }
        map </span>= list.stream().collect(Collectors.toMap(Menu::getId, a -&gt; a,(k1, k2)-&gt;<span style="color: #000000;">k1));
        </span><span style="color: #008000;">/*</span><span style="color: #008000;">List&lt;Map.Entry&lt;Integer, Menu&gt;&gt; listMap = new ArrayList&lt;Map.Entry&lt;Integer, Menu&gt;&gt;(map.entrySet());
        Collections.sort(listMap, new Comparator&lt;Map.Entry&lt;Integer, Menu&gt;&gt;() {
            public int compare(Map.Entry&lt;Integer, Menu&gt; o1, Map.Entry&lt;Integer, Menu&gt; o2) {
                return o2.getKey().compareTo(o1.getKey());
            }
        });</span><span style="color: #008000;">*/</span>
        <span style="color: #008000;">//</span><span style="color: #008000;"> 将list集合对象转换为json的字符串
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 如果id是父级的话就放入tree中treelist</span>
        <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Menu menu : list) {
            </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">null</span>==<span style="color: #000000;">map.get(menu.getParId())) {
                treelist.add(menu);
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 子级通过父id获取到父级的类型</span>
                Menu parent =<span style="color: #000000;"> map.get(menu.getParId());
                </span><span style="color: #008000;">//</span><span style="color: #008000;"> 父级获得子级，再将子级放到对应的父级中</span>
<span style="color: #000000;">                parent.addChildren(menu);
            }
        }


        resmap.put(</span>"data"<span style="color: #000000;">,treelist);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> resmap;
    }

}</span></code></pre>

<span class="cnblogs_code_collapse">View Code</span>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>