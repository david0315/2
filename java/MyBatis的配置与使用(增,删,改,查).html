<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修MyBatis的配置与使用(增,删,改,查)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>MyBatis的配置与使用(增,删,改,查)</center></div><div class='banquan'>原文出处:本文由博客园博主X林一提供。<br/>
原文连接:https://www.cnblogs.com/xym0996/p/11666281.html</div><br>
    <p>---恢复内容开始---</p>
<p style="text-align: center;"><span style="font-size: 18pt; color: #3366ff;"><strong>Mybatis入门介绍</strong></span></p>
<p style="text-align: left;"><span style="font-size: 14pt;"><strong>一、MyBatis介绍</strong></span></p>
<p style="text-align: left;"><strong>　　什么是MyBtis？</strong></p>
<p style="text-align: left;"><strong>　　　<span style="font-size: 14px;">　</span></strong><span style="font-size: 14px;">MyBatis 是一个简化和实现了 Java 数据持久化层(persistence layer)的开源框架，它抽象了大量的 JDBC 冗余代 码，并提供了一个简单易用的 API 和数据库交互。</span></p>
<p style="text-align: left;"><span style="font-size: 14px;">　　　　MyBatis 的前身是 iBATIS，iBATIS 于 2002 年由 Clinton Begin 创建。MyBatis 3 是 iBATIS 的全新设计，支持 注解和 Mapper。&nbsp;</span></p>
<p style="text-align: left;"><span style="font-size: 14px;">　　　　MyBatis 流行的主要原因在于它的简单性和易使用性。在 Java 应用程序中，数据持久化层涉及到的工作有：将从数据库查询到的数据生成所需要的 Java 对象；将 Java 对象中的数据通过 SQL 持久化到数据库中。 </span></p>
<p style="text-align: left;"><span style="font-size: 14px;">　　　　MyBatis 通过抽象底层的 JDBC 代码，自动化 SQL 结果集产生 Java 对象、Java 对象的数据持久化数据库中的过程 使得对 SQL 的使用变得容易。 如</span></p>
<p style="text-align: left;">　　<strong>为什么选择MyBtis？</strong></p>
<ul>
<li><span style="font-size: 14px;">最重要的就是消除了很多JDBC是冗余。</span></li>
<li><span style="font-size: 14px;">学习成本很低</span></li>
<li><span style="font-size: 14px;">他能很好的与传统数据库协同工作。</span></li>
<li><span style="font-size: 14px;">支持SQL语句。</span></li>
<li><span style="font-size: 14px;">他提供了与spring框架的集成。</span></li>
<li><span style="font-size: 15px;"><span style="font-size: 14px;">它引入的性能较好。　　　　　　</span><strong><span style="font-size: 14px;">　</span>　</strong></span></li>
</ul>
<p style="text-align: left;"><strong>　　</strong></p>
<p style="text-align: left;"><strong><strong><span style="font-size: 18px;">二、JDAC</span></strong></strong></p>
<p style="text-align: left;"><strong><strong><span style="font-size: 18px;">　　</span></strong></strong><span style="font-size: 18px;"><span style="font-size: 15px;">Java 通过 Java 数据库连接（Java DataBase Connectivity,JDBC）API 来操作关系型数据库，但是 JDBC 是一个 非常底层的 API，我们需要书写大量的代码来完成对数据库的操作。</span></span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><span style="font-size: 15px;">　　　我先从最传统是JDBC代码写起再来对比引入MyBatis后两者的比较就会显而易见了。</span></span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><span style="font-size: 15px;">　　　第一步：创建数据库</span></span></p>
<p style="text-align: left;"><span style="font-size: 18px;"><span style="font-size: 15px;">　　　<img src="./images/MyBatis的配置与使用(增,删,改,查)0.png" alt="" /></span></span></p>
<p><span style="font-size: 18px;"><span style="font-size: 15px;">　　　第二步：Student实体类<br /></span></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.Date;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Student {
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> Integer stuid;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String name;
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String email;
</span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> Date dob;
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Integer getStuid() {
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> stuid;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setStuid(Integer stuid) {
</span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">this</span>.stuid =<span style="color: #000000;"> stuid;
</span><span style="color: #008080;">18</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getName() {
</span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> name;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setName(String name) {
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">this</span>.name =<span style="color: #000000;"> name;
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getEmail() {
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> email;
</span><span style="color: #008080;">30</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">31</span> 
<span style="color: #008080;">32</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setEmail(String email) {
</span><span style="color: #008080;">33</span>         <span style="color: #0000ff;">this</span>.email =<span style="color: #000000;"> email;
</span><span style="color: #008080;">34</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">35</span> 
<span style="color: #008080;">36</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Date getDob() {
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> dob;
</span><span style="color: #008080;">38</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">39</span> 
<span style="color: #008080;">40</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setDob(Date dob) {
</span><span style="color: #008080;">41</span>         <span style="color: #0000ff;">this</span>.dob =<span style="color: #000000;"> dob;
</span><span style="color: #008080;">42</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">43</span> 
<span style="color: #008080;">44</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">45</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {
</span><span style="color: #008080;">46</span>         <span style="color: #0000ff;">return</span> "Student{" +
<span style="color: #008080;">47</span>                 "stuid=" + stuid +
<span style="color: #008080;">48</span>                 ", name='" + name + '\'' +
<span style="color: #008080;">49</span>                 ", email='" + email + '\'' +
<span style="color: #008080;">50</span>                 ", dob=" + dob +
<span style="color: #008080;">51</span>                 '}'<span style="color: #000000;">;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">53</span> }</code></pre>

<p><span style="font-size: 18px;"><span style="font-size: 15px;"><span style="font-size: 18px;"><span style="font-size: 15px;">　　第三步:创建StudentMapper接口</span></span></span></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;

</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.SQLException;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> StudentDao {
    </span><span style="color: #008000;">//</span><span style="color: #008000;">方法</span>
    <span style="color: #0000ff;">public</span> Student findStudentByid(<span style="color: #0000ff;">int</span><span style="color: #000000;"> stuid) ;
}</span></code></pre>

<p>　　第四步：创建StudentMapperImpl实现类</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;

</span><span style="color: #0000ff;">import</span> java.sql.*<span style="color: #000000;">;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> StudentDaoImpl <span style="color: #0000ff;">implements</span><span style="color: #000000;"> StudentDao {

    @Override
    </span><span style="color: #0000ff;">public</span> Student findStudentByid(<span style="color: #0000ff;">int</span> stuid) <span style="color: #0000ff;">throws</span><span style="color: #000000;">  SQLException {
        Student student </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        Connection connection;

        </span><span style="color: #008000;">//</span><span style="color: #008000;">获取连接</span>
    String jdbcurl = "jdbc:mysql://localhost:3306/student2?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true"<span style="color: #000000;">;
    connection </span>=  DriverManager.getConnection(jdbcurl,"root","123456"<span style="color: #000000;">);

        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">加载驱动</span>
        Class.forName("com.mysql.cj.jdbc.Driver"<span style="color: #000000;">);
    } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (ClassNotFoundException e) {
        e.printStackTrace();
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">获取PreparedStatement</span>
    PreparedStatement  pst = connection.prepareStatement("select * from students where stuid=?"<span style="color: #000000;">);
            pst.setInt(</span>1<span style="color: #000000;">,stuid);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">查询获取结果</span>
    ResultSet rs =<span style="color: #000000;"> pst.executeQuery();
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 处理结果集</span>
            <span style="color: #0000ff;">if</span><span style="color: #000000;">(rs.next()){
        student </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Student();
        student.setStuid(rs.getInt(</span>"stuid"<span style="color: #000000;">));
        student.setName(rs.getString(</span>"name"<span style="color: #000000;">));
        student.setEmail(rs.getString(</span>"email"<span style="color: #000000;">));
        student.setDob(rs.getDate(</span>"dob"<span style="color: #000000;">));
    }
            rs.close();
            pst.close();
            connection.close();
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> student;
}</span></code></pre>

<p>&nbsp;　　获取数据：</p>
<p><img src="./images/MyBatis的配置与使用(增,删,改,查)1.png" alt="" /></p>
<p><span style="font-size: 16px;"><strong>&nbsp;JDBC缺点分析：</strong></span></p>
<p>上述的每个方法中有大量的重复代码：创建一个连接，创建一个 Statement 对象，设置输入参数，关闭资源（如 connection，statement，resultSet）。</p>
<p><img src="./images/MyBatis的配置与使用(增,删,改,查)2.png" alt="" width="749" height="579" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 14pt;"><strong>三、MyBatis</strong></span></p>
<p><span style="font-size: 18px;"><strong>　　我们现在使用MyBatis现实上面的代码：</strong></span></p>
<p><span style="font-size: 18px;"><strong>　　3.1 添加依赖（pom.xml）</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span>    &lt;dependency&gt;
<span style="color: #008080;">2</span>       &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
<span style="color: #008080;">3</span>       &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
<span style="color: #008080;">4</span>       &lt;version&gt;3.5.2&lt;/version&gt;
<span style="color: #008080;">5</span>     &lt;/dependency&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;"><strong>　　3.2 全局配置文件（config.xml&nbsp;）</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;?xml version="1.0" encoding="utf-8"?&gt;
<span style="color: #008080;"> 2</span> &lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
<span style="color: #008080;"> 3</span>         "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
<span style="color: #008080;"> 4</span> &lt;!--根标签--&gt;
<span style="color: #008080;"> 5</span> &lt;configuration&gt;
<span style="color: #008080;"> 6</span>     &lt;!-- 环境，可以配置多个，<span style="color: #0000ff;">default</span>：指定采用哪个环境 --&gt;
<span style="color: #008080;"> 7</span>     &lt;environments <span style="color: #0000ff;">default</span>="mycom"&gt;
<span style="color: #008080;"> 8</span>         &lt;!-- id：唯一标识 --&gt;
<span style="color: #008080;"> 9</span>         &lt;environment id="mycom"&gt;
<span style="color: #008080;">10</span>             &lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;
<span style="color: #008080;">11</span>             &lt;transactionManager type="JDBC"/&gt;
<span style="color: #008080;">12</span>             &lt;!-- 数据源，池类型的数据源 --&gt;
<span style="color: #008080;">13</span>             &lt;dataSource type="POOLED"&gt;
<span style="color: #008080;">14</span>                 &lt;property name="driver" value="com.mysql.cj.jdbc.Driver"/&gt;
<span style="color: #008080;">15</span>                 &lt;property name="url" value="jdbc:mysql://localhost:3306/student2?characterEncoding=utf8&amp;amp;useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;rewriteBatchedStatements=true"/&gt;
<span style="color: #008080;">16</span>                 &lt;property name="username" value="root"/&gt;
<span style="color: #008080;">17</span>                 &lt;property name="password" value="123456"/&gt;
<span style="color: #008080;">18</span>             &lt;/dataSource&gt;
<span style="color: #008080;">19</span>         &lt;/environment&gt;
<span style="color: #008080;">20</span>     &lt;/environments&gt;
<span style="color: #008080;">21</span>     &lt;mappers&gt;
<span style="color: #008080;">22</span>         &lt;mapper resource="StudentMapper.xml"&gt;&lt;/mapper&gt;
<span style="color: #008080;">23</span>     &lt;/mappers&gt;
<span style="color: #008080;">24</span> &lt;/configuration&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>　<span style="font-size: 18px;">3.3配置文件&nbsp;StudentMapper.xml&nbsp;（&nbsp;StudentMapper.xml&nbsp; ）</span></strong></p>
<p><span style="font-size: 18px;"><span style="font-size: 14px;">　　第一步：&nbsp;在 SQL Mapper 映射配置文件中配置 SQL 语句，假定为 StudentMapper.xml&nbsp;</span></span></p>
<p>　　<span style="font-size: 18px;"><strong>查询操作：</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">StudentMapper.xml</span>
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
<span class="token operator">&lt;<span class="token operator">!<span class="token operator">-- mapper<span class="token operator">:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 <span class="token operator">--<span class="token operator">&gt;</span></span></span></span></span></span>
&lt;mapper namespace="com.nf.StudentDao" &gt;<br />&lt;!--</code></pre>
<pre><code>column为java实体类的属性名   property为数据库属性名</code></pre>
<pre><code>--&gt;<br />
    &lt;resultMap id="myStudent" type="com.nf.Student"&gt;
        &lt;id column="stuid" property="stuid"&gt;&lt;/id&gt;
        &lt;result column="name" property="name"&gt;&lt;/result&gt;
        &lt;result column="email" property="email"&gt;&lt;/result&gt;
        &lt;result column="dob" property="dob"&gt;&lt;/result&gt;
    &lt;/resultMap&gt;<br />
    <span class="token operator">&lt;<span class="token operator">!<span class="token operator">-- statement，内容：sql语句。id：要与接口方法名相同，在同一个命名空间下保持唯一 resultType：parameter：需要返回的类型；sql语句查询结果集的封装类型<span class="token punctuation">,tb_user即为数据库中的表 <span class="token operator">--<span class="token operator">&gt;</span></span></span></span></span></span>
    <span style="color: #008000;">//</span><span style="color: #008000;">查询<br />　　　　　　</span>
    &lt;select id="findStudentByid"  parameterType="int"  resultMap="myStudent"&gt;<span style="color: #000000;">
        SELECT STUID AS stuId, NAME, EMAIL, DOB
         FROM students WHERE stuid</span>=<span style="color: #000000;">#{Id}
    </span>&lt;/select&gt;<br />&lt;/mapper&gt;
    
    </code></pre>

<p>&nbsp;<span style="font-size: 16px;"><strong>3.4 测试类</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Test2 {
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException {
</span><span style="color: #008080;"> 3</span>         SqlSessionFactory factory = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 5</span>             <span style="color: #008000;">//</span><span style="color: #008000;">指定全局配置的文件xml再读取配置文件
</span><span style="color: #008080;"> 6</span>            <span style="color: #008000;">//</span><span style="color: #008000;">（这里可以比喻成一个建筑图 工程师要建房子首先要先看图纸，我们现在把config.xml看做是一张图纸）</span>
<span style="color: #008080;"> 7</span>             InputStream inputStream= Resources.getResourceAsStream("config.xml"<span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 构建sqlSessionFactory（创建一个工厂）</span>
<span style="color: #008080;"> 9</span>             SqlSessionFactoryBuilder builder = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SqlSessionFactoryBuilder();
</span><span style="color: #008080;">10</span>             factory =<span style="color: #000000;"> builder.build(inputStream);
</span><span style="color: #008080;">11</span>             System.out.println("1.配置的config.xml"+<span style="color: #000000;">inputStream);
</span><span style="color: #008080;">12</span>             System.out.println("2.创建出一个工厂"+<span style="color: #000000;">factory);
</span><span style="color: #008080;">13</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
</span><span style="color: #008080;">14</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">15</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">16</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 获取sqlSession（打开工厂）</span>
<span style="color: #008080;">17</span>         SqlSession sqlSession =<span style="color: #000000;"> factory.openSession();
</span><span style="color: #008080;">18</span>         System.out.println("3.session"+<span style="color: #000000;">sqlSession);
</span><span style="color: #008080;">19</span>         <span style="color: #008000;">//</span><span style="color: #008000;">StudentMapper层（将东西放进工厂生产）                   </span>
<span style="color: #008080;">20</span>         StudentDao studentDao = sqlSession.getMapper(StudentDao.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">21</span>         System.out.println("4.获得实现类的实例："+<span style="color: #000000;">studentDao);
</span><span style="color: #008080;">22</span>         Student student = studentDao.findStudentByid(1<span style="color: #000000;">);
</span><span style="color: #008080;">23</span> <span style="color: #000000;">        System.out.println(student);
</span><span style="color: #008080;">24</span>         
<span style="color: #008080;">25</span> <span style="color: #000000;">        sqlSession.close();
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span> }</code></pre>

<p><img src="./images/MyBatis的配置与使用(增,删,改,查)3.png" alt="" /></p>
<p>　<strong><span style="font-size: 18px;">　删除操作：</span></strong></p>
<p><strong><span style="font-size: 18px;">　　</span><span style="font-size: 15px;">第一步：接口写入一个方法（findStudenrdelete()）:</span></strong></p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;

</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.SQLException;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> StudentDao {
</span><span style="color: #008000;">//</span><span style="color: #008000;">    查询</span>
    <span style="color: #0000ff;">public</span> Student findStudentByid(<span style="color: #0000ff;">int</span> stuid) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException;
</span><span style="color: #008000;">//</span><span style="color: #008000;">    删除</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span> findStudentdelete(<span style="color: #0000ff;">int</span><span style="color: #000000;"> stuid);
    </span></code></pre>

<p>&nbsp;</p>
<p><strong><span style="font-size: 18px;">　　</span><span style="font-size: 15px;">第二步：&nbsp;配置文件&nbsp;StudentMapper.xml&nbsp;</span></strong></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<span style="color: #008080;"> 2</span> &lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> &lt;mapper namespace="com.nf.StudentDao" &gt;
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     &lt;resultMap id="myStudent" type="com.nf.Student"&gt;
<span style="color: #008080;"> 8</span>         &lt;id column="stuid" property="stuid"&gt;&lt;/id&gt;
<span style="color: #008080;"> 9</span>         &lt;result column="name" property="name"&gt;&lt;/result&gt;
<span style="color: #008080;">10</span>         &lt;result column="email" property="email"&gt;&lt;/result&gt;
<span style="color: #008080;">11</span>         &lt;result column="dob" property="dob"&gt;&lt;/result&gt;
<span style="color: #008080;">12</span>     &lt;/resultMap&gt;
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> 　　//查询
<span style="color: #008080;">15</span>     &lt;select id="findStudentByid"  parameterType="int"  resultMap="myStudent"&gt;
<span style="color: #008080;">16</span> <span style="color: #000000;">        SELECT STUID AS stuId, NAME, EMAIL, DOB
</span><span style="color: #008080;">17</span>          FROM students WHERE stuid=<span style="color: #000000;">#{Id}
</span><span style="color: #008080;">18</span>     &lt;/select&gt;
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> 　　//删除     id：与接口的方法名要一致             Student的实体类
<span style="color: #008080;">21</span>     &lt;delete id="findStudentdelete" parameterType="com.nf.Student"&gt;
<span style="color: #008080;">22</span>         　　DELETE FROM students WHERE stuid=<span style="color: #000000;">#{Id}
</span><span style="color: #008080;">23</span>     &lt;/delete&gt;<br />
<span style="color: #008080;">24</span> &lt;mapper&gt;</code></pre>

<p>&nbsp;</p>
<p><strong><span style="font-size: 15px;">&nbsp;　　第三步：测试类（Testdelete.java）</span></strong></p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSession;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSessionFactory;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.io.Resources;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #008000;">//</span><span style="color: #008000;">删除</span>
<span style="color: #008080;">13</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Test4 {
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;">15</span>         SqlSessionFactory factory = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">17</span>             InputStream inputStream = Resources.getResourceAsStream("config.xml"<span style="color: #000000;">);
</span><span style="color: #008080;">18</span>             SqlSessionFactoryBuilder builder = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SqlSessionFactoryBuilder();
</span><span style="color: #008080;">19</span>             factory =<span style="color: #000000;"> builder.build(inputStream);
</span><span style="color: #008080;">20</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
</span><span style="color: #008080;">21</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">23</span>         SqlSession sqlSession =<span style="color: #000000;"> factory.openSession();
</span><span style="color: #008080;">24</span>         StudentDao studentDao = sqlSession.getMapper(StudentDao.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">25</span>         
<span style="color: #008080;">26</span>         <span style="color: #0000ff;">boolean</span> ok = studentDao.findStudentdelete(1);<span style="color: #008000;">//</span><span style="color: #008000;">点接口方法名</span>
<span style="color: #008080;">27</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(ok){
</span><span style="color: #008080;">28</span>             System.out.println("删除成功"<span style="color: #000000;">);
</span><span style="color: #008080;">29</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">30</span>             System.out.println("删除失败"<span style="color: #000000;">);
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">        sqlSession.commit();
</span><span style="color: #008080;">33</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">34</span> }</code></pre>

<p>&nbsp;</p>
<p>　<span style="font-size: 18px;"><strong>　添加操作：</strong></span></p>
<p><span style="font-size: 18px;"><strong>　　<span style="font-size: 15px;">第一步：<strong>接口写入一个方法（findStudenrdelete()）:</strong></span></strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;

</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.SQLException;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> StudentDao {
</span><span style="color: #008000;">//</span><span style="color: #008000;">    查询</span>
    <span style="color: #0000ff;">public</span> Student findStudentByid(<span style="color: #0000ff;">int</span> stuid) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException;
</span><span style="color: #008000;">//</span><span style="color: #008000;">    删除</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span> findStudentdelete(<span style="color: #0000ff;">int</span><span style="color: #000000;"> stuid);
</span><span style="color: #008000;">//</span><span style="color: #008000;">    添加</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> findStudentInsert(Student student);

}</span></code></pre>

<p>&nbsp;</p>
<p><span style="font-size: 18px;"><strong><span style="font-size: 15px;"><strong>　　 第二步：<strong>第二步：&nbsp;配置文件&nbsp;StudentMapper.xml&nbsp;</strong><br /></strong></span></strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<span style="color: #008080;"> 2</span> &lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> &lt;mapper namespace="com.nf.StudentDao" &gt;
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     &lt;resultMap id="myStudent" type="com.nf.Student"&gt;
<span style="color: #008080;"> 8</span>         &lt;id column="stuid" property="stuid"&gt;&lt;/id&gt;
<span style="color: #008080;"> 9</span>         &lt;result column="name" property="name"&gt;&lt;/result&gt;
<span style="color: #008080;">10</span>         &lt;result column="email" property="email"&gt;&lt;/result&gt;
<span style="color: #008080;">11</span>         &lt;result column="dob" property="dob"&gt;&lt;/result&gt;
<span style="color: #008080;">12</span>     &lt;/resultMap&gt;
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>     &lt;select id="findStudentByid"  parameterType="int"  resultMap="myStudent"&gt;
<span style="color: #008080;">16</span> <span style="color: #000000;">        SELECT STUID AS stuId, NAME, EMAIL, DOB
</span><span style="color: #008080;">17</span>          FROM students WHERE stuid=<span style="color: #000000;">#{Id}
</span><span style="color: #008080;">18</span>     &lt;/select&gt;
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span>     &lt;delete id="findStudentdelete" parameterType="com.nf.Student"&gt;
<span style="color: #008080;">22</span>         delete  from students where stuid=<span style="color: #000000;">#{Id}
</span><span style="color: #008080;">23</span>     &lt;/delete&gt;
<span style="color: #008080;">24</span> //添加
<span style="color: #008080;">25</span>     &lt;insert id="findStudentInsert parameterType="com.nf.Student"  "&gt;
<span style="color: #008080;">26</span> <span style="color: #000000;">        INSERT INTO students(name,email,dob) value(#{name},#{email},#{dob})
</span><span style="color: #008080;">27</span>     &lt;/insert&gt;
<span style="color: #008080;">28</span> &lt;mapper&gt;</code></pre>

<p><span style="font-size: 18px;"><strong><span style="font-size: 15px;"><strong><strong>　　 第三步：<strong>测试类（TestInsert.java）</strong></strong></strong></span></strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.nf;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.io.Resources;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSession;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSessionFactory;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span><span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.Date;
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.SQLException;
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.text.ParseException;
</span><span style="color: #008080;">13</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.text.SimpleDateFormat;
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #008000;">//</span><span style="color: #008000;">添加</span>
<span style="color: #008080;">16</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Test3 {
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException {
</span><span style="color: #008080;">18</span>         SqlSessionFactory factory = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">20</span>             InputStream inputStream = Resources.getResourceAsStream("config.xml"<span style="color: #000000;">);
</span><span style="color: #008080;">21</span>             SqlSessionFactoryBuilder builder = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SqlSessionFactoryBuilder();
</span><span style="color: #008080;">22</span>             factory =<span style="color: #000000;"> builder.build(inputStream);
</span><span style="color: #008080;">23</span>             System.out.println("配置xml"+<span style="color: #000000;">inputStream);
</span><span style="color: #008080;">24</span>             System.out.println("创建出一个工厂"+<span style="color: #000000;">factory);
</span><span style="color: #008080;">25</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
</span><span style="color: #008080;">26</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">27</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">28</span>         SqlSession sqlSession =<span style="color: #000000;"> factory.openSession();
</span><span style="color: #008080;">29</span>         StudentDao studentDao = sqlSession.getMapper(StudentDao.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">30</span>         Student student = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Student();
</span><span style="color: #008080;">31</span>         <span style="color: #008000;">//</span><span style="color: #008000;">student.setStuid(4);</span>
<span style="color: #008080;">32</span>         student.setName("小华"<span style="color: #000000;">);
</span><span style="color: #008080;">33</span>         student.setEmail("1084522@qq.com"<span style="color: #000000;">);
</span><span style="color: #008080;">34</span> <span style="color: #008000;">//</span><span style="color: #008000;">        日期转类型</span>
<span style="color: #008080;">35</span>         SimpleDateFormat simpleDateFormat = <span style="color: #0000ff;">new</span> SimpleDateFormat("yyyy-MM-dd"<span style="color: #000000;">);
</span><span style="color: #008080;">36</span>         java.util.Date  date = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">38</span>             date= simpleDateFormat.parse("2055-6-2"<span style="color: #000000;">);
</span><span style="color: #008080;">39</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (ParseException e) {
</span><span style="color: #008080;">40</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">41</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">42</span>         <span style="color: #008000;">//</span><span style="color: #008000;">new java.sql.Date(date.getTime());</span>
<span style="color: #008080;">43</span>         student.setDob( <span style="color: #0000ff;">new</span><span style="color: #000000;"> java.sql.Date(date.getTime()));
</span><span style="color: #008080;">44</span>         <span style="color: #008000;">//</span><span style="color: #008000;">不严谨
</span><span style="color: #008080;">45</span>         <span style="color: #008000;">//</span><span style="color: #008000;">student.setDob(Date.valueOf("2055-6-2"));</span>
<span style="color: #008080;">46</span>         <span style="color: #0000ff;">boolean</span> ok =<span style="color: #000000;">studentDao.findStudentInsert(student);
</span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(ok){
</span><span style="color: #008080;">48</span>             System.out.println("添加成功"<span style="color: #000000;">);
</span><span style="color: #008080;">49</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">50</span>             System.out.println("添加失败"<span style="color: #000000;">);
</span><span style="color: #008080;">51</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">52</span> <span style="color: #000000;">        studentDao.findStudentInsert(student);
</span><span style="color: #008080;">53</span> 
<span style="color: #008080;">54</span> <span style="color: #000000;">        sqlSession.commit();
</span><span style="color: #008080;">55</span> <span style="color: #000000;">        System.out.println(student.getStuid());
</span><span style="color: #008080;">56</span> <span style="color: #000000;">        sqlSession.close();
</span><span style="color: #008080;">57</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">58</span> }</code></pre>

<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>