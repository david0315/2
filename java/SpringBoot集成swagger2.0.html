<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修SpringBoot集成swagger2.0' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>SpringBoot集成swagger2.0</center></div><div class='banquan'>原文出处:本文由博客园博主苏景辰提供。<br/>
原文连接:https://www.cnblogs.com/gzhlove/p/12058142.html</div><br>
    <p>最近项目里要用到SpringBoot + swagger，查了其他小伙伴们的资料，或多或少有点问题，在此我再梳理一遍。</p><h1>1、maven依赖</h1><pre><code>&lt;parent&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;<br>    &lt;version&gt;2.1.10.RELEASE&lt;/version&gt;<br>    &lt;relativePath/&gt;<br>&lt;/parent&gt;<br><br>&lt;dependencies&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;<br>        &lt;artifactId&gt;fastjson&lt;/artifactId&gt;<br>        &lt;version&gt;1.2.62&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;com.ctrip.framework.apollo&lt;/groupId&gt;<br>        &lt;artifactId&gt;apollo-client&lt;/artifactId&gt;<br>        &lt;version&gt;1.4.0&lt;/version&gt;<br>        &lt;exclusions&gt;<br>            &lt;exclusion&gt;<br>                &lt;artifactId&gt;guava&lt;/artifactId&gt;<br>                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;<br>            &lt;/exclusion&gt;<br>        &lt;/exclusions&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>        &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;<br>        &lt;artifactId&gt;lombok&lt;/artifactId&gt;<br>        &lt;version&gt;1.16.20&lt;/version&gt;<br>        &lt;scope&gt;provided&lt;/scope&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;<br>        &lt;artifactId&gt;guava&lt;/artifactId&gt;<br>        &lt;version&gt;23.0&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;<br>        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;<br>        &lt;version&gt;3.9&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;commons-codec&lt;/groupId&gt;<br>        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;<br>        &lt;version&gt;1.13&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;<br>        &lt;artifactId&gt;commons-text&lt;/artifactId&gt;<br>        &lt;version&gt;1.8&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;<br>        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;<br>        &lt;version&gt;4.5.10&lt;/version&gt;<br>        &lt;exclusions&gt;<br>            &lt;exclusion&gt;<br>                &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;<br>                &lt;groupId&gt;commons-codec&lt;/groupId&gt;<br>            &lt;/exclusion&gt;<br>        &lt;/exclusions&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;mysql&lt;/groupId&gt;<br>        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;commons-collections&lt;/groupId&gt;<br>        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;<br>        &lt;version&gt;3.2.2&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;<br>        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;<br>        &lt;version&gt;1.3.2&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;<br>        &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;<br>        &lt;version&gt;2.4.0&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    <font color="#9b00d3">&lt;!-- swagger --&gt;<br>    &lt;dependency&gt;<br>        &lt;groupId&gt;io.springfox&lt;/groupId&gt;<br>        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;<br>        &lt;version&gt;2.9.2&lt;/version&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;io.springfox&lt;/groupId&gt;<br>        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;<br>        &lt;version&gt;2.9.2&lt;/version&gt;<br>    &lt;/dependency&gt;<br></font><br>    &lt;!-- mock dependency --&gt;<br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.powermock&lt;/groupId&gt;<br>        &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;<br>        &lt;version&gt;2.0.4&lt;/version&gt;<br>        &lt;scope&gt;test&lt;/scope&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.powermock&lt;/groupId&gt;<br>        &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;<br>        &lt;version&gt;2.0.4&lt;/version&gt;<br>        &lt;scope&gt;test&lt;/scope&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.springframework&lt;/groupId&gt;<br>        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;<br>        &lt;scope&gt;test&lt;/scope&gt;<br>    &lt;/dependency&gt;<br><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;<br>        &lt;artifactId&gt;mybatis-spring-boot-starter-test&lt;/artifactId&gt;<br>        &lt;version&gt;1.3.2&lt;/version&gt;<br>        &lt;scope&gt;test&lt;/scope&gt;<br>    &lt;/dependency&gt;<br>&lt;/dependencies&gt;</code></pre><pre><code><br></code></pre><h1>2、配置swagger，让swagger加载起来</h1><pre><code>@Configuration<br>@EnableSwagger2</code></pre><pre><code>//配置在哪些环境启用swagger，好用。一般情况下在生产环境，用禁用swagger的。对应pom.xml中的 profiles配置</code></pre><pre><code><br><font color="#9b00d3">@Profile({"dev","fat","uat","pro"})</font><br>public class SwaggerConfig extends WebMvcConfigurationSupport{<br><br>    @Bean<br>    public Docket createRestApi () {<br>        return new Docket(DocumentationType.SWAGGER_2)<br>                .groupName("xxxx")<br>                .select()<br>                .apis(RequestHandlerSelectors.basePackage("com.yunda.data.controller"))<br>                .paths(PathSelectors.any())<br>                .build().apiInfo(getApiInfo());<br>    }<br><br>    private ApiInfo getApiInfo(){<br>        return new ApiInfoBuilder()<br>                .title("dsync-dispatcher api")<br>                .description("xxxx api")<br>                .version("1.0.0")<br>                .contact(new Contact("suyujun", "", "suyujun0131@yundasys.com"))<br>                .build();<br>    }<br><br><br>    <font color="#9b00d3">@Override<br>    public void addResourceHandlers(ResourceHandlerRegistry registry) {</font></code></pre><pre><code><font color="#9b00d3">//这些配置要有，我遇到了如果不配置，swagger一直是 404的问题<br>        registry.addResourceHandler("/**").addResourceLocations("classpath:/static/");<br>        // 解决 SWAGGER 404报错<br>        registry.addResourceHandler("/swagger-ui.html").addResourceLocations("classpath:/META-INF/resources/");<br>        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");<br>    }</font></code></pre><pre><code><font color="#9b00d3"><br></font></code></pre><h1>3.springboot启动主类</h1><pre><code>@SpringBootApplication<br>@EnableApolloConfig<br>@EnableRabbit<br>@ImportResource<br>@MapperScan(basePackages = {"xxxx.xxxx.xxxx"})<br>public class DsyncDispatcherApplication extends WebMvcConfigurationSupport {<br>    private static final Logger LOGGER = LoggerFactory.getLogger(DsyncDispatcherApplication.class);<br><br>    public static void main(String[] args) {<br>        ApplicationContext applicationContext = SpringApplication.run(DsyncDispatcherApplication.class, args);<br>        ApplicationContextUtils.setApplicationContext(applicationContext);<br>    }<br>}</code></pre><pre><code><br></code></pre><h1>4.看看效果吧</h1><p><a href="https://img2018.cnblogs.com/blog/1861372/201912/1861372-20191218092800289-2111546792.png"><img width="700" height="219" title="image" style="display: inline; background-image: none;" alt="image" src="./images/SpringBoot集成swagger2.00.png" border="0"></a></p><pre><code><br></code></pre><pre><code><a href="https://img2018.cnblogs.com/blog/1861372/201912/1861372-20191218092800878-1739125062.png"><img width="700" height="372" title="image" style="display: inline; background-image: none;" alt="image" src="./images/SpringBoot集成swagger2.01.png" border="0"></a></code></pre>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>