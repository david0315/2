<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Docker的安装与使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Docker的安装与使用</center></div><div class='banquan'>原文出处:本文由博客园博主十五小哥哥提供。<br/>
原文连接:https://www.cnblogs.com/wanghj-15/p/11451012.html</div><br>
    <p><span style="font-size: 14pt;"><strong>Docker的安装</strong></span></p>
<p><span style="font-size: 16px;"><strong>（1）卸载老版本</strong></span><br />yum remove docker \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-client \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-client-latest \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-common \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-latest \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-latest-logrotate \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-logrotate \<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docker-engine<br /><span style="font-size: 16px;"><strong>（2）安装yum仓库</strong></span><br />&nbsp;&nbsp; &nbsp;安装需要的工具<br />&nbsp;&nbsp; &nbsp;yum install -y yum-utils device-mapper-persistent-data lvm2<br />&nbsp;&nbsp; &nbsp;设置yum仓库的地址<br />&nbsp;&nbsp; &nbsp;yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br />&nbsp;&nbsp; &nbsp;更新yum缓存<br />&nbsp;&nbsp; &nbsp;yum makecache fast<br /><span style="font-size: 16px;"><strong>（3）安装docker</strong></span><br />yum install docker-ce docker-ce-cli containerd.io<br /><span style="font-size: 16px;"><strong>（4）启动docker</strong></span><br />systemctl start docker<br /><span style="font-size: 16px;"><strong>（5）hello world</strong></span><br />docker run hello-world<br /><br /><br /><span style="font-size: 14pt;"><strong>镜像操作</strong></span><br /><span style="font-size: 16px;"><strong>（1）配置镜像仓库</strong></span><br />&nbsp;&nbsp; &nbsp;/etc/docker/deamon.json<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"]<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;systemctm restart docker<br /><span style="font-size: 16px;"><strong>（2）查看网络中的镜像</strong></span><br />&nbsp;&nbsp; &nbsp;docker search 镜像名称<br /><span style="font-size: 16px;"><strong>（3）拉取镜像</strong></span><br />&nbsp;&nbsp; &nbsp;docker pull 镜像名称:Tag<br />&nbsp;&nbsp; &nbsp;如果没有写tag，则拉取最新版本<br /><span style="font-size: 16px;"><strong>（4）查看本地镜像</strong></span><br />&nbsp;&nbsp; &nbsp;docker images<br /><span style="font-size: 16px;"><strong>（5）删除镜像</strong></span><br />&nbsp;&nbsp; &nbsp;docker rmi 镜像ID<br /><br /><br /><br /><span style="font-size: 14pt;"><strong>容器操作</strong></span><br />&nbsp;&nbsp; &nbsp;<span style="font-size: 16px;"><strong>（1）查看容器</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;查看正在运行的容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker ps<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;查看所有容器（包含已经停止的）<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker ps -a<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;查看最有一次运行的容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker ps -l<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;查看已经停止的容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;doker ps -f status=exited<br /><br />&nbsp;&nbsp; <span style="font-size: 16px;"><strong>&nbsp;（2）创建容器</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-i 运行容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-t 交互式<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-d 守护式<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-v 目录映射<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;-p 端口映射<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;--name 设置容器名称<br /><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;创建交互式容器（exit后会关闭容器）<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker -it --name=容器名称 镜像名称:TAG /bin/bash<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;创建守护式容器(exit后不会关闭)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker -id --name=容器名称 镜像名称:TAG<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;进入容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker exec -it 容器名称 /bin/bash<br />&nbsp;&nbsp; &nbsp;<span style="font-size: 16px;"><strong>（3）启动与停止</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;启动容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker start 容器名称/容器ID<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;停止容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker stop 容器名称/容器ID<br />&nbsp;&nbsp; &nbsp;<span style="font-size: 16px;"><strong>（4）文件的拷贝</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;拷贝宿主机的文件到容器内<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker cp 文件名 容器名:文件路径<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;拷贝容器内的文件到宿主机<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker cp&nbsp; 容器名:文件名 文件路径<br />&nbsp;&nbsp; &nbsp;<span style="font-size: 16px;"><strong>（5）删除容器</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker rm 容器的ID/容器名<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;注意：运行的容器不能删除<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker rm `docker ps -a -q`&nbsp; 删除所有容器<br />&nbsp;&nbsp; &nbsp;<span style="font-size: 16px;"><strong>（6）容器的后台运行</strong></span><br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;进入容器后 ctrl+p+q<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;再次进入后台运行的容器&nbsp; docker attach 容器ID<br /><span style="font-size: 14pt;"><strong>部署：</strong></span><br /><span style="font-size: 16px;"><strong>（1）部署mysql</strong></span><br />&nbsp;&nbsp; &nbsp;拉取mysql镜像 docker pull mysql:5.7<br />&nbsp;&nbsp; &nbsp;基于镜像启动容器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;docker run -id --name=xxx -p 33306:3306 -e MYSQL_ROOT_PASSWORD=1223456 mysql:5.7<br />&nbsp;&nbsp; &nbsp;远程连接mysql<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;宿主机ip:33306<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;如果有问题，表示没有开启mysql远程连接权限<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;grant all....<br /><span style="font-size: 16px;"><strong>（2）部署nginx</strong></span><br />&nbsp;&nbsp; &nbsp;拉取nginx镜像<br />&nbsp;&nbsp; &nbsp;创建容器&nbsp; -p 80:80<br /><br />&nbsp;&nbsp; &nbsp;静态资源服务器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;html:&nbsp;&nbsp;&nbsp; /usr/share/nginx/html<br />&nbsp;&nbsp; &nbsp;负载均衡服务器<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;/etc/nginx/conf.d/default.conf<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;重新加载配置文件<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;nginx -t<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;nginx -s reload<br /><br /><br /><br /></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>