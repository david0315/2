<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修线程的上下文切换' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>线程的上下文切换</center></div><div class='banquan'>原文出处:本文由博客园博主MrHH提供。<br/>
原文连接:https://www.cnblogs.com/HuiH/p/11729015.html</div><br>
    <p>　　<span style="font-size: 15px;">利用时间片轮转的方式，CPU给每个任务都服务一定的时间，然后把当前任务的状态保存下来，在加载下一个任务后，继续服务下一个任务，这个过程叫做<span style="color: #ff0000;"><strong>上下文切换</strong></span>。</span></p>
<p><span style="font-size: 15px;">　　时间片轮转的方式使得多个任务在同一颗CPU上执行变成可能。</span></p>
<p>&nbsp;　　<img src="./images/线程的上下文切换0.png" alt="" width="647" height="180" /></p>
<p>　　<strong>1、进程</strong>（有时也称为任务）是指一个程序运行的实例。在Linux系统中，线程就是能并行运行并且与它们父进程（创建它们的进程）共享同一地址空间（一段内存区域）和其他资源的轻量级的进程。</p>
<p>　　<strong>2、上下文：</strong>指某一时间点CPU寄存器和程序计数器的内容。</p>
<p>　<strong>　3、寄存器：</strong>是CPU内部的数量较少但是速度很快的内存（与之对应的是CPU外部相对较慢的RAM主内存）。寄存器通过对常用值（通常是运算的中间值）的快速访问来提高计算机程序运行的速度。</p>
<p>　　<strong>4.程序计数器：</strong>是一个专用的寄存器，用于表明指令序列中CPU正在执行的位置，存的值为正在执行的指令的位置或下一个将要被执行的指令的位置，具体依赖特定的系统。</p>
<p>　<strong>　5.PCB-&ldquo;切换桢&rdquo;：</strong>上下文切换可以认为是内核（操作系统的核心）在CPU上对于进程（包括线程）进行切换，上下文切换过程中的信息是保存在进程控制块中的。PCB还经常被称作&ldquo;切换桢&rdquo;。信息会一直保存到CPU的内存中，直到它们被再次使用。</p>
<p>　<strong>　6.上下文切换的活动</strong></p>
<p>　　　　1）挂起一个进程，将这个进程在CPU中的状态（上下文）存储于内存中的某处。</p>
<p>　　　　2）在内存中检索下一个进城的上下文并将其在CPU的寄存器中恢复。</p>
<p>　　　　3）跳转到程序计数器所指向的位置（即跳转到进程被中断时的代码行），已恢复在程序中的该进程。</p>
<p>　<strong>　7.引起线程上下文切换的原因</strong></p>
<p>　　　　1）当前执行任务的时间片用完之后，系统CPU正常调度下一个任务；</p>
<p>　　　　2）当前执行任务碰到IO阻塞，调度器将此任务挂起，继续下一任务；</p>
<p>　　　　3）多个任务抢占锁资源，当前任务没有抢到锁资源，被调度器挂起，继续下一个任务；</p>
<p>　　　　4）用户代码挂起当前任务，让出CPU时间；</p>
<p>　　　　5）硬件中断；</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>