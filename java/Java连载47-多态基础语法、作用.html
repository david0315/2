<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Java连载47-多态基础语法、作用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Java连载47-多态基础语法、作用</center></div><div class='banquan'>原文出处:本文由博客园博主心悦君兮君不知-睿提供。<br/>
原文连接:https://www.cnblogs.com/ruigege0000/p/11783700.html</div><br>
    <p>一、多态的语法</p>
<p>1.两个类之间没有继承关系的，使用多态是不能编译的。</p>
<p>2.无论向上还是向上转型，都需要有继承关系。</p>
<p>3.什么时候需要向下转型？</p>
<p>当调用的方法或者属性是子类型特有的，在父类型中不存在，就需要向下转型。</p>
<p>4.著名异常：java.lang.ClassCastException</p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.bjpowernode.java_learning;

​

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> D47_ {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {

    Animal46 a3 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Cat46();

    </span><span style="color: #008000;">//</span><span style="color: #008000;">a3.catchMouse();</span><span style="color: #008000;">//</span><span style="color: #008000;">这里使用的方法在Animal46中不存在，但是在Cat46中存在，所以需要强制类型转换</span>
<span style="color: #000000;">
    Cat46 c4 </span>=<span style="color: #000000;"> (Cat46)a3;

   

    Animal46 a5 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Bird46();

    </span><span style="color: #008000;">/**</span><span style="color: #008000;">Cat46 c5 = (Cat46)a5;

    *

     * 上面这个程序编译是没有问题的，因为编译器检查到a5的数据类型是Animal46,Animal46和Cat46之间是存在

     * 继承关系的，并且Animal46是父类型，Cat46是子类型，父类型转换为子类型叫做向下转换类型，语法是合法的，

     * 程序虽然编译通过了，到那时程序在运行阶段会出现异常，因为JVM堆内存中真是存在的对象是Bird类型，Bird

     * 对象是无法转换为Cat对象的，因为两种类型之间不存在任何继承关系此时就会出现著名的异常:

     * java.lang.ClassCastException

     * 类型转换异常，这种异常总是在&ldquo;向下转型&rdquo;的时候会发生。

     *可以修改为:

     *if（a5 instanceof Cat46）{

     *  Cat46 c5 = (Cat46) a5;}

     *else if(a3 instanceof Bird46){

     *  Bird46 b5 = (Bird46) a5;}

     </span><span style="color: #008000;">*/</span><span style="color: #000000;">

   

   

  }

}

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Animal46{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> move() {

    System.out.println(</span>"动物们再行走"<span style="color: #000000;">);

  }

 

}

</span><span style="color: #0000ff;">class</span> Cat46 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Animal46{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> move() {

    System.out.println(</span>"小猫在行走"<span style="color: #000000;">);

  }</span><span style="color: #008000;">//</span><span style="color: #008000;">重写函数

  </span><span style="color: #008000;">//</span><span style="color: #008000;">下面是小猫类特有的函数</span>

  <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> catchMouse() {

    System.out.println(</span>"小猫是会抓老鼠的"<span style="color: #000000;">);

  }

}

</span><span style="color: #0000ff;">class</span> Bird46 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Animal46{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> move() {

    System.out.println(</span>"小鸟在飞翔"<span style="color: #000000;">);

  }

}</span></code></pre>

<p>&nbsp;</p>
<p>注意：</p>
<p>（1）以上异常只有在强制类型转换的时候才会出现，也就是说&ldquo;向下转型&rdquo;存在隐患（编译通过了，到那时运行出错了）</p>
<p>（2）向上转型，只要编译通过了，运行一定不会出错.Animal46 a1 = new Cat46()</p>
<p>（3）向下转型，运行可能会出错，：Animal46 a1 = new Cat45();Bird46 b1 = (Bird46)a1;</p>
<p>5.如何避免向下转型出现的ClassCastException呢？</p>
<p>使用instanceof运算符可以避免出项上述情况，怎么用呢？</p>
<p>（1）格式：这个后面的数据类型是它在堆内存中的实际存储的数据类型。</p>
<p>（引用&nbsp; instanceof 数据类型名）</p>
<p>（2）以上运算符的执行结果是布尔类型，结果可能是true/false</p>
<p>（3）关于运算结果true/false</p>
<p>假设：（a instanceof Animal）</p>
<p>true表示：a这个引用指向的对象是一个Animal类型</p>
<p>false表示：a这个引用指向的对象不是一个Animal类型</p>
<p>6.java规范中要求：在进行强制类型转换之前，建议采用instanceof运算符进行判断，避免ClassCastException异常的发生。</p>
<p>二、代码调试</p>
<p>&nbsp;</p>
<p> <img src="./images/Java连载47-多态基础语法、作用0.png" alt="" /><br clear="ALL" />
</p>
<p>快捷键：</p>
<p>F5：进入到该程序中</p>
<p>F6：下一步</p>
<p>F7：当前方法结束</p>
<p>F8：执行下一个断点</p>
<p>
  
  
 <img src="./images/Java连载47-多态基础语法、作用1.png" alt="" /><br clear="ALL" />
</p>
<p>四、多态的作用</p>
<p>1.多态在实际开发的作用，以下以主人喂养宠物为例说明多态的作用：</p>
<p>（1）分析：主人喂养宠物这个场景要实现需要进行类型的抽象：</p>
<p>主人（类）</p>
<p>主人可以喂养宠物，所以主人有喂养的这个动作</p>
<p>宠物（类）</p>
<p>宠物可以吃东西，所以宠物有吃东西的这个动作</p>
<p>（2）面向对象编程的核心：定义好类，然后将类实例化为一个对象，给一个环境驱使一下，让各个对象之间协作起来形成一个系统</p>
<p>（3）多态的作用</p>
<p>先举个不使用多态的例子</p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.bjpowernode.java_learning;

​

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> D47_2_EffectOfPolymorphic {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {

    Master47 m1 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Master47();

    Cat47 c1 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Cat47();

    m1.feed(c1);

    Dog47 d1 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Dog47();

    m1.feed(d1);

   

  }

​

}

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Cat47{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {

    System.out.println(</span>"小猫爱吃鱼"<span style="color: #000000;">);

  }

}

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Dog47{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {

    System.out.println(</span>"小狗爱吃骨头"<span style="color: #000000;">);

  }

}

​

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Master47{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> feed(Cat47 c) {

    c.eat();

  }

  </span><span style="color: #008000;">//</span><span style="color: #008000;">函数重载一下，要是养小狗也得调用</span>

  <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> feed(Dog47 d) {

    d.eat();

  }

}</span></code></pre>

<p>&nbsp;</p>
<p><img src="./images/Java连载47-多态基础语法、作用2.png" alt="" /></p>
<p>从上面的例子可以看出来：这种方式没有使用java语言中的多态机制，存在的缺点：Master47的扩展力很差，因为只要加一个新的宠物，Maset47这个类就要添加新的方法。</p>
<p>我们补充几个概念：</p>
<p>提高程序的耦合度（解耦合），提高程序的扩展力（软件开发的一个很重要的目标）</p>
<p>我们日v行：面向抽象编程不要面向具体过程编程，面向抽象编程的好处是：耦合度低，扩展能力强。</p>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.bjpowernode.java_learning;

​

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> D47_3_PolymorphicExample {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {

    Pet pDog </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Dog47_2();

    Pet pCat </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Cat47_2();

    Master47_2 m2 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Master47_2();

    m2.feed(pDog);

    m2.feed(pCat);

    </span><span style="color: #008000;">//</span><span style="color: #008000;">我们利用多态就可以做到随便养宠物，将宠物作为父类</span>
<span style="color: #000000;">
  }

​

}

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Pet {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {  }

}

</span><span style="color: #0000ff;">class</span> Cat47_2 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Pet {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {

    System.out.println(</span>"小猫还在吃鱼"<span style="color: #000000;">);

  }

}

</span><span style="color: #0000ff;">class</span> Dog47_2 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Pet {

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {

    System.out.println(</span>"小狗还在吃骨头"<span style="color: #000000;">);

  }

}

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Master47_2{

  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> feed(Pet p) {

    p.eat();

  }

}</span></code></pre>

<p><img src="./images/Java连载47-多态基础语法、作用3.png" alt="" /></p>
<p>五、源码：</p>
<p>D47_1_polymorphic.java</p>
<p>D47_2_EffectOfPolymorphic.java</p>
<p>D47_3_PolymorphicExample.java</p>
<p>地址：</p>
<p>https://github.com/ruigege66/Java/blob/master/D47_1_polymorphic.java</p>
<p>https://github.com/ruigege66/Java/blob/master/D47_2_EffectOfPolymorphic.java</p>
<p>https://github.com/ruigege66/Java/blob/master/D47_3_PolymorphicExample.java</p>
<p>2.CSDN：https://blog.csdn.net/weixin_44630050（心悦君兮君不知-睿）</p>
<p>3.博客园：https://www.cnblogs.com/ruigege0000/</p>
<p>4.欢迎关注微信公众号：傅里叶变换，个人公众号，仅用于学习交流，后台回复&rdquo;礼包&ldquo;，获取大数据学习资料</p>
<p>&nbsp;<img src="./images/Java连载47-多态基础语法、作用4.png" alt="" /></p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>