<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JPA入门简介与搭建HelloWorld(附代码下载)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JPA入门简介与搭建HelloWorld(附代码下载)</center></div><div class='banquan'>原文出处:本文由博客园博主霸道流氓提供。<br/>
原文连接:https://www.cnblogs.com/badaoliumangqizhi/p/12016153.html</div><br>
    <h1>场景</h1>
<p>在学习JPA之前先来了解下JDBC与各大数据库的关系。</p>
<p>很久之前出现了很多数据库比如Mysql、Oracle、SqlServer、DB2等。这就导致了应用程序要连哪个数据库就要使用哪个数据库的API。</p>
<p>所以JDBC出现了，定义了一组规范，由应用程序调用JDBC,进而调用所需数据库。</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)0.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" /></p>
<p>注：</p>
<p>博客主页： <br /><a href="https://blog.csdn.net/badao_liumang_qizhi">https://blog.csdn.net/badao_liumang_qizhi</a> 
<br />关注公众号 <br />霸道的程序猿<br />获取编程相关电子书、教程推送与免费下载。</p>
<h1>实现</h1>
<h2>什么是JPA</h2>
<p>Java Persistence API:用于对象持久化的API</p>
<p>Java EE5.0平台标准的ORM规范，使得应用程序以统一的方式访问持久层。</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)2.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>JPA与Hibernate的关系</h2>
<p>1.JPA是hibernate的一个抽象，类比于JDBC与JDBC驱动的关系。</p>
<p>2.JPA是规范，JPA本质上就是一种ORM规范，而不是一种ORM框架。因为JPA并未提供ORM实现，它只是制订了一些规范，提供了一些编程的 
API 接口，但具体实现则由 ORM 厂商提供实现。</p>
<p>3.Hibernate 是实现：Hibernate 除了作为 ORM 框架之外，它也是一种 JPA 实现</p>
<h2>JPA的优势</h2>
<p>标准化:&nbsp; 提供相同的 API，这保证了基于JPA 开发的企业应用能够经过少量的修改就能够在不同的 JPA 
框架下运行。<br />简单易用，集成方便:&nbsp; JPA 的主要目标之一就是提供更加简单的编程模型，在 JPA 
框架下创建实体和创建 Java&nbsp; 类一样简单，只需要使用 javax.persistence.Entity 进行注释；JPA 的框架和接口也都非常简单，<br />可媲美JDBC的查询能力:&nbsp; 
JPA的查询语言是面向对象的，JPA定义了独特的JPQL，而且能够支持批量更新和修改、JOIN、GROUP BY、HAVING 等通常只有 SQL 
才能够提供的高级查询特性，甚至还能够支持子查询。<br />支持面向对象的高级特性: JPA 
中能够支持面向对象的高级特性，如类之间的继承、多态和类之间的复杂关系，最大限度的使用面向对象的模型</p>
<h2>JPA包括3方面的技术</h2>
<p>ORM&nbsp; 映射元数据：JPA 支持 XML 和&nbsp; JDK 5.0 
注解两种元数据的形式，元数据描述对象和表之间的映射关系，框架据此将实体对象持久化到数据库表中。&nbsp; <br />JPA 的 
API：用来操作实体对象，执行CRUD操作，框架在后台完成所有的事情，开发者从繁琐的 JDBC和 SQL代码中解脱出来。&nbsp; <br />查询语言（JPQL）：这是持久化操作中很重要的一个方面，通过面向对象而非面向数据库的查询语言查询数据，避免程序和具体的&nbsp; 
SQL 紧密耦合。</p>
<h2>搭建HelloWorld</h2>
<p>打开Eclipse-File-New JPA Project</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)3.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>点击Next</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)4.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>这里要选择Target runtime 为自己的jdk，以及JPA Version 
，这里是2.0，然后点击next后再点击next</p>
<p><img alt="" /> </p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>第一次来到此页面不会有EclipseLink，点击右边的下载按钮</p>
<p><img alt="" /> </p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)8.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>选择指定版本点击next进行下载，这里选择的是EclipseLink2.5.2</p>
<p>下载完成点击Finish后项目结构如下</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)9.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" /> </p>
<p>会自动生成一个persistence.xml</p>
<h2>加入依赖</h2>
<p>在项目下新建lib目录，然后加入相关jar包</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)11.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" /> </p>
<h2>修改配置文件</h2>
<p>双击打开上面的persistnece.xml,选择Connection视图，然后选择Transaction 
Type 为Resource Local</p>
<p>然后依次配置好数据库的驱动等，其中URL中jpa对应的就是数据库名。</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)13.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>然后保存，使用Source视图查看，此时在properties下就会有如下代码</p>
<src class="cnblogs_code">
<pre><code>&lt;properties&gt;
 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.dialect</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">org.hibernate.dialect.MySQL5Dialect</span><span style="color: #800000;">"</span> /&gt;
 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.driver</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">com.mysql.jdbc.Driver</span><span style="color: #800000;">"</span>/&gt;
 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.url</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">jdbc:mysql:///jpa</span><span style="color: #800000;">"</span>/&gt;
 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.user</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span>/&gt;
 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.password</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">123</span><span style="color: #800000;">"</span>/&gt;  
&lt;/properties&gt;</code></pre>

<p>&nbsp;</p>
<h1>
然后再在配置文件中加入Hibernate相关的配置信息。</h1>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code> &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.format_sql</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">true</span><span style="color: #800000;">"</span>/&gt;
&lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.show_sql</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">true</span><span style="color: #800000;">"</span>/&gt;
&lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.hbm2ddl.auto</span><span style="color: #800000;">"</span> value= <span style="color: #800000;">"</span><span style="color: #800000;">update</span><span style="color: #800000;">"</span>/&gt;</code></pre>

<p>&nbsp;</p>
<h2>新增实体类&nbsp; </h2>
<p>在src下新建包com.badao.jpa.helloworld </p>
<p>包下新建实体类Customer,通过添加注解的方式完成实体类到数据库的映射。 </p>
<p>1.在类名上添加@Entity表明是实体类。 </p>
<p>2.在类名上添加@Table注解，并使用name属性与数据库中的表名相对应。 </p>
<p>3.在主键ID的get方法上使用@Id声明是主键，并使用@GeneratedValue注解声明主键策略。 
</p>
<p>4.在某些实体类属性名与数据库列名不对应的属性的get方法上要使用@Column注解进行映射。 </p>
<src class="cnblogs_code">
<pre><code><span style="color: #000000;">package com.badao.jpa.helloworld;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name</span>=<span style="color: #800000;">"</span><span style="color: #800000;">JPA_CUSTOMERS</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Customer {
 
 
 </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Integer id;
 
 </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String lastName;

 </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String email;
 
 </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> age;
 
 @GeneratedValue(strategy </span>=<span style="color: #000000;"> GenerationType.IDENTITY)
    @Id
 </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Integer getId() {
  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> id;
 }
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setId(Integer id) {
  </span><span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
 }
 
 @Column(name</span>=<span style="color: #800000;">"</span><span style="color: #800000;">LAST_NAME</span><span style="color: #800000;">"</span><span style="color: #000000;">)
 </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getLastName() {
  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> lastName;
 }
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setLastName(String lastName) {
  </span><span style="color: #0000ff;">this</span>.lastName =<span style="color: #000000;"> lastName;
 }
 </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getEmail() {
  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> email;
 }
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setEmail(String email) {
  </span><span style="color: #0000ff;">this</span>.email =<span style="color: #000000;"> email;
 }
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getAge() {
  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> age;
 }
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setAge(<span style="color: #0000ff;">int</span><span style="color: #000000;"> age) {
  </span><span style="color: #0000ff;">this</span>.age =<span style="color: #000000;"> age;
 }
 

}</span></code></pre>

<p>&nbsp;</p>
<p>添加完实体类后还要回到配置文件中添加一行配置 </p>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #0000ff;">class</span>&gt;com.badao.jpa.helloworld.Customer&lt;/<span style="color: #0000ff;">class</span>&gt;</code></pre>

<p>&nbsp;</p>
<h2>完整配置文件代码 </h2>
<src class="cnblogs_code">
<pre><code>&lt;?xml version=<span style="color: #800000;">"</span><span style="color: #800000;">1.0</span><span style="color: #800000;">"</span> encoding=<span style="color: #800000;">"</span><span style="color: #800000;">UTF-8</span><span style="color: #800000;">"</span>?&gt;
&lt;persistence version=<span style="color: #800000;">"</span><span style="color: #800000;">2.0</span><span style="color: #800000;">"</span> xmlns=<span style="color: #800000;">"</span><span style="color: #800000;">http://java.sun.com/xml/ns/persistence</span><span style="color: #800000;">"</span> xmlns:xsi=<span style="color: #800000;">"</span><span style="color: #800000;">http://www.w3.org/2001/XMLSchema-instance</span><span style="color: #800000;">"</span> xsi:schemaLocation=<span style="color: #800000;">"</span><span style="color: #800000;">http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd</span><span style="color: #800000;">"</span>&gt;
 &lt;persistence-unit name=<span style="color: #800000;">"</span><span style="color: #800000;">HelloJPA</span><span style="color: #800000;">"</span> transaction-type=<span style="color: #800000;">"</span><span style="color: #800000;">RESOURCE_LOCAL</span><span style="color: #800000;">"</span>&gt;
  
  &lt;!-- 添加持久化类 --&gt;
  &lt;<span style="color: #0000ff;">class</span>&gt;com.badao.jpa.helloworld.Customer&lt;/<span style="color: #0000ff;">class</span>&gt;
  &lt;properties&gt;
      &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.dialect</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">org.hibernate.dialect.MySQL5Dialect</span><span style="color: #800000;">"</span> /&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.driver</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">com.mysql.jdbc.Driver</span><span style="color: #800000;">"</span>/&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.url</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">jdbc:mysql:///jpa</span><span style="color: #800000;">"</span>/&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.user</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span>/&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">javax.persistence.jdbc.password</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">523627</span><span style="color: #800000;">"</span>/&gt;
   
   &lt;!-- 配置 JPA 实现产品的基本属性. 配置 hibernate 的基本属性 --&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.format_sql</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">true</span><span style="color: #800000;">"</span>/&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.show_sql</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">true</span><span style="color: #800000;">"</span>/&gt;
   &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">hibernate.hbm2ddl.auto</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">update</span><span style="color: #800000;">"</span>/&gt;
  &lt;/properties&gt;
 &lt;/persistence-unit&gt;
&lt;/persistence&gt;</code></pre>

<p>&nbsp;</p>
<h2>新建表 </h2>
<p>打开数据库jpa并新建表jpa_customers,设计字段如下</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)14.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="" /> </p>
<h2>新建启动类</h2>
<p>在包下新建Main类，然后编写main方法</p>
<src class="cnblogs_code">
<pre><code><span style="color: #000000;">package com.badao.jpa.helloworld;

import java.util.Date;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Main {

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">1. 创建 EntitymanagerFactory  要与配置文件中一致</span>
  String persistenceUnitName = <span style="color: #800000;">"</span><span style="color: #800000;">HelloJPA</span><span style="color: #800000;">"</span><span style="color: #000000;">;
  
    
  EntityManagerFactory entityManagerFactory </span>=<span style="color: #000000;"> 
    Persistence.createEntityManagerFactory(persistenceUnitName);
        
  </span><span style="color: #008000;">//</span><span style="color: #008000;">2. 创建 EntityManager. 类似于 Hibernate 的 SessionFactory</span>
  EntityManager entityManager =<span style="color: #000000;"> entityManagerFactory.createEntityManager();
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">3. 开启事务</span>
  EntityTransaction transaction =<span style="color: #000000;"> entityManager.getTransaction();
  transaction.begin();
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">4. 进行持久化操作</span>
  Customer customer = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Customer();
  customer.setAge(</span><span style="color: #800080;">12</span><span style="color: #000000;">);
  customer.setEmail(</span><span style="color: #800000;">"</span><span style="color: #800000;">badao@liumang.com</span><span style="color: #800000;">"</span><span style="color: #000000;">);
  customer.setLastName(</span><span style="color: #800000;">"</span><span style="color: #800000;">Badao</span><span style="color: #800000;">"</span><span style="color: #000000;">);
  
  
  entityManager.persist(customer);
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">5. 提交事务</span>
<span style="color: #000000;">  transaction.commit();
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">6. 关闭 EntityManager</span>
<span style="color: #000000;">  entityManager.close();
  
  </span><span style="color: #008000;">//</span><span style="color: #008000;">7. 关闭 EntityManagerFactory</span>
<span style="color: #000000;">  entityManagerFactory.close();
 }
}</span></code></pre>

<p>&nbsp;</p>
<p>然后运行main方法</p>
<p><img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)16.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>然后刷新数据库中的数据&nbsp; </p>
<p><img alt="" /> <br />&nbsp;<img src="./images/JPA入门简介与搭建HelloWorld(附代码下载)18.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>示例代码下载</h2>
<p>关注公众号：</p>
<p>霸道的程序猿</p>
<p>回复：</p>
<p>HelloJPA</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>