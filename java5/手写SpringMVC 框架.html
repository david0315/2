<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修手写SpringMVC 框架' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>手写SpringMVC 框架</center></div><div class='banquan'>原文出处:本文由博客园博主涛姐涛哥提供。<br/>
原文连接:https://www.cnblogs.com/taojietaoge/p/11817163.html</div><br>
    <p style="text-align: center;"><span style="color: #0000ff;"><strong><span style="font-size: 18pt;">手写SpringMVC框架</span></strong></span></p>
<p><span style="font-size: 15px;">&nbsp;</span></p>
<p><span style="color: #008000;"><strong><em><span style="font-size: 18pt;">细嗅蔷薇 心有猛虎</span></em></strong></span></p>
<p><span style="font-size: 15px;"><span style="font-size: 18px; color: #008000;"><em><strong>背景：</strong></em></span>Spring 想必大家都听说过，可能现在更多流行的是Spring Boot 和Spring Cloud 框架；但是SpringMVC 作为一款<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">实现了<span style="font-family: 'Open Sans'; color: #333333;">MVC <span style="font-family: 'Microsoft YaHei'; color: #333333;">设计模式的<span style="font-family: 'Open Sans'; color: #333333;">web <span style="font-family: 'Microsoft YaHei'; color: #333333;">(表现层) 层框架，其高开发效率和高性能也是现在很多公司仍在采用的框架；除此之外，Spring 源码大师级的代码规范和设计思想都十分值得学习；退一步说，Spring Boot 框架底层也有很多Spring 的东西，而且面试的时候还会经常被问到SpringMVC 原理，一般人可能也就是只能把SpringMVC 的运行原理背出来罢了，至于问到有没有了解其底层实现(代码层面)，那很可能就歇菜了，但您要是可以手写SpringMVC 框架就肯定可以令面试官刮目相看，所以手写SpringMVC 值得一试。</span></span></span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">在设计自己的SpringMVC 框架之前，需要了解下其运行流程。</span></span></span></span></span></span></p>
<p><span style="text-decoration: underline; color: #008000; font-size: 14pt;"><em><strong><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;">一、SpringMVC 运行流程</span></span></span></span></span></span></strong></em></span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px; font-family: 'Microsoft YaHei';"><span style="font-family: 'Microsoft YaHei';"><span style="font-family: 'Open Sans';"><span style="font-family: 'Microsoft YaHei';"><span style="font-family: 'Open Sans';"><span style="font-family: 'Microsoft YaHei';">图1. SpringMVC 运行流程</span></span></span></span></span></span></strong></span></p>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架0.png" alt="" /></span></span></span></span></span></span></p>
<src class="page" title="Page 53">
<src class="section" style="font-family: 'Open Sans'; color: rgb(20.000000%, 20.000000%, 20.000000%);">
<src class="page" title="Page 53">
<src class="section" style="font-family: 'Open Sans'; color: rgb(20.000000%, 20.000000%, 20.000000%);">
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;">1、用户向服务器发送请求，请求被<span style="font-family: 'Open Sans'; color: #333333;">Spring <span style="font-family: 'Microsoft YaHei'; color: #333333;">前端控制器<span style="font-family: 'Open Sans'; color: #333333;">DispatcherServlet <span style="font-family: 'Microsoft YaHei'; color: #333333;">捕获;</span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">2、DispatcherServlet 收到请求后调用HandlerMapping 处理器映射器；</span></span></span></span></span></p>
<p><span style="font-size: 15px;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">3、处理器映射器对</span></span></span></span></span><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">请求<span style="font-family: 'Open Sans'; color: #333333;">URL <span style="font-family: 'Microsoft YaHei'; color: #333333;">进行解析，得到请求资源标识符(<span style="font-family: 'Open Sans'; color: #333333;">URI<span style="font-family: 'Microsoft YaHei'; color: #333333;">)；然后根据该<span style="font-family: 'Open Sans'; color: #333333;">URI，<span style="font-family: 'Microsoft YaHei'; color: #333333;">调用</span></span></span></span></span></span></span>HandlerMapping <span style="font-family: 'Microsoft YaHei'; color: #333333;">获得该<span style="font-family: 'Open Sans'; color: #333333;">Handler <span style="font-family: 'Microsoft YaHei'; color: #333333;">配置的所有相关的对象(包括<span style="font-family: 'Open Sans'; color: #333333;">Handler <span style="font-family: 'Microsoft YaHei'; color: #333333;">对象以及<span style="font-family: 'Open Sans'; color: #333333;">Handler <span style="font-family: 'Microsoft YaHei'; color: #333333;">对象对应的拦截</span></span></span></span></span></span></span></span><span style="font-family: 'Microsoft YaHei'; color: #333333;">器)，再以<span style="font-family: 'Open Sans'; color: #333333;">HandlerExecutionChain <span style="font-family: 'Microsoft YaHei'; color: #333333;">对象的形式返回给<span style="font-family: 'Open Sans'; color: #333333;">DispatcherServlet</span>；</span></span></span></span></p>
<p><span style="font-size: 15px;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">4、</span></span></span><span style="font-family: 'Open Sans'; color: #333333;">DispatcherServlet <span style="font-family: 'Microsoft YaHei'; color: #333333;">根据获得的<span style="font-family: 'Open Sans'; color: #333333;">Handler<span style="font-family: 'Microsoft YaHei'; color: #333333;">，<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">通过HandlerAdapter 处理器适配器</span></span></span>选择一个合适的<span style="font-family: 'Open Sans'; color: #333333;">HandlerAdapter；<span style="font-family: 'Microsoft YaHei'; color: #333333;">(附注:如果成功获得</span></span></span></span></span>HandlerAdapter <span style="font-family: 'Microsoft YaHei'; color: #333333;">后，此时将开始执行拦截器的<span style="font-family: 'Open Sans'; color: #333333;">preHandler(...)<span style="font-family: 'Microsoft YaHei'; color: #333333;">方法)；</span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">5、<span style="font-family: 'Microsoft YaHei'; color: #333333;">提取<span style="font-family: 'Open Sans'; color: #333333;">Request <span style="font-family: 'Microsoft YaHei'; color: #333333;">中的模型数据，填充<span style="font-family: 'Open Sans'; color: #333333;">Handler <span style="font-family: 'Microsoft YaHei'; color: #333333;">入参，开始执行<span style="font-family: 'Open Sans'; color: #333333;">Handler<span style="font-family: 'Microsoft YaHei'; color: #333333;">(即<span style="font-family: 'Open Sans'; color: #333333;">Controller)</span></span></span></span></span></span></span></span>；【<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">在填充<span style="font-family: 'Open Sans'; color: #333333;">Handler<span style="font-family: 'Microsoft YaHei'; color: #333333;">的入参过程中，根据你的配置，<span style="font-family: 'Open Sans'; color: #333333;">Spring <span style="font-family: 'Microsoft YaHei'; color: #333333;">将帮你做一些额外的工作如：<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">HttpMessageConveter：<span style="font-family: 'Microsoft YaHei'; color: #333333;">将请求消息(如<span style="font-family: 'Open Sans'; color: #333333;">Json<span style="font-family: 'Microsoft YaHei'; color: #333333;">、<span style="font-family: 'Open Sans'; color: #333333;">xml<span style="font-family: 'Microsoft YaHei'; color: #333333;">等数据)转换成一个对象，将对象转换为指定的响应信息</span></span></span></span></span></span></span></span></span>；<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">数据转换：对请求消息进行数据转换，如<span style="font-family: 'Open Sans'; color: #333333;">String<span style="font-family: 'Microsoft YaHei'; color: #333333;">转换成<span style="font-family: 'Open Sans'; color: #333333;">Integer<span style="font-family: 'Microsoft YaHei'; color: #333333;">、<span style="font-family: 'Open Sans'; color: #333333;">Double<span style="font-family: 'Microsoft YaHei'; color: #333333;">等；数据格式化：<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">对请求消息进行数据格式化，如将字符串转换成格式化数字或格式化日期等；<span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">数据验证：验证数据的有效性(长度、格式等)，验证结果存储到<span style="font-family: 'Open Sans'; color: #333333;">BindingResult<span style="font-family: 'Microsoft YaHei'; color: #333333;">或<span style="font-family: 'Open Sans'; color: #333333;">Error<span style="font-family: 'Microsoft YaHei'; color: #333333;">中 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>】</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">6、Controller 执行完成返回ModelAndView 对象；</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">7、HandlerAdapter 将controller 执行结果ModelAndView 对象返回给DispatcherServlet；</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">8、DispatcherServlet 将ModelAndView 对象传给ViewReslover 视图解析器；</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span style="font-size: 15px;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;">9、ViewReslover </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family: 'Microsoft YaHei'; color: #333333;">根据返回的<span style="font-family: 'Open Sans'; color: #333333;">ModelAndView<span style="font-family: 'Microsoft YaHei'; color: #333333;">，选择一个适合的<span style="font-family: 'Open Sans'; color: #333333;">ViewResolver <span style="font-family: 'Microsoft YaHei'; color: #333333;">(必须是已经注册到<span style="font-family: 'Open Sans'; color: #333333;">Spring<span style="font-family: 'Microsoft YaHei'; color: #333333;">容器中的</span></span></span></span></span></span></span><span style="font-family: 'Open Sans'; color: #333333;">ViewResolver)<span style="font-family: 'Microsoft YaHei'; color: #333333;">返回给<span style="font-family: 'Open Sans'; color: #333333;">DispatcherServlet；</span></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">10、DispatcherServlet 对View 进行渲染视图（即将模型数据填充至视图中)；</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">11、DispatcherServlet <span style="font-family: 'Microsoft YaHei'; color: #333333;">将渲染结果</span>响应用户(客户端)。</span></span></span></p>
<p><span style="text-decoration: underline; color: #008000; font-size: 14pt;"><em><strong><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;">二、SpringMVC 框架设计思路</span></span></span></strong></em></span></p>
<p><span style="text-decoration: underline; color: #800080; font-size: 18px;"><em><strong><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;">1、读取配置阶段</span></span></span></strong></em></span></p>
<p style="text-align: center;"><span style="font-size: 14px; color: #ff00ff;"><strong><span style="font-family: 'Open Sans';"><span style="font-family: 'Microsoft YaHei';"><span style="font-family: 'Open Sans';">图2. SpringMVC 继承关系</span></span></span></strong></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架1.png" alt="" /></span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 第一步就是配置web.xml，加载自定义的DispatcherServlet。而从图中可以看出，SpringMVC 本质上是一个Servlet，这个Servlet 继承自HttpServlet，此外，FrameworkServlet 负责初始SpringMVC的容器，并将Spring 容器设置为父容器；为了读取web.xml 中的配置，需要用到ServletConfig 这个类，它代表当前Servlet 在web.xml 中的配置信息，然后通过web.xml 中加载我们自己写的MyDispatcherServlet 和读取配置文件。</span></span></span></p>
<p><span style="text-decoration: underline; color: #800080; font-size: 18px;"><em><strong><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;">2、初始化阶段</span></span></span></strong></em></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">初始化阶段会在DispatcherServlet 类中，按顺序实现下面几个步骤：</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">1、加载配置文件；</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">2、扫描当前项目下的所有文件；</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">3、拿到扫描到的类，通过反射机制将其实例化，并且放到ioc 容器中(Map的键值对&nbsp; beanName-bean) beanName默认是首字母小写；</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">4、初始化path 与方法的映射；</span></span></span></p>
<p><span style="font-size: 15px; font-family: 'Open Sans'; color: #333333;"><span style="font-family: 'Microsoft YaHei'; color: #333333;"><span style="font-family: 'Open Sans'; color: #333333;">5、获取请求传入的参数并处理参数通过初始化好的handlerMapping 中拿出url 对应的方法名，反射调用。</span></span></span></p>
<p><span style="text-decoration: underline; font-size: 18px; color: #800080;"><em><strong><span style="font-family: 'Open Sans'; text-decoration: underline;"><span style="font-family: 'Microsoft YaHei'; text-decoration: underline;"><span style="font-family: 'Open Sans'; text-decoration: underline;">3、运行阶段</span></span></span></strong></em></span></p>
<src class="page" title="Page 53">
<src class="section" style="font-family: 'Open Sans'; color: rgb(20.000000%, 20.000000%, 20.000000%);">
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 运行阶段，每一次请求将会调用doGet 或doPost 方法，它会根据url 请求去HandlerMapping 中匹配到对应的Method，然后利用反射机制调用Controller 中的url 对应的方法，并得到结果返回。</span></p>
<p><span style="text-decoration: underline; color: #008000;"><strong><em><span style="font-size: 14pt; font-family: 'Microsoft YaHei'; text-decoration: underline;">三、实现SpringMVC 框架</span></em></strong></span></p>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先，小老弟SpringMVC 框架只实现自己的@Controller 和@RequestMapping 注解，其它注解功能实现方式类似，实现注解较少所以项目比较简单，可以看到如下工程文件及目录截图。</span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px; font-family: 'Microsoft YaHei';">图3. 工程文件及目录</span></strong></span></p>
<p><span style="font-size: 15px; font-family: 'Microsoft YaHei'; color: #333333;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架2.png" alt="" /></span></p>


<p><span style="color: #800080;"><strong><em><span style="text-decoration: underline;"><span style="font-size: 18px;">&nbsp;1、创建Java Web 工程</span></span></em></strong></span></p>
<p><span style="font-size: 15px;">创建Java Web 工程，勾选JavaEE 下方的Web Application 选项，Next。</span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px;">图4. 创建Java Web 工程</span></strong></span></p>
<p><span style="font-size: 15px;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架3.png" alt="" /></span></p>
<p><span style="text-decoration: underline; color: #800080; font-size: 18px;"><em><strong>&nbsp;2、在工程WEB-INF 下的web.xml 中加入下方配置</strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version="1.0" encoding="UTF-8"</span><span style="color: #0000ff;">?&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">web-app </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://xmlns.jcp.org/xml/ns/javaee"</span>
<span style="color: #008080;"> 3</span> <span style="color: #ff0000;">         xmlns:xsi</span><span style="color: #0000ff;">="http://www.w3.org/2001/XMLSchema-instance"</span>
<span style="color: #008080;"> 4</span> <span style="color: #ff0000;">         xsi:schemaLocation</span><span style="color: #0000ff;">="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
<span style="color: #008080;"> 5</span> <span style="color: #ff0000;">         version</span><span style="color: #0000ff;">="4.0"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>DispatcherServlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>com.tjt.springmvc.DispatcherServlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-class</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>DispatcherServlet<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-name</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>/<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">url-pattern</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">servlet-mapping</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">web-app</span><span style="color: #0000ff;">&gt;</span></span></code></pre>

<p><span style="text-decoration: underline; color: #800080;"><em><strong><span style="font-size: 18px;">3、创建自定义Controller 注解</span></strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.tjt.springmvc;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span> java.lang.annotation.*<span style="color: #000000;">;
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;"> * @MyController 自定义注解类
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">10</span> <span style="color: #008000;"> * @@Target(ElementType.TYPE)
</span><span style="color: #008080;">11</span> <span style="color: #008000;"> * 表示该注解可以作用在类上;
</span><span style="color: #008080;">12</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">13</span> <span style="color: #008000;"> * @Retention(RetentionPolicy.RUNTIME)
</span><span style="color: #008080;">14</span> <span style="color: #008000;"> * 表示该注解会在class 字节码文件中存在，在运行时可以通过反射获取到
</span><span style="color: #008080;">15</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">16</span> <span style="color: #008000;"> * @Documented
</span><span style="color: #008080;">17</span> <span style="color: #008000;"> * 标记注解，表示可以生成文档
</span><span style="color: #008080;">18</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">19</span> <span style="color: #000000;">@Target(ElementType.TYPE)
</span><span style="color: #008080;">20</span> <span style="color: #000000;">@Retention(RetentionPolicy.RUNTIME)
</span><span style="color: #008080;">21</span> <span style="color: #000000;">@Documented
</span><span style="color: #008080;">22</span> <span style="color: #0000ff;">public</span> @<span style="color: #0000ff;">interface</span><span style="color: #000000;"> MyController {
</span><span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">25</span> <span style="color: #008000;">     * public class MyController
</span><span style="color: #008080;">26</span> <span style="color: #008000;">     * 把 class 替换成 @interface 该类即成为注解类
</span><span style="color: #008080;">27</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">28</span> 
<span style="color: #008080;">29</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">30</span> <span style="color: #008000;">     * 为Controller 注册别名
</span><span style="color: #008080;">31</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;">32</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">33</span>     String value() <span style="color: #0000ff;">default</span> ""<span style="color: #000000;">;
</span><span style="color: #008080;">34</span>     
<span style="color: #008080;">35</span> }</span></code></pre>

<p><span style="text-decoration: underline; font-size: 18px;"><em><strong><span style="color: #800080; text-decoration: underline;">4、创建自定义RequestMapping 注解</span></strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.tjt.springmvc;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span> java.lang.annotation.*<span style="color: #000000;">;
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 8</span> <span style="color: #008000;"> * @MyRequestMapping 自定义注解类
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">10</span> <span style="color: #008000;"> * @Target({ElementType.METHOD,ElementType.TYPE})
</span><span style="color: #008080;">11</span> <span style="color: #008000;"> * 表示该注解可以作用在方法、类上;
</span><span style="color: #008080;">12</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">13</span> <span style="color: #008000;"> * @Retention(RetentionPolicy.RUNTIME)
</span><span style="color: #008080;">14</span> <span style="color: #008000;"> * 表示该注解会在class 字节码文件中存在，在运行时可以通过反射获取到
</span><span style="color: #008080;">15</span> <span style="color: #008000;"> *
</span><span style="color: #008080;">16</span> <span style="color: #008000;"> * @Documented
</span><span style="color: #008080;">17</span> <span style="color: #008000;"> * 标记注解，表示可以生成文档
</span><span style="color: #008080;">18</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">19</span> <span style="color: #000000;">@Target({ElementType.METHOD, ElementType.TYPE})
</span><span style="color: #008080;">20</span> <span style="color: #000000;">@Retention(RetentionPolicy.RUNTIME)
</span><span style="color: #008080;">21</span> <span style="color: #000000;">@Documented
</span><span style="color: #008080;">22</span> <span style="color: #0000ff;">public</span> @<span style="color: #0000ff;">interface</span><span style="color: #000000;"> MyRequestMapping {
</span><span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">25</span> <span style="color: #008000;">     * public @interface MyRequestMapping
</span><span style="color: #008080;">26</span> <span style="color: #008000;">     * 把 class 替换成 @interface 该类即成为注解类
</span><span style="color: #008080;">27</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">28</span> 
<span style="color: #008080;">29</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">30</span> <span style="color: #008000;">     * 表示访问该方法的url
</span><span style="color: #008080;">31</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;">32</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">33</span>     String value() <span style="color: #0000ff;">default</span> ""<span style="color: #000000;">;
</span><span style="color: #008080;">34</span> 
<span style="color: #008080;">35</span> }</span></code></pre>

<p><span style="text-decoration: underline; font-size: 18px;"><em><strong><span style="color: #800080; text-decoration: underline;">5、设计用于获取项目工程下所有的class 文件的封装工具类</span></strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.tjt.springmvc;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> 
<span style="color: #008080;">  4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.File;
</span><span style="color: #008080;">  5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.FileFilter;
</span><span style="color: #008080;">  6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.net.JarURLConnection;
</span><span style="color: #008080;">  7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.net.URL;
</span><span style="color: #008080;">  8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.net.URLDecoder;
</span><span style="color: #008080;">  9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;
</span><span style="color: #008080;"> 10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Enumeration;
</span><span style="color: #008080;"> 11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;"> 12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.jar.JarEntry;
</span><span style="color: #008080;"> 13</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.jar.JarFile;
</span><span style="color: #008080;"> 14</span> 
<span style="color: #008080;"> 15</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 16</span> <span style="color: #008000;"> * 从项目工程包package 中获取所有的Class 工具类
</span><span style="color: #008080;"> 17</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 18</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ClassUtils {
</span><span style="color: #008080;"> 19</span> 
<span style="color: #008080;"> 20</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 21</span> <span style="color: #008000;">     * 静态常量
</span><span style="color: #008080;"> 22</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 23</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String FILE_CONSTANT = "file"<span style="color: #000000;">;
</span><span style="color: #008080;"> 24</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String UTF8_CONSTANT = "UTF-8"<span style="color: #000000;">;
</span><span style="color: #008080;"> 25</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String JAR_CONSTANT = "jar"<span style="color: #000000;">;
</span><span style="color: #008080;"> 26</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String POINT_CLASS_CONSTANT = ".class"<span style="color: #000000;">;
</span><span style="color: #008080;"> 27</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">char</span> POINT_CONSTANT = '.'<span style="color: #000000;">;
</span><span style="color: #008080;"> 28</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">char</span> LEFT_LINE_CONSTANT = '/'<span style="color: #000000;">;
</span><span style="color: #008080;"> 29</span> 
<span style="color: #008080;"> 30</span> 
<span style="color: #008080;"> 31</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 32</span> <span style="color: #008000;">     * 定义私有构造函数来屏蔽隐式公有构造函数
</span><span style="color: #008080;"> 33</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 34</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> ClassUtils() {
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 36</span> 
<span style="color: #008080;"> 37</span> 
<span style="color: #008080;"> 38</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 39</span> <span style="color: #008000;">     * 从项目工程包package 中获取所有的Class
</span><span style="color: #008080;"> 40</span> <span style="color: #008000;">     * getClasses
</span><span style="color: #008080;"> 41</span> <span style="color: #008000;">     *
</span><span style="color: #008080;"> 42</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> packageName
</span><span style="color: #008080;"> 43</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;"> 44</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 45</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> List&lt;Class&lt;?&gt;&gt; getClasses(String packageName) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span> 
<span style="color: #008080;"> 48</span>         List&lt;Class&lt;?&gt;&gt; classes = <span style="color: #0000ff;">new</span> ArrayList&lt;Class&lt;?&gt;&gt;();  <span style="color: #008000;">//</span><span style="color: #008000;"> 定义一个class 类的泛型集合</span>
<span style="color: #008080;"> 49</span>         <span style="color: #0000ff;">boolean</span> recursive = <span style="color: #0000ff;">true</span>;  <span style="color: #008000;">//</span><span style="color: #008000;"> recursive 是否循环迭代</span>
<span style="color: #008080;"> 50</span>         String packageDirName = packageName.replace(POINT_CONSTANT, LEFT_LINE_CONSTANT);  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取包的名字 并进行替换</span>
<span style="color: #008080;"> 51</span>         Enumeration&lt;URL&gt; dirs;  <span style="color: #008000;">//</span><span style="color: #008000;"> 定义一个枚举的集合 分别保存该目录下的所有java 类文件及Jar 包等内容</span>
<span style="color: #008080;"> 52</span>         dirs =<span style="color: #000000;"> Thread.currentThread().getContextClassLoader().getResources(packageDirName);
</span><span style="color: #008080;"> 53</span>         <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 54</span> <span style="color: #008000;">         * 循环迭代 处理这个目录下的things
</span><span style="color: #008080;"> 55</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 56</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;"> (dirs.hasMoreElements()) {
</span><span style="color: #008080;"> 57</span>             URL url = dirs.nextElement();  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取下一个元素</span>
<span style="color: #008080;"> 58</span>             String protocol = url.getProtocol();  <span style="color: #008000;">//</span><span style="color: #008000;"> 得到协议的名称 protocol
</span><span style="color: #008080;"> 59</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 如果是</span>
<span style="color: #008080;"> 60</span>             <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 61</span> <span style="color: #008000;">             * 若protocol 是文件形式
</span><span style="color: #008080;"> 62</span>              <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 63</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (FILE_CONSTANT.equals(protocol)) {
</span><span style="color: #008080;"> 64</span>                 String filePath = URLDecoder.decode(url.getFile(), UTF8_CONSTANT); <span style="color: #008000;">//</span><span style="color: #008000;"> 获取包的物理路径</span>
<span style="color: #008080;"> 65</span>                 findAndAddClassesInPackageByFile(packageName, filePath, recursive, classes); <span style="color: #008000;">//</span><span style="color: #008000;"> 以文件的方式扫描整个包下的文件 并添加到集合中</span>
<span style="color: #008080;"> 66</span>                 <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 67</span> <span style="color: #008000;">                 * 若protocol 是jar 包文件
</span><span style="color: #008080;"> 68</span>                  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 69</span>             } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span><span style="color: #000000;"> (JAR_CONSTANT.equals(protocol)) {
</span><span style="color: #008080;"> 70</span>                 JarFile jar;  <span style="color: #008000;">//</span><span style="color: #008000;"> 定义一个JarFile</span>
<span style="color: #008080;"> 71</span>                 jar = ((JarURLConnection) url.openConnection()).getJarFile();  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取jar</span>
<span style="color: #008080;"> 72</span>                 Enumeration&lt;JarEntry&gt; entries = jar.entries();  <span style="color: #008000;">//</span><span style="color: #008000;"> 从jar 包中获取枚举类</span>
<span style="color: #008080;"> 73</span>                 <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 74</span> <span style="color: #008000;">                 * 循环迭代从Jar 包中获得的枚举类
</span><span style="color: #008080;"> 75</span>                  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 76</span>                 <span style="color: #0000ff;">while</span><span style="color: #000000;"> (entries.hasMoreElements()) {
</span><span style="color: #008080;"> 77</span>                     JarEntry entry = entries.nextElement();  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取jar里的一个实体，如目录、META-INF等文件</span>
<span style="color: #008080;"> 78</span>                     String name =<span style="color: #000000;"> entry.getName();
</span><span style="color: #008080;"> 79</span>                     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 80</span> <span style="color: #008000;">                     * 若实体名是以 / 开头
</span><span style="color: #008080;"> 81</span>                      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 82</span>                     <span style="color: #0000ff;">if</span> (name.charAt(0) ==<span style="color: #000000;"> LEFT_LINE_CONSTANT) {
</span><span style="color: #008080;"> 83</span>                         name = name.substring(1);  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取后面的字符串</span>
<span style="color: #008080;"> 84</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;"> 85</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> 如果</span>
<span style="color: #008080;"> 86</span>                     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 87</span> <span style="color: #008000;">                     * 若实体名前半部分和定义的包名相同
</span><span style="color: #008080;"> 88</span>                      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 89</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (name.startsWith(packageDirName)) {
</span><span style="color: #008080;"> 90</span>                         <span style="color: #0000ff;">int</span> idx =<span style="color: #000000;"> name.lastIndexOf(LEFT_LINE_CONSTANT);
</span><span style="color: #008080;"> 91</span>                         <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 92</span> <span style="color: #008000;">                         * 并且实体名以为'/' 结尾
</span><span style="color: #008080;"> 93</span> <span style="color: #008000;">                         * 若其以'/' 结尾则是一个包
</span><span style="color: #008080;"> 94</span>                          <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 95</span>                         <span style="color: #0000ff;">if</span> (idx != -1<span style="color: #000000;">) {
</span><span style="color: #008080;"> 96</span>                             packageName = name.substring(0, idx).replace(LEFT_LINE_CONSTANT, POINT_CONSTANT);  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取包名 并把'/' 替换成'.'</span>
<span style="color: #008080;"> 97</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 98</span>                         <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 99</span> <span style="color: #008000;">                         * 若实体是一个包 且可以继续迭代
</span><span style="color: #008080;">100</span>                          <span style="color: #008000;">*/</span>
<span style="color: #008080;">101</span>                         <span style="color: #0000ff;">if</span> ((idx != -1) ||<span style="color: #000000;"> recursive) {
</span><span style="color: #008080;">102</span>                             <span style="color: #0000ff;">if</span> (name.endsWith(POINT_CLASS_CONSTANT) &amp;&amp; !entry.isDirectory()) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 若为.class 文件 且不是目录</span>
<span style="color: #008080;">103</span>                                 String className = name.substring(packageName.length() + 1, name.length() - 6);  <span style="color: #008000;">//</span><span style="color: #008000;"> 则去掉.class 后缀并获取真正的类名</span>
<span style="color: #008080;">104</span>                                 classes.add(Class.forName(packageName + '.' + className)); <span style="color: #008000;">//</span><span style="color: #008000;"> 把获得到的类名添加到classes</span>
<span style="color: #008080;">105</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">106</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">107</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">108</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">109</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">110</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">111</span> 
<span style="color: #008080;">112</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> classes;
</span><span style="color: #008080;">113</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">114</span> 
<span style="color: #008080;">115</span> 
<span style="color: #008080;">116</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">117</span> <span style="color: #008000;">     * 以文件的形式来获取包下的所有Class
</span><span style="color: #008080;">118</span> <span style="color: #008000;">     * findAndAddClassesInPackageByFile
</span><span style="color: #008080;">119</span> <span style="color: #008000;">     *
</span><span style="color: #008080;">120</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> packageName
</span><span style="color: #008080;">121</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> packagePath
</span><span style="color: #008080;">122</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> recursive
</span><span style="color: #008080;">123</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> classes
</span><span style="color: #008080;">124</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">125</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> findAndAddClassesInPackageByFile(
</span><span style="color: #008080;">126</span> <span style="color: #000000;">            String packageName, String packagePath,
</span><span style="color: #008080;">127</span>             <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> recursive,
</span><span style="color: #008080;">128</span>             List&lt;Class&lt;?&gt;&gt; classes) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;">129</span> 
<span style="color: #008080;">130</span> 
<span style="color: #008080;">131</span>         File dir = <span style="color: #0000ff;">new</span> File(packagePath);  <span style="color: #008000;">//</span><span style="color: #008000;"> 获取此包的目录并建立一个File</span>
<span style="color: #008080;">132</span> 
<span style="color: #008080;">133</span>         <span style="color: #0000ff;">if</span> (!dir.exists() || !dir.isDirectory()) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 若dir 不存在或者 也不是目录就直接返回</span>
<span style="color: #008080;">134</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">135</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">136</span> 
<span style="color: #008080;">137</span>         File[] dirfiles = dir.listFiles(<span style="color: #0000ff;">new</span> FileFilter() {  <span style="color: #008000;">//</span><span style="color: #008000;"> 若dir 存在 则获取包下的所有文件、目录</span>
<span style="color: #008080;">138</span> 
<span style="color: #008080;">139</span>             <span style="color: #008000;">/**</span>
<span style="color: #008080;">140</span> <span style="color: #008000;">             * 自定义过滤规则 如果可以循环(包含子目录) 或则是以.class 结尾的文件(编译好的java 字节码文件)
</span><span style="color: #008080;">141</span> <span style="color: #008000;">             * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> file
</span><span style="color: #008080;">142</span> <span style="color: #008000;">             * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;">143</span>              <span style="color: #008000;">*/</span>
<span style="color: #008080;">144</span> <span style="color: #000000;">            @Override
</span><span style="color: #008080;">145</span>             <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> accept(File file) {
</span><span style="color: #008080;">146</span>                 <span style="color: #0000ff;">return</span> (recursive &amp;&amp; file.isDirectory()) ||<span style="color: #000000;"> (file.getName().endsWith(POINT_CLASS_CONSTANT));
</span><span style="color: #008080;">147</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">148</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">149</span> 
<span style="color: #008080;">150</span>         <span style="color: #008000;">/**</span>
<span style="color: #008080;">151</span> <span style="color: #008000;">         * 循环所有文件获取java 类文件并添加到集合中
</span><span style="color: #008080;">152</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;">153</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (File file : dirfiles) {
</span><span style="color: #008080;">154</span>             <span style="color: #0000ff;">if</span> (file.isDirectory()) {  <span style="color: #008000;">//</span><span style="color: #008000;"> 若file 为目录 则继续扫描</span>
<span style="color: #008080;">155</span>                 findAndAddClassesInPackageByFile(packageName + "." +<span style="color: #000000;"> file.getName(), file.getAbsolutePath(), recursive,
</span><span style="color: #008080;">156</span> <span style="color: #000000;">                        classes);
</span><span style="color: #008080;">157</span>             } <span style="color: #0000ff;">else</span> {  <span style="color: #008000;">//</span><span style="color: #008000;"> 若file 为java 类文件 则去掉后面的.class 只留下类名</span>
<span style="color: #008080;">158</span>                 String className = file.getName().substring(0, file.getName().length() - 6<span style="color: #000000;">);
</span><span style="color: #008080;">159</span>                 classes.add(Class.forName(packageName + '.' + className));  <span style="color: #008000;">//</span><span style="color: #008000;"> 把className 添加到集合中去</span>
<span style="color: #008080;">160</span> 
<span style="color: #008080;">161</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">162</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">163</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">164</span> }</span></code></pre>

<p><span style="text-decoration: underline; font-size: 18px;"><em><strong><span style="color: #800080; text-decoration: underline;">6、访问跳转页面index.jsp</span></strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;"> 1</span> <span style="background-color: #ffff00; color: #000000;">&lt;%</span><span style="background-color: #f5f5f5; color: #000000;">--</span>
<span style="color: #008080;"> 2</span> <span style="background-color: #f5f5f5; color: #000000;">  Created by IntelliJ IDEA.
</span><span style="color: #008080;"> 3</span> <span style="background-color: #f5f5f5; color: #000000;">  User: apple
</span><span style="color: #008080;"> 4</span>   <span style="background-color: #f5f5f5; color: #0000ff;">Date</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #800080;">2019</span><span style="background-color: #f5f5f5; color: #000000;">-</span><span style="background-color: #f5f5f5; color: #800080;">11</span><span style="background-color: #f5f5f5; color: #000000;">-</span><span style="background-color: #f5f5f5; color: #800080;">07</span>
<span style="color: #008080;"> 5</span>   <span style="background-color: #f5f5f5; color: #0000ff;">Time</span><span style="background-color: #f5f5f5; color: #000000;">: </span><span style="background-color: #f5f5f5; color: #800080;">13</span><span style="background-color: #f5f5f5; color: #000000;">:</span><span style="background-color: #f5f5f5; color: #800080;">28</span>
<span style="color: #008080;"> 6</span>   <span style="background-color: #f5f5f5; color: #0000ff;">To</span><span style="background-color: #f5f5f5; color: #000000;"> change this template use File | Settings | File Templates.
</span><span style="color: #008080;"> 7</span> <span style="background-color: #f5f5f5; color: #000000;">--</span><span style="background-color: #ffff00; color: #000000;">%&gt;</span>
<span style="color: #008080;"> 8</span> <span style="background-color: #ffff00; color: #000000;">&lt;%</span><span style="background-color: #f5f5f5; color: #000000;">--</span>
<span style="color: #008080;"> 9</span> <span style="background-color: #f5f5f5; color: #000000;">&lt;</span><span style="background-color: #f5f5f5; color: #000000;">%@ page contentType</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #800000;">"</span><span style="background-color: #f5f5f5; color: #800000;">text/html;charset=UTF-8</span><span style="background-color: #f5f5f5; color: #800000;">"</span><span style="background-color: #f5f5f5; color: #000000;"> language</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #800000;">"</span><span style="background-color: #f5f5f5; color: #800000;">java</span><span style="background-color: #f5f5f5; color: #800000;">"</span> <span style="background-color: #ffff00; color: #000000;">%&gt;</span>
<span style="color: #008080;">10</span> <span style="color: #000000;">--%&gt;
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">12</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>My Fucking SpringMVC<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">14</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">16</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;T</span>he Lie We Live!<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h2</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">H2</span><span style="color: #0000ff;">&gt;</span>My Fucking SpringMVC<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">H2</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">18</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></span></code></pre>

<p><span style="text-decoration: underline; font-size: 18px;"><em><strong><span style="color: #800080; text-decoration: underline;">7、自定义DispatcherServlet 设计，继承HttpServlet，重写init 方法、doGet、doPost 等方法，以及自定义注解要实现的功能。</span></strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.tjt.springmvc;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> 
<span style="color: #008080;">  4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.ServletConfig;
</span><span style="color: #008080;">  5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.ServletException;
</span><span style="color: #008080;">  6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServlet;
</span><span style="color: #008080;">  7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletRequest;
</span><span style="color: #008080;">  8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletResponse;
</span><span style="color: #008080;">  9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;"> 10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.lang.reflect.InvocationTargetException;
</span><span style="color: #008080;"> 11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.lang.reflect.Method;
</span><span style="color: #008080;"> 12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;"> 13</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Map;
</span><span style="color: #008080;"> 14</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Objects;
</span><span style="color: #008080;"> 15</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.concurrent.ConcurrentHashMap;
</span><span style="color: #008080;"> 16</span> 
<span style="color: #008080;"> 17</span> 
<span style="color: #008080;"> 18</span> 
<span style="color: #008080;"> 19</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 20</span> <span style="color: #008000;"> * DispatcherServlet 处理SpringMVC 框架流程
</span><span style="color: #008080;"> 21</span> <span style="color: #008000;"> * 主要流程：
</span><span style="color: #008080;"> 22</span> <span style="color: #008000;"> * 1、包扫描获取包下面所有的类
</span><span style="color: #008080;"> 23</span> <span style="color: #008000;"> * 2、初始化包下面所有的类
</span><span style="color: #008080;"> 24</span> <span style="color: #008000;"> * 3、初始化HandlerMapping 方法,将url 和方法对应上
</span><span style="color: #008080;"> 25</span> <span style="color: #008000;"> * 4、实现HttpServlet 重写doPost 方法
</span><span style="color: #008080;"> 26</span> <span style="color: #008000;"> *
</span><span style="color: #008080;"> 27</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 28</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> DispatcherServlet <span style="color: #0000ff;">extends</span><span style="color: #000000;"> HttpServlet {
</span><span style="color: #008080;"> 29</span> 
<span style="color: #008080;"> 30</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 31</span> <span style="color: #008000;">     * 部分静态常量
</span><span style="color: #008080;"> 32</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 33</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String PACKAGE_CLASS_NULL_EX = "包扫描后的classes为null"<span style="color: #000000;">;
</span><span style="color: #008080;"> 34</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String HTTP_NOT_EXIST = "sorry http is not exit 404"<span style="color: #000000;">;
</span><span style="color: #008080;"> 35</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String METHOD_NOT_EXIST = "sorry method is not exit 404"<span style="color: #000000;">;
</span><span style="color: #008080;"> 36</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String POINT_JSP = ".jsp"<span style="color: #000000;">;
</span><span style="color: #008080;"> 37</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String LEFT_LINE = "/"<span style="color: #000000;">;
</span><span style="color: #008080;"> 38</span> 
<span style="color: #008080;"> 39</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 40</span> <span style="color: #008000;">     * 用于存放SpringMVC bean 的容器
</span><span style="color: #008080;"> 41</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 42</span>     <span style="color: #0000ff;">private</span> ConcurrentHashMap&lt;String, Object&gt; mvcBeans = <span style="color: #0000ff;">new</span> ConcurrentHashMap&lt;&gt;<span style="color: #000000;">();
</span><span style="color: #008080;"> 43</span>     <span style="color: #0000ff;">private</span> ConcurrentHashMap&lt;String, Object&gt; mvcBeanUrl = <span style="color: #0000ff;">new</span> ConcurrentHashMap&lt;&gt;<span style="color: #000000;">();
</span><span style="color: #008080;"> 44</span>     <span style="color: #0000ff;">private</span> ConcurrentHashMap&lt;String, String&gt; mvcMethodUrl = <span style="color: #0000ff;">new</span> ConcurrentHashMap&lt;&gt;<span style="color: #000000;">();
</span><span style="color: #008080;"> 45</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String PROJECT_PACKAGE_PATH = "com.tjt.springmvc"<span style="color: #000000;">;
</span><span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span> 
<span style="color: #008080;"> 48</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 49</span> <span style="color: #008000;">     * 按顺序初始化组件
</span><span style="color: #008080;"> 50</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> config
</span><span style="color: #008080;"> 51</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 52</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;"> 53</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> init(ServletConfig config) {
</span><span style="color: #008080;"> 54</span>         String packagePath =<span style="color: #000000;"> PROJECT_PACKAGE_PATH;
</span><span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 56</span>             <span style="color: #008000;">//</span><span style="color: #008000;">1.进行报扫描获取当前包下面所有的类</span>
<span style="color: #008080;"> 57</span>             List&lt;Class&lt;?&gt;&gt; classes =<span style="color: #000000;"> comscanPackage(packagePath);
</span><span style="color: #008080;"> 58</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2.初始化springmvcbean</span>
<span style="color: #008080;"> 59</span> <span style="color: #000000;">            initSpringMvcBean(classes);
</span><span style="color: #008080;"> 60</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 63</span>         <span style="color: #008000;">//</span><span style="color: #008000;">3.将请求地址和方法进行映射</span>
<span style="color: #008080;"> 64</span> <span style="color: #000000;">        initHandMapping(mvcBeans);
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 66</span> 
<span style="color: #008080;"> 67</span> 
<span style="color: #008080;"> 68</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 69</span> <span style="color: #008000;">     * 调用ClassUtils 工具类获取工程中所有的class
</span><span style="color: #008080;"> 70</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> packagePath
</span><span style="color: #008080;"> 71</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;"> 72</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception
</span><span style="color: #008080;"> 73</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 74</span>     <span style="color: #0000ff;">public</span> List&lt;Class&lt;?&gt;&gt; comscanPackage(String packagePath) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;"> 75</span>         List&lt;Class&lt;?&gt;&gt; classes =<span style="color: #000000;"> ClassUtils.getClasses(packagePath);
</span><span style="color: #008080;"> 76</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> classes;
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 78</span> 
<span style="color: #008080;"> 79</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 80</span> <span style="color: #008000;">     * 初始化SpringMVC bean
</span><span style="color: #008080;"> 81</span> <span style="color: #008000;">     *
</span><span style="color: #008080;"> 82</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> classes
</span><span style="color: #008080;"> 83</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> Exception
</span><span style="color: #008080;"> 84</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 85</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> initSpringMvcBean(List&lt;Class&lt;?&gt;&gt; classes) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;"> 86</span>         <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 87</span> <span style="color: #008000;">         * 若包扫描出的classes 为空则直接抛异常
</span><span style="color: #008080;"> 88</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 89</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (classes.isEmpty()) {
</span><span style="color: #008080;"> 90</span>             <span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> Exception(PACKAGE_CLASS_NULL_EX);
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 92</span> 
<span style="color: #008080;"> 93</span>         <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 94</span> <span style="color: #008000;">         * 遍历所有classes 获取@MyController 注解
</span><span style="color: #008080;"> 95</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 96</span>         <span style="color: #0000ff;">for</span> (Class&lt;?&gt;<span style="color: #000000;"> aClass : classes) {
</span><span style="color: #008080;"> 97</span>             <span style="color: #008000;">//</span><span style="color: #008000;">获取被自定义注解的controller 将其初始化到自定义springmvc 容器中</span>
<span style="color: #008080;"> 98</span>             MyController declaredAnnotation = aClass.getDeclaredAnnotation(MyController.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 99</span>             <span style="color: #0000ff;">if</span> (declaredAnnotation != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">100</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">获取类的名字</span>
<span style="color: #008080;">101</span>                 String beanid =<span style="color: #000000;"> lowerFirstCapse(aClass.getSimpleName());
</span><span style="color: #008080;">102</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">获取对象</span>
<span style="color: #008080;">103</span>                 Object beanObj =<span style="color: #000000;"> aClass.newInstance();
</span><span style="color: #008080;">104</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">放入spring 容器</span>
<span style="color: #008080;">105</span> <span style="color: #000000;">                mvcBeans.put(beanid, beanObj);
</span><span style="color: #008080;">106</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">107</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">108</span> 
<span style="color: #008080;">109</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">110</span> 
<span style="color: #008080;">111</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">112</span> <span style="color: #008000;">     * 初始化HandlerMapping 方法
</span><span style="color: #008080;">113</span> <span style="color: #008000;">     *
</span><span style="color: #008080;">114</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> mvcBeans
</span><span style="color: #008080;">115</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">116</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> initHandMapping(ConcurrentHashMap&lt;String, Object&gt;<span style="color: #000000;"> mvcBeans) {
</span><span style="color: #008080;">117</span>         <span style="color: #008000;">/**</span>
<span style="color: #008080;">118</span> <span style="color: #008000;">         * 遍历springmvc 获取注入的对象值
</span><span style="color: #008080;">119</span>          <span style="color: #008000;">*/</span>
<span style="color: #008080;">120</span>         <span style="color: #0000ff;">for</span> (Map.Entry&lt;String, Object&gt;<span style="color: #000000;"> entry : mvcBeans.entrySet()) {
</span><span style="color: #008080;">121</span>             Object objValue =<span style="color: #000000;"> entry.getValue();
</span><span style="color: #008080;">122</span>             Class&lt;?&gt; aClass =<span style="color: #000000;"> objValue.getClass();
</span><span style="color: #008080;">123</span>             <span style="color: #008000;">//</span><span style="color: #008000;">获取当前类 判断其是否有自定义的requestMapping 注解</span>
<span style="color: #008080;">124</span>             String mappingUrl = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">125</span>             MyRequestMapping anRequestMapping = aClass.getDeclaredAnnotation(MyRequestMapping.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">126</span>             <span style="color: #0000ff;">if</span> (anRequestMapping != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">127</span>                 mappingUrl =<span style="color: #000000;"> anRequestMapping.value();
</span><span style="color: #008080;">128</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">129</span>             <span style="color: #008000;">//</span><span style="color: #008000;">获取当前类所有方法,判断方法上是否有注解</span>
<span style="color: #008080;">130</span>             Method[] declaredMethods =<span style="color: #000000;"> aClass.getDeclaredMethods();
</span><span style="color: #008080;">131</span>             <span style="color: #008000;">/**</span>
<span style="color: #008080;">132</span> <span style="color: #008000;">             * 遍历注解
</span><span style="color: #008080;">133</span>              <span style="color: #008000;">*/</span>
<span style="color: #008080;">134</span>             <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Method method : declaredMethods) {
</span><span style="color: #008080;">135</span>                 MyRequestMapping methodDeclaredAnnotation = method.getDeclaredAnnotation(MyRequestMapping.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">136</span>                 <span style="color: #0000ff;">if</span> (methodDeclaredAnnotation != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">137</span>                     String methodUrl =<span style="color: #000000;"> methodDeclaredAnnotation.value();
</span><span style="color: #008080;">138</span>                     mvcBeanUrl.put(mappingUrl +<span style="color: #000000;"> methodUrl, objValue);
</span><span style="color: #008080;">139</span>                     mvcMethodUrl.put(mappingUrl +<span style="color: #000000;"> methodUrl, method.getName());
</span><span style="color: #008080;">140</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">141</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">142</span> 
<span style="color: #008080;">143</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">144</span> 
<span style="color: #008080;">145</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">146</span> 
<span style="color: #008080;">147</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">148</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> str
</span><span style="color: #008080;">149</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span><span style="color: #008000;"> 类名首字母小写
</span><span style="color: #008080;">150</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">151</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> String lowerFirstCapse(String str) {
</span><span style="color: #008080;">152</span>         <span style="color: #0000ff;">char</span>[] chars =<span style="color: #000000;"> str.toCharArray();
</span><span style="color: #008080;">153</span>         chars[0] += 32<span style="color: #000000;">;
</span><span style="color: #008080;">154</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> String.valueOf(chars);
</span><span style="color: #008080;">155</span> 
<span style="color: #008080;">156</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">157</span> 
<span style="color: #008080;">158</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">159</span> <span style="color: #008000;">     * doPost 请求
</span><span style="color: #008080;">160</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> req
</span><span style="color: #008080;">161</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> resp
</span><span style="color: #008080;">162</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> ServletException
</span><span style="color: #008080;">163</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> IOException
</span><span style="color: #008080;">164</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">165</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">166</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> doPost(HttpServletRequest req, HttpServletResponse resp) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException, IOException {
</span><span style="color: #008080;">167</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">168</span>             <span style="color: #008000;">/**</span>
<span style="color: #008080;">169</span> <span style="color: #008000;">             * 处理请求
</span><span style="color: #008080;">170</span>              <span style="color: #008000;">*/</span>
<span style="color: #008080;">171</span> <span style="color: #000000;">            doServelt(req, resp);
</span><span style="color: #008080;">172</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (NoSuchMethodException e) {
</span><span style="color: #008080;">173</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">174</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InvocationTargetException e) {
</span><span style="color: #008080;">175</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">176</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IllegalAccessException e) {
</span><span style="color: #008080;">177</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">178</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">179</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">180</span> 
<span style="color: #008080;">181</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">182</span> <span style="color: #008000;">     * doServelt 处理请求
</span><span style="color: #008080;">183</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> req
</span><span style="color: #008080;">184</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> resp
</span><span style="color: #008080;">185</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> IOException
</span><span style="color: #008080;">186</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> NoSuchMethodException
</span><span style="color: #008080;">187</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> InvocationTargetException
</span><span style="color: #008080;">188</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> IllegalAccessException
</span><span style="color: #008080;">189</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> ServletException
</span><span style="color: #008080;">190</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">191</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">void</span> doServelt(HttpServletRequest req, HttpServletResponse resp) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException, NoSuchMethodException, InvocationTargetException, IllegalAccessException, ServletException {
</span><span style="color: #008080;">192</span>         <span style="color: #008000;">//</span><span style="color: #008000;">获取请求地址</span>
<span style="color: #008080;">193</span>         String requestUrl =<span style="color: #000000;"> req.getRequestURI();
</span><span style="color: #008080;">194</span>         <span style="color: #008000;">//</span><span style="color: #008000;">查找地址所对应bean</span>
<span style="color: #008080;">195</span>         Object object =<span style="color: #000000;"> mvcBeanUrl.get(requestUrl);
</span><span style="color: #008080;">196</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (Objects.isNull(object)) {
</span><span style="color: #008080;">197</span> <span style="color: #000000;">            resp.getWriter().println(HTTP_NOT_EXIST);
</span><span style="color: #008080;">198</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">199</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">200</span>         <span style="color: #008000;">//</span><span style="color: #008000;">获取请求的方法</span>
<span style="color: #008080;">201</span>         String methodName =<span style="color: #000000;"> mvcMethodUrl.get(requestUrl);
</span><span style="color: #008080;">202</span>         <span style="color: #0000ff;">if</span> (methodName == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">203</span> <span style="color: #000000;">            resp.getWriter().println(METHOD_NOT_EXIST);
</span><span style="color: #008080;">204</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">205</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">206</span> 
<span style="color: #008080;">207</span> 
<span style="color: #008080;">208</span>         <span style="color: #008000;">//</span><span style="color: #008000;">通过构反射执行方法</span>
<span style="color: #008080;">209</span>         Class&lt;?&gt; aClass =<span style="color: #000000;"> object.getClass();
</span><span style="color: #008080;">210</span>         Method method =<span style="color: #000000;"> aClass.getMethod(methodName);
</span><span style="color: #008080;">211</span> 
<span style="color: #008080;">212</span>         String invoke =<span style="color: #000000;"> (String) method.invoke(object);
</span><span style="color: #008080;">213</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 获取后缀信息</span>
<span style="color: #008080;">214</span>         String suffix =<span style="color: #000000;"> POINT_JSP;
</span><span style="color: #008080;">215</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 页面目录地址</span>
<span style="color: #008080;">216</span>         String prefix =<span style="color: #000000;"> LEFT_LINE;
</span><span style="color: #008080;">217</span>         req.getRequestDispatcher(prefix + invoke +<span style="color: #000000;"> suffix).forward(req, resp);
</span><span style="color: #008080;">218</span> 
<span style="color: #008080;">219</span> 
<span style="color: #008080;">220</span> 
<span style="color: #008080;">221</span> 
<span style="color: #008080;">222</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">223</span> 
<span style="color: #008080;">224</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">225</span> <span style="color: #008000;">     * doGet 请求
</span><span style="color: #008080;">226</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> req
</span><span style="color: #008080;">227</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> resp
</span><span style="color: #008080;">228</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> ServletException
</span><span style="color: #008080;">229</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@throws</span><span style="color: #008000;"> IOException
</span><span style="color: #008080;">230</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">231</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">232</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> doGet(HttpServletRequest req, HttpServletResponse resp) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException, IOException {
</span><span style="color: #008080;">233</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.doPost(req, resp);
</span><span style="color: #008080;">234</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">235</span> 
<span style="color: #008080;">236</span> 
<span style="color: #008080;">237</span> }</span></code></pre>

<p><span style="text-decoration: underline; color: #800080; font-size: 18px;"><em><strong>8、测试手写SpringMVC 框架效果类TestMySpringMVC 。</strong></em></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 15px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.tjt.springmvc;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 手写SpringMVC 测试类
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * TestMySpringMVC
</span><span style="color: #008080;"> 7</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 8</span> <span style="color: #000000;">@MyController
</span><span style="color: #008080;"> 9</span> @MyRequestMapping(value = "/tjt"<span style="color: #000000;">)
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestMySpringMVC {
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">14</span> <span style="color: #008000;">     * 测试手写SpringMVC 框架效果 testMyMVC1
</span><span style="color: #008080;">15</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@return</span>
<span style="color: #008080;">16</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">17</span>     @MyRequestMapping("/mvc"<span style="color: #000000;">)
</span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String testMyMVC1() {
</span><span style="color: #008080;">19</span>         System.out.println("he Lie We Live!"<span style="color: #000000;">);
</span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">return</span> "index"<span style="color: #000000;">;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span> }</span></code></pre>

<p><span style="text-decoration: underline; color: #800080;"><em><strong><span style="font-size: 18px;">9、配置Tomcat 用于运行Web 项目。</span></strong></em></span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px;">图5. 配置tomcat</span></strong></span></p>
<p><span style="font-size: 15px;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架4.png" alt="" /></span></p>
<p><span style="text-decoration: underline; color: #800080; font-size: 18px;"><em><strong>10、运行项目，访问测试。</strong></em></span></p>
<p><span style="font-size: 15px;">1、输入正常路径 <span style="color: #ff0000;"><em>http://localhost:8080/tjt/mvc</em></span> 访问测试效果如下：</span></p>
<p style="text-align: center;"><span style="font-size: 14px;"><strong><span style="color: #ff00ff;">图6. 正常路径测试效果</span></strong></span></p>
<p><span style="font-size: 15px;"><img src="./images/手写SpringMVC 框架5.png" alt="" /></span></p>
<p><span style="font-size: 15px;">2、输入非法(不存在)路径 <em><span style="color: #ff0000;">http://localhost:8080/tjt/mvc8</span></em> 访问测试效果如下：</span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px;">图7. 非法路径测试效果</span></strong></span></p>
<p><span style="font-size: 15px;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架6.png" alt="" /></span></p>
<p><span style="font-size: 15px;">3、控制台打印&ldquo;The Lie We Live&rdquo;如下：</span></p>
<p style="text-align: center;"><span style="color: #ff00ff;"><strong><span style="font-size: 14px;">图8. 控制台打印</span></strong></span></p>
<p><span style="font-size: 15px;"><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/手写SpringMVC 框架7.png" alt="" /></span></p>
<p><span style="font-size: 15px;">测试效果如上则证明成功手写SpringMVC 框架，恭喜。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="text-align: center;"><strong><span style="font-size: 18pt; color: #008000;">细嗅蔷薇 心有猛虎</span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 15px;">&nbsp;</span></p>




<p><span style="font-size: 15px;">&nbsp;</span></p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>