<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修ajax_json' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>ajax_json</center></div><div class='banquan'>原文出处:本文由博客园博主下雨天,真好提供。<br/>
原文连接:https://www.cnblogs.com/Dean0731/p/11565150.html</div><br>
    <p align="center"><strong>AJAX</strong><strong>框架</strong><strong>Day1</strong></p>
<p align="left">1、Ajax引言</p>
<p align="left">a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概念 <strong>A</strong><em>synchronous&nbsp;</em><strong>J</strong><em>avascript&nbsp;<strong>A</strong>nd&nbsp;</em><strong>X</strong><em>ML</em> (异步请求 javaScript &nbsp;And&nbsp; XML)</p>
<p align="left"><img src="./images/ajax_json0.png" alt="" /></p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 传统的请求</p>
<ol>
<li>发起传统请求的方式<ol>
<li>地址栏</li>
<li>超级连接</li>
<li>表单</li>
<li>Javascript: location.href 函数</li>
<li><img src="./images/ajax_json1.png" alt="" />&nbsp;</li>
</ol></li>
<li>传统请求的问题<br />
因为传统请求响应的是新的页面（刷新了页面）。所以用户就必须要等待响应结果，才可以进行后续的操作。<br />
用户体验差。</li>


</ol><ol>
<li>基于异步请求的特点<br />
响应的内容不是新的页面，是一个页面的局部，字符串信息，所以用户在使用异步请求的时候，不需要等待响应的，直接就可以进行后续处理。</li>


</ol><ol>
<li>传统请求与异步请求的区别<ol>
<li>响应内容<br />
传统响应的内容：新的页面，刷新页面<br />
异步响应的内容：页面的局部，字符串信息</li>
<li>对于用户的操作<br />
传统的请求：等待响应<br />
异步的请求：不需要等待响应，用户可以直接进行后续的操作</li>



</ol></li>
<li>建议在合适的场景下，都使用异步请求，提高用户的体验</li>


</ol>
<p align="left">2、异步请求的开发</p>
<p align="left">a)&nbsp; &nbsp;异步请求对象的创建&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
　　javascript: XmlHttpRequest对象 xhr<br />
　　Chrome|FF|safari中&nbsp;
XmlHttpRequest<br />
　　var xhr = new XmlHttpRequest();<br />
　　IE(ie5 ie6)中 ActiveXObject<br />
　　var xhr = new ActiveXObject(&ldquo;Microsoft.XMLHTTP&rdquo;);</p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
xhr对象的使用<br />
</p>
<p align="left"><img src="./images/ajax_json2.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">3、用户名检测的案例<br />

 
<img src="./images/ajax_json3.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">
不再跳转</p>
<p align="left"><img src="./images/ajax_json4.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/ajax_json5.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">控制表单是否提交,提交时检测</p>
<p align="left">4、Ajax的开发步骤</p>
<p align="left"><img src="./images/ajax_json6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/ajax_json7.png" alt="" /></p>
<p>&nbsp;</p>
<p><img src="./images/ajax_json8.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
创建异步请求 <br />
IE系&nbsp;
xhr = new ActiveXObject(&ldquo;Microsoft.XMLHTTP&rdquo;);<br />
非IE系 xhr
= new XmlHttpRequest();</p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

 
发送请求&nbsp;&nbsp;&nbsp;
queryString<br />
xhr.open(&ldquo;GET&rdquo;,URL?name=suns&amp;pwd=123&amp;sex=male);<br />
xhr.send(null);<br />
<span style="font-size: 16px;"><strong>xhr.open(&ldquo;POST&rdquo;,url,true(是否使用异步));</strong></span><br /><span style="font-size: 16px;"><strong>
xhr.setRequestHeader(&ldquo;content-type&rdquo;,&rdquo;application/x-www-form-urlencoded&rdquo;);</strong></span></p>
<p align="left"><br />
<span style="font-size: 18px;">为什么设置：模拟表单</span><br />
基本Web的开发 只能使用表单提交数据，使用表单提交数据时默认指定<br />
enctype=&rdquo;application/x-www-form-urlencoded&rdquo;,但是现在使用ajax编程，不再使用<br />
&lt;form标签了也就没有方式提供enctype属性对应的值了。那么这时候需要通过在<br />
请求头中手工设置application/x-www-form-urlencoded来模拟表单。<br />
xhr.send(&ldquo;name=suns&amp;pwd=123&amp;sex=male&rdquo;);,传递数据要加引号,<br />

 
</p>
<p align="left"><img src="./images/ajax_json9.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
监听响应<br />
xhr.onreadystatechange = function(){<br />
&nbsp;&nbsp;&nbsp;
if(xhr.readyState==4&amp;&amp;xhr.status==200){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xhr.responseText<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DOM编程<br />
&nbsp;&nbsp;&nbsp; }<br />
}</p>
<p align="left">d)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
服务器端：<br />
不再进行页面的跳转，而是通过返回字符串信息，完成交互<br />
request作用域 不使用 <br />
底层就是使用Response.getWriter()获取输出流 进行交互<br />
<br />
</p>
<p align="left">5、JSON协议串<br />
JSON协议串，本质上就是一个字符串。<br />

 
</p>
<p align="left"><img src="./images/ajax_json10.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
作用：异构的编程体系中，进行数据的传输，交互。</p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
核心：</p>
<ol>
<li>定义了字符串的格式<ol>
<li>对象形式<img src="./images/ajax_json11.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


</li>
<li>集合形式<img src="./images/ajax_json12.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />

 
</li>
<li>内嵌对象<img src="./images/ajax_json13.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />

 
</li>
<li>Map类型
与 对象的形式一致<img src="./images/ajax_json14.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />

 
</li>
<li>JSON协议解析 多种工具可以自动支持转换<br />
java端：jsonlib&nbsp; gson(Google)&nbsp;&nbsp;
fastjson(ali)&nbsp; jakeson(SpringMVC)<br />
Gson//对象是大括弧,集合小括弧</li>



</ol></li>



</ol>
<p align="left">注意map是当做对象来写,大括弧</p>
<ol>
<li>Gson的基本应用<br />
Gson gson = new Gson();<br />
gson.toJson();<br />

 
</li>
<li>Gson的特殊应用场景</li>
<li><img src="./images/ajax_json15.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>

</li>



</ol>
<p align="left">a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Json字符串的属性名与对象属性名不一致的问题<br />

 
</p>
<p align="left"><img src="./images/ajax_json16.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
解决对象回环问题<br />

 
</p>
<p align="left"><img src="./images/ajax_json17.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<ol>
<li>注解 @Expose<br />
没有使用@Expose的注解的属性 将会被排除，不会被转换<br />

 
<img src="./images/ajax_json18.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />

 
</li>



</ol>
<p align="left">太不灵活,复杂都用gsonbuilder</p>
<p align="left">&nbsp;</p>
<ol>
<li>使用接口回调,<br />
实现一个排除策略的接口（告示Gson 排除的内容）<br />

 
<br />

 
</li>
<li><img src="./images/ajax_json19.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/ajax_json20.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>


</li>



</ol>
<p align="left">可以指定多个排除策略,更灵活</p>
<p align="left">c)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
特殊的日期类型问题</p>
<ol>
<li>实现接口</li>
<li><img src="./images/ajax_json21.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


</li>
<li>注册到GsonBuilder<br />

 
<img src="./images/ajax_json22.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/ajax_json23.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />

 
</li>
<li>JSON转化成JS对象 （浏览器内置，Jquery,Ext..）<br />
浏览器内置对象 ，后续建议使用Jquery<br />
JSON.parse(jsonString) -----&nbsp; js对象<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -----&nbsp; js的数组<br />

 
<img src="./images/ajax_json24.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


<br />
<br />
</li>



</ol>
<p align="left">6、案例 ：应用Ajax技术实现 显示所用用户的信息<br />

 
</p>
<p align="left"><img src="./images/ajax_json25.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="center"><strong>AJAX</strong><strong>框架</strong><strong>Day2</strong></p>
<p align="left">1、SpringMVC对于Ajax的支持</p>
<p align="left">a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
底层整合 原始整合<br />

 
</p>
<p align="left"><img src="./images/ajax_json26.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">b)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
通过@ResponseBody<br />
SpringMVC自动的把对象转换成JSON串，并通过字符输出流输出。<br />
注意：@ResponseBody封装的对象转换JSON的组件为
jackson<br />
环境搭建：引入jackson相关的jar包<br />
开发步骤；<br />

 
</p>
<p align="left"><img src="./images/ajax_json27.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<ol>
<li>使属性名与JSON字符串的key不一致<ol>
<li><img src="./images/ajax_json28.png" alt="" />
<p>&nbsp;</p>
<p>&nbsp;</p>


</li>


</ol></li>
<li>日期类型的格式 <br />
@JsonFormat(pattern="yyyy-MM-dd")</li>
<li>空值类型不转换<br />
@JsonInclude(Include.<em>NON_NULL</em>)</li>
<li>如何忽略某个属性<br />
@JsonIgnore </li>
<li>中文字符集会自动处理</li>



</ol>
<p align="left">原来处理方法<br />

 
</p>
<p align="left"><img src="./images/ajax_json29.png" alt="" /></p>
<p align="left"> 基于实战自动日期处理与空值处理<br />

 
<img src="./images/ajax_json30.png" alt="" /></p>
<p align="left">2、Struts2与Ajax技术集成<br />

 
</p>
<p align="left"><img src="./images/ajax_json31.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left">3、基于Ajax的编程方式思考：<br />
&nbsp;&nbsp;&nbsp; 现在的开发体系中，除了使用一个ajax的ui框架(easyui ext dojo)进行编程之外，剩下所用的应用，在开发时，都应该部分环节中使用ajax.</p>
<p align="left">&nbsp;&nbsp; 1
局部操作 与 服务器端交互<br />
&nbsp;&nbsp; 2 最好结构简单</p>
<p align="left"><img src="./images/ajax_json32.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p align="left"><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
 
<br />
<br />
<br />
</p>
<p align="left">&nbsp;</p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>