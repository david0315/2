<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Struts2  常用标签' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Struts2  常用标签</center></div><div class='banquan'>原文出处:本文由博客园博主chenhongyong提供。<br/>
原文连接:https://www.cnblogs.com/chy18883701161/p/11481139.html</div><br>
    <p>&nbsp;</p>
<p>Struts中的标签可分为2类：</p>
<ul>
<li>通用|普通标签&nbsp; &nbsp; &nbsp;包括流程控制标签、数据访问标签</li>
<li>UI标签&nbsp; &nbsp; 包括表单标签、非表单标签</li>
</ul>
<p>&nbsp;</p>
<p>Struts2中的标签均带有前缀s。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>常用的流程控制标签</h3>
<h4>1、if-elseif-else标签&nbsp; &nbsp; &nbsp;条件判断</h4>
<src class="cnblogs_code">
<pre><code>&lt;s:set var="score" value="95" scope="request" /&gt;

&lt;s:<span style="color: #0000ff;">if</span> test="#request.score&gt;=80"&gt;优秀&lt;/s:<span style="color: #0000ff;">if</span>&gt;
&lt;s:elseif test="#request.score&gt;=60"&gt;及格&lt;/s:elseif&gt;
&lt;s:<span style="color: #0000ff;">else</span>&gt;不及格&lt;/s:<span style="color: #0000ff;">else</span>&gt;</code></pre>

<p>test指定条件，满足条件时，显示标签体的内容。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>2、iterator标签&nbsp; &nbsp;迭代Array、List、Map</h4>
<src class="cnblogs_code">
<pre><code>&lt;%<span style="color: #000000;">
    List</span>&lt;User&gt; list=<span style="color: #0000ff;">new</span> ArrayList&lt;&gt;<span style="color: #000000;">();
    list.add(</span><span style="color: #0000ff;">new</span> User("刘备", 28<span style="color: #000000;">));
    list.add(</span><span style="color: #0000ff;">new</span> User("关羽", 25<span style="color: #000000;">));
    list.add(</span><span style="color: #0000ff;">new</span> User("张飞", 18<span style="color: #000000;">));
    request.setAttribute(</span>"list"<span style="color: #000000;">,list);
</span>%&gt;

&lt;table&gt;
    &lt;s:iterator var="user" value="#request.list"&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;s:property value="#user.name" /&gt;&lt;/td&gt;
            &lt;td&gt;&lt;s:property value="#user.age" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/s:iterator&gt;
&lt;/table&gt;</code></pre>

<p>var指定临时变量，代表一项，value指定Array | List | Map 。</p>
<p>&nbsp;</p>
<p>在标签体中可直接使用临时变量。但不能这样访问：</p>
<src class="cnblogs_code">
<pre><code>&lt;td&gt;user.name&lt;/td&gt;
&lt;td&gt;#user.name&lt;/td&gt;
&lt;td&gt;%{#user.name}&lt;/td&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>常用的数据访问标签</h3>
<src class="cnblogs_code">
<pre><code>&lt;s:debug /&gt;

&lt;s:set var="group" value="vip" scope="session" /&gt;

&lt;s:property value="#request.list" /&gt;

&lt;s:include value="xxx.jsp" /&gt;</code></pre>

<p>&nbsp;</p>
<p>&lt;s:debug&gt;会在页面上生成一个调试链接，可查看ValueStack中的数据。</p>
<p>&lt;s:set&gt;用于向某个域中存入数据，相当于setAttribute()，var指定参数的name，value指定参数的value。</p>
<p>&lt;s:property&gt;用于输出ValueSatck中的数据，value指定要输出的数据，只能使用OGNL表达式，不能使用常量，比如value="ok&lsquo;"是无效的。</p>
<p>&lt;s:include&gt;用于包含其他的JSP页面。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>常用的表单标签</h3>
<src class="cnblogs_code">
<pre><code>&lt;s:form action="" method=""&gt;
    
    &lt;s:textfield name="user" value="" label="用户名" /&gt;
    &lt;s:password name="pwd" value="" label="密码" /&gt;
    &lt;s:textarea name="comment" rows="10" cols="40" label="评论" value="" /&gt;

    &lt;s:radio name="gender" list="#{'male':'男','female':'女'}" label="gender" /&gt;

    &lt;s:checkboxlist name="hobby" list="#{'basketball':'篮球','running':'跑步','swimming':'游泳'}" label="爱好" /&gt;

    &lt;s:checkbox name="hobby" value="basketball" label="篮球" /&gt;
    &lt;s:checkbox name="hobby" value="running" label="跑步" /&gt;
    &lt;s:checkbox name="hobby" value="swimming" label="游泳" /&gt;

    &lt;s:select name="" list="#{'zk':'专科','bk':'本科','ss':'硕士','bs':'博士','qt':'其它'}" label="学历" /&gt;
    &lt;s:select name="" list="#{'zk':'专科','bk':'本科','ss':'硕士','bs':'博士','qt':'其它'}" label="学历" headerKey="" headerValue="--请选择--" /&gt;

    &lt;s:file name="" /&gt;

    &lt;s:hidden name="" value="" /&gt;

    &lt;s:submit value="提交" /&gt;
    &lt;s:reset value="重置" /&gt;

&lt;/s:form&gt;</code></pre>

<p>&nbsp;</p>
<p>&lt;s:textarea&gt;的默认值是写在value中的，这点与html的文本域不同。</p>
<p>&nbsp;</p>
<p>list属性可以写成List，也可以写成Map。写成List时，value属性值、选项文字都是List的元素；写成Map时，value属性值是Map的key，选项文字是Map的value。</p>
<p>&nbsp;</p>
<p>可以用&lt;s:checkboxlist&gt;组合一组复选框，以数组形式提交。</p>
<p>也可以逐个写&lt;s:checkbox&gt;，各自提交。</p>
<pre><code></code></pre>
<src class="cnblogs_code">
<pre><code> &lt;s:select name="" list="#{'zk':'专科','bk':'本科','ss':'硕士','bs':'博士','qt':'其它'}" label="学历" headerKey="" headerValue="--请选择--" /&gt;</code></pre>

<p>header即下拉列表中显示的选项（第一项），headerKey指定第一项的value,headerValue指定第一项的显示文字。</p>
<p>&nbsp;</p>
<p>Struts2只提供了常用的表单标签，没有提供日期选择器、颜色选择器等标签。</p>
<p>Struts的表单标签可以与html表单标签混合使用。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>命名空间</h3>
<p>如果struts.xml中设置命名空间：</p>
<src class="cnblogs_code">
<pre><code>    &lt;<span style="color: #0000ff;">package</span> name="action" <span style="color: #ff0000;">namespace="/action"</span> <span style="color: #0000ff;">extends</span>="struts-default"&gt;
        &lt;action name="LoginAction" <span style="color: #0000ff;">class</span>="action.LoginAction"&gt;
            &lt;result name="success"&gt;/index.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/login.jsp&lt;/result&gt;
        &lt;/action&gt;

    &lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<p>可以这样写action：</p>
<src class="cnblogs_code">
<pre><code>&lt;s:form action="LoginAction" <span style="color: #ff0000;">namespace="/action"</span> &gt;
    
&lt;/s:form&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>不提倡这样写：</p>
<src class="cnblogs_code">
<pre><code>&lt;s:form action="action/LoginAction"&gt;
    
&lt;/s:form&gt;</code></pre>

<p>第一次提交，地址栏是action/LoginAction;</p>
<p>如果填写有问题，转回此页面重新填写，点击提交，地址栏变为action/action/LoginAction!</p>
<p>如果填写还有问题，再次转回此页面重新填写，点击提交，地址栏变为action/action/action/LoginAction!</p>
<p>......</p>
<p>如果只提交一次，没有问题；如果重复提交多次，会有一点小问题。</p>
<p>只是地址栏变了，其实仍是action/LoginAction处理的。前一种更让人放心。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>可以给表单设置主题样式：</h3>
<src class="cnblogs_code">
<pre><code>&lt;s:form action="" theme="xhtml"&gt;

&lt;/s:form&gt;</code></pre>

<p>主题默认为xhtml，每个表单元素都显示为块级，前后自动换行。</p>
<p>尽量用xhtml，其他自带的主题不好控制效果。在xhtml主题的基础上，可以使用cssClass、cssStyle，通过css样式来改变界面。</p>
<p>&nbsp;</p>
<p>其实Struts2标签不常用，因为不好控制样式，一般都是用html标签。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>表单元素常设置的属性：</h3>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #000000;">s:textfield 
        title</span>="ok"<span style="color: #000000;">
        readonly</span>="true"<span style="color: #000000;"> 
        disabled</span>="true"<span style="color: #000000;">
        required</span>="true"<span style="color: #000000;">
        cssClass</span>="red"<span style="color: #000000;">
        cssStyle</span>="color: red;font-size: 18px;"<br />　　　　 onclick=""<br />/&gt;</code></pre>

<p>title指定提示文字，鼠标移上去时会显示提示文字。</p>
<p>readonly、disabled、required的设置方式和html的不同。required为true，提交时会检查是否已填写此字段，未填写会提示。</p>
<p>cssClass指定要引用的类选择器，可以引用Struts2内置的样式，也可以引用自定义的CSS样式。</p>
<p>cssStyle写行内样式。</p>
<p>可以使用事件属性。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>数据回显</h3>
<src class="cnblogs_code">
<pre><code>&lt;action name="LoginAction" <span style="color: #0000ff;">class</span>="action.LoginAction"&gt;
      &lt;result name="success"&gt;/index.jsp&lt;/result&gt;
      &lt;result name="error"&gt;/login.jsp&lt;/result&gt;
&lt;/action&gt;</code></pre>

<p>提交的表单通不过检查时，通常会转发给表单页面重新填写。</p>
<p>html标签会丢失所有的表单数据，需要重新填一遍。Struts2标签仍保留表单数据，会自动填写上次提交的表单。</p>
<p>&nbsp;</p>
<p>数据回显的原理：Action处理完业务，调用表单页面，此时ValueStack还没被销毁，会自动调用getter方法取出ValueStack中的表单数据，填写表单。</p>
<p>需要给表单字段对应的属性设置getter方法，否则不能回显。</p>
<p>&nbsp;</p>
<p>&lt;s:password&gt;密码字段默认不会回显，如需回显，需要设置showPassword属性为true：</p>
<src class="cnblogs_code">
<pre><code>&lt;s:password name="pwd" showPassword="true"/&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>防止重复提交表单</h3>
<p>刷新页面可能会重新提交表单，造成表单的重复提交。Struts2可以防止表单的重复提交。</p>
<p>&nbsp;</p>
<p>在表单中增加&lt;s:token /&gt;元素：</p>
<src class="cnblogs_code">
<pre><code>&lt;s:form action="LoginAction"&gt;
    
    
    <span style="color: #ff0000;">&lt;s:token /&gt;</span>
    &lt;s:submit value="提交" /&gt;
&lt;/s:form&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;在处理此表单的Action的配置中使用token拦截器：</p>
<src class="cnblogs_code">
<pre><code>&lt;action name="LoginAction" <span style="color: #0000ff;">class</span>="action.LoginAction"&gt;
            <span style="color: #ff0000;">&lt;interceptor-ref name="defaultStack"&gt;&lt;/interceptor-ref&gt;
            &lt;interceptor-ref name="token"&gt;&lt;/interceptor-ref&gt;</span>
            
            &lt;result name="success"&gt;/index.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/login.jsp&lt;/result&gt;
&lt;/action&gt;</code></pre>

<p>在struts.xml中，如果此Action没配置拦截器，默认会使用struts-default.xml中配置的默认拦截器栈。</p>
<p>默认拦截器栈是对请求进行常规的预处理操作，一般都需要。</p>
<p>如果我们在struts.xml中给此Action配置了拦截器，就不会再使用默认的拦截器栈，所以我们需要显式引用默认的拦截器栈。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>原理：</p>
<p>&lt;s:token /&gt;本质是在表单中添加一个name="struts.token"的隐藏域，设置一个唯一标识此次表单提交的value，</p>
<p>token拦截器取出这个隐藏域的参数，和session中的struts.token比较，value相同就是重复提交，直接pass调本次请求，不再调用action来处理；</p>
<p>value值不同，说明不是重复提交，会将这个srtuts.token值放到session中，覆盖原有的值，并调用action来处理请求。</p>
<p>&nbsp;</p>
<p>如果使用了token拦截器，但一次都没有使用&lt;s:token /&gt;标签，提交表单后，token拦截器获取的value为null，session中的value也是null，相同，便不会调用action来处理，相当于提交不了表单。</p>
<p>没有使用&lt;s:token /&gt;标签，就不要使用token拦截器。</p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>