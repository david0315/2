<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修全网最通俗易懂的【短链接】入门' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>全网最通俗易懂的【短链接】入门</center></div><div class='banquan'>原文出处:本文由博客园博主Java3y提供。<br/>
原文连接:https://www.cnblogs.com/Java3y/p/11976312.html</div><br>
    <h2 id="前言">前言</h2>
<blockquote>
<p>只有光头才能变强。</p>
</blockquote>
<blockquote>
<p>文本已收录至我的GitHub仓库，欢迎Star：<a href="https://github.com/ZhongFuCheng3y/3y" class="uri">https://github.com/ZhongFuCheng3y/3y</a></p>
</blockquote>
<p>最近接了一个需求，涉及到了<strong>短链接</strong>的相关的知识，于是去查阅了相关的资料，在这里给大家整理分享一下。</p>
<p><a href="https://www.aliyun.com/minisite/goods?userCode=pfn5xpli&amp;share_source=copy_link"><strong>我帮阿里云推广服务器89/年，229/3年，买来送自己，送女朋友马上过年再合适不过了，买了搭建个项目给面试官看也香，还可以熟悉技术栈，(老用户用家人账号买就好了，我用我女朋友的😂）。扫码或者点击购买</strong></a></p>
<p><img src="./images/全网最通俗易懂的【短链接】入门0.png" /></p>
<p><a href="https://mp.weixin.qq.com/s/MQqasjPs4Y-OCjQLuFj4ew"><strong>搭建教程，从0开始一步一步带你搭建</strong>😂</a></p>
<h2 id="一短链接介绍">一、短链接介绍</h2>
<p>举个例子，现在我的GitHub的地址是这个：<code>https://github.com/ZhongFuCheng3y/3y</code> (36个字符)</p>
<p>我通过百度的短链接服务可以将上面的地址转成<code>https://dwz.cn/LwlrfG4j</code>(23个字符)</p>
<p><img src="./images/全网最通俗易懂的【短链接】入门1.png" alt="转短链接" /></p>
<p>那我为什么要将原有的URL转成<strong>较短</strong>的链接呢？比如我们发<strong>短信</strong>提醒用户去XXX，XXX有优惠活动，在文案上往往会带有一个链接进行跳转，方便用户快速去到对应的活动落地页。</p>
<p>而短信的发送是需要成本的，短信的成本主要有两方面组成：</p>
<ol>
<li>发送的人数（发的人越多，自然短信的花费就越大，这个我就不解释了）</li>
<li>短信发送的字数（比如，文案总字数超过70个字，那就算两条短信计费，超过140个字就算三条短信计费）</li>
</ol>
<p>所以在发送短信给用户时：要么就投放更加精准优质的用户，以便控制好发送的数量，要么就尽可能控制文案的字数。</p>
<p>显然，如果在短信上配上普通的URL，那真正的文案可写的字数就没多少了。于是我们可以发现，各大公司的短信推送的URL都是<strong>短链接</strong>。</p>
<p><img src="./images/全网最通俗易懂的【短链接】入门2.png" alt="短链接案例之一" /></p>
<p>比如在一些平台发布消息时会<strong>限制字数</strong>，如果我们的发的URL过长就很容易就被限制住了：</p>
<p><img src="./images/全网最通俗易懂的【短链接】入门3.png" alt="限制字数" /></p>
<blockquote>
<p>使用短链接的好处：<strong>短、字符少、美观、便于发布、传播</strong>。</p>
</blockquote>
<h2 id="二短链接它是怎么干的呢">二、短链接它是怎么干的呢？</h2>
<p>我们先回到生成好的短链上<code>https://dwz.cn/LwlrfG4j</code></p>
<p>虽然这个链接看起来有点奇怪，但他终究还是一个链接，从URL的特征我们可以分出：</p>
<ul>
<li><code>dwz.cn</code>是域名</li>
<li><code>LwlrfG4j</code>是参数</li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门4.png" alt="域名" /></p>
<p>我们在浏览器请求一下短链接看看是什么情况：</p>
<p><img src="./images/全网最通俗易懂的【短链接】入门5.png" alt="302跳转" /></p>
<p>短链接的原理其实就是：</p>
<ul>
<li>将长链接通过一定的<code>手段</code>生成一个短链接</li>
<li>访问短链接时实际访问的是<strong>短链接服务器</strong>，然后根据短链接的参数<strong>找回</strong>对应的长链接</li>
<li>重定向跳转</li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门6.png" alt="大致原理图" /></p>
<h3 id="核心的要解决的问题">2.1 核心的要解决的问题</h3>
<p>通过上面的分析我们可以知道的是，我们实际核心要做的是怎么从<code>LwlrfG4j</code>类似这样的参数找到对应的完整URL：<code>https://github.com/ZhongFuCheng3y/3y</code></p>
<p>脑子第一时间想到的是：能不能通过一个压缩算法将<code>https://github.com/ZhongFuCheng3y/3y</code>压缩更小的字符？</p>
<p>显然，不能，压缩算法大多数都是针对<strong>大文本</strong>才奏效，本身的URL也不见得有多大...压缩出来肯定比原来的URL还大。</p>
<p>脑子第二时间想到的是：能不能用Hash算法？<strong>还是不能</strong>，用Hash存在<strong>哈希碰撞</strong>的问题</p>
<ul>
<li>什么是哈希碰撞？两个不相同的字符串(值)进行Hash操作后，得到的哈希值相同。</li>
<li>这就意味着，两个完全不同的长链得到的哈希值一模一样，而我的<strong>短链是依赖哈希值去找到长链的</strong>(此时一个短链对应多个长链，这不合理)。</li>
</ul>
<p>脑子第三时间想到的是？<strong>脑子想不到了</strong>。</p>
<p>现在业内用得比较多的是<strong>发号器</strong>（ID自增)+<strong>62进制编码</strong>：</p>
<ul>
<li>比如，我将<code>https://github.com/ZhongFuCheng3y/3y</code>看作是<code>10000</code>，然后将<code>10000</code>进行62进制编码得到的结果是：<code>2Bi</code></li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门7.png" /></p>
<p>那我的短链URL就可以弄成<code>https://3y.cn/2Bi</code>，其中<code>3y.cn</code>是域名，<code>2Bi</code>是经过62进制转换后的参数。</p>
<p>为什么要用62进制转换？64进制转换倒是听得多了</p>
<ul>
<li>62进制转换是因为62进制转换后<strong>只含</strong>数字+小写+大写字母。而64进制转换会含有<code>/</code>,<code>+</code>这样的符号（不符合正常URL的字符）</li>
<li>10进制转62进制可以<strong>缩短</strong>字符，如果我们要6位字符的话，已经有560亿个组合了。</li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门8.png" alt="6位字符" /></p>
<p>总结：</p>
<ul>
<li>ID自增后，转成62进制，在DB保存映射关系，生成短链接</li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门9.png" alt="短链接过程" /></p>
<h3 id="三短信的链接直接跳转到app">三、短信的链接直接跳转到APP</h3>
<blockquote>
<p>以下内容来源：<a href="https://sq.163yun.com/blog/article/158315832059072512" class="uri">https://sq.163yun.com/blog/article/158315832059072512</a> ，作者：西西吹雪</p>
</blockquote>
<p>综合起来就是：</p>
<ul>
<li>通过 Deep Links（iOS 则是Universal Links），可以实现点击短信链接直接唤起 App；</li>
<li>如果系统因为各种原因不支持 Deep Links，备选方案是 <code>intent filter</code>，不过会出弹框让用户选择用哪个 App 打开链接；</li>
<li>如果用户没有选择我们的 App 而是选择了浏览器打开，则通过 <code>自定义 scheme</code> 尝试唤起 App；</li>
<li>由于技术和成本问题，我们忽略不支持 <code>自定义 scheme</code> 的浏览器。</li>
</ul>
<p><img src="./images/全网最通俗易懂的【短链接】入门10.png" alt="短信链接唤醒APP" /></p>
<h2 id="最后">最后</h2>
<p>这篇文章主要是简单了解一下短链接的相关知识，一个完备的短链服务肯定还要考虑更多的事，这里我就不展开了（毕竟我也没真正写过，可以在下方的链接继续学习）~</p>
<p>更多资料查阅：</p>
<ul>
<li><a href="https://www.zhihu.com/question/29270034/answer/46446911" class="uri">https://www.zhihu.com/question/29270034/answer/46446911</a></li>
<li><a href="https://hufangyun.com/2017/short-url/" class="uri">https://hufangyun.com/2017/short-url/</a></li>
<li><a href="https://blog.csdn.net/c10WTiybQ1Ye3/article/details/78098840" class="uri">https://blog.csdn.net/c10WTiybQ1Ye3/article/details/78098840</a></li>
</ul>
<blockquote>
<p><strong>本已收录至我的GitHub精选文章，欢迎Star</strong>：<a href="https://github.com/ZhongFuCheng3y/3y" class="uri">https://github.com/ZhongFuCheng3y/3y</a></p>
<p>乐于输出<strong>干货</strong>的Java技术公众号：<strong>Java3y</strong>。公众号内<strong>有300多篇原创</strong>技术文章、海量视频资源、精美脑图，<strong>关注即可获取！</strong></p>
</blockquote>
<p><img src="./images/全网最通俗易懂的【短链接】入门11.png" alt="转发到朋友圈是对我最大的支持！" /></p>
<p>非常感谢<strong>人才</strong>们能看到这里，如果这个文章写得还不错，觉得「三歪」我<strong>有点东西</strong>的话 <strong>求点赞</strong> <strong>求关注️</strong> <strong>求分享👥</strong> <strong>求留言💬</strong> 对暖男我来说真的 <strong>非常有用</strong>！！！</p>
<p>创作不易，各位的支持和认可，就是我创作的最大动力，我们下篇文章见！</p>


</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>