<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Struts2   struts.xml配置' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Struts2   struts.xml配置</center></div><div class='banquan'>原文出处:本文由博客园博主chenhongyong提供。<br/>
原文连接:https://www.cnblogs.com/chy18883701161/p/11454591.html</div><br>
    <p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code>&lt;struts&gt;
    &lt;<span style="color: #0000ff;">package</span> name="action" namespace="/" <span style="color: #0000ff;">extends</span>="struts-default"&gt;
        &lt;action name="LoginAction" <span style="color: #0000ff;">class</span>="action.LoginAction" method="execute"&gt;
            &lt;result name="teacher"&gt;/teacher.jsp&lt;/result&gt;
            &lt;result name="student"&gt;/student.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/error.jsp&lt;/result&gt;
        &lt;/action&gt;
    &lt;/<span style="color: #0000ff;">package</span>&gt;

    &lt;include file=""&gt;&lt;/include&gt;
&lt;/struts&gt;</code></pre>

<p>&nbsp;</p>
<p>当xml文件较大时，可以使用多个xml文件来配置，比如在每个包下使用一个xml来配置这个包的action，在struts.xml中使用&lt;include&gt;把其他xml配置文件包含进来即可。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>配置命名空间</h3>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #0000ff;">package</span> name="action" <span style="color: #ff0000;">namespace="/"</span> <span style="color: #0000ff;">extends</span>="struts-default"&gt;
        
&lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<p>命名空间常配置为 /&nbsp; 或&nbsp; /包名。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>配置为 / 时，表示这个包下的action都在这个WebApp的命名空间中，可直接通过action的name来引用。</p>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #0000ff;">package</span> name="action" <span style="color: #ff0000;">namespace="/"</span> <span style="color: #0000ff;">extends</span>="struts-default"&gt;
        &lt;action name="<span style="color: #ff0000;">LoginAction</span>" <span style="color: #0000ff;">class</span>="action.LoginAction" method="execute"&gt;
            &lt;result name="teacher"&gt;/teacher.jsp&lt;/result&gt;
            &lt;result name="student"&gt;/student.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/error.jsp&lt;/result&gt;
        &lt;/action&gt;
    &lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<src class="cnblogs_code">
<src class="cnblogs_code">
<pre><code>&lt;form action="<span style="color: #ff0000;">LoginAction</span>"&gt;  <span style="color: #ff0000;"> &lt;!--直接通过action的name来引用--&gt;</span>
 
&lt;/form&gt;</code></pre>

<p>&nbsp;</p>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>配置为 /xxx&nbsp; 时，表示这个包下的action都在命名空间xxx中，要通过命名空间来引用。</p>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #0000ff;">package</span> name="action" namespace="<span style="color: #ff0000;">/action</span>" <span style="color: #0000ff;">extends</span>="struts-default"&gt;   <span style="color: #ff0000;">&lt;!--指定命名空间是此WebApp下的action--&gt;</span>
        &lt;action name="LoginAction" <span style="color: #0000ff;">class</span>="action.LoginAction" method="execute"&gt;
            &lt;result name="teacher"&gt;/teacher.jsp&lt;/result&gt;
            &lt;result name="student"&gt;/student.jsp&lt;/result&gt;
            &lt;result name="error"&gt;/error.jsp&lt;/result&gt;
        &lt;/action&gt;
    &lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<src class="cnblogs_code">
<pre><code>&lt;form action="<span style="color: #ff0000;">action/LoginAction</span>"&gt;   <span style="color: #ff0000;">&lt;!--需通过命名空间action来引用--&gt;</span>
 
&lt;/form&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>注意最前面没有 /&nbsp;</p>
<src class="cnblogs_code">
<pre><code>&lt;form action="/LoginAction"&gt;  

&lt;/form&gt;</code></pre>

<p>最前面的/表示域名根目录（localhost），不是表示当前WebApp的根目录。这种写法是定位到&nbsp; &nbsp;http://localhost:8080/LoginAction</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>设置处理请求的方法</h3>
<src class="cnblogs_code">
<pre><code>&lt;package name="action" namespace="/action" extends="struts-default"&gt;<br />    &lt;action name="loginAction" class="action.LoginAction" <span style="color: #ff0000;">method="exe"</span>&gt;<br />    &lt;/action&gt;<br />&lt;/package&gt;</code></pre>

<p>可在&lt;action&gt;中使用method属性来设置。缺省时默认为execute。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>配置结果处理</h3>
<src class="cnblogs_code">
<pre><code>&lt;package name="action" namespace="/" extends="struts-default"&gt;<br />    &lt;global-results&gt;<br />        &lt;result name="" type=""&gt;&lt;/result&gt;<br />        &lt;result name="" type=""&gt;&lt;/result&gt;<br />    &lt;/global-results&gt;<br /><br />    &lt;action name="" class="" method=""&gt;<br />        &lt;result name="" type=""&gt;&lt;/result&gt;<br />        &lt;result name="" type=""&gt;&lt;/result&gt;<br />    &lt;/action&gt;<br /><br />&lt;/package&gt;</code></pre>

<p>可在当前action中配置当前action的，也可以在&lt;global-results&gt;配置整个包的。</p>
<p>&lt;result&gt;的name指定逻辑视图名（返回的字符串），元素体指定物理视图名，type指定视图处理方式。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>视图处理方式可以使用type属性来设置，缺省时默认为dispatcher，也可以在struts-default.xml中设置全局的：将default属性设置为true即可</h4>
<src class="cnblogs_code">
<pre><code>&lt;result-types&gt;
            &lt;result-type name="<span style="color: #ff0000;">chain</span>" <span style="color: #0000ff;">class</span>="com.opensymphony.xwork2.ActionChainResult"/&gt;
            &lt;result-type name="<span style="color: #ff0000;">dispatcher</span>" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.ServletDispatcherResult" <span style="color: #ff0000;">default="true"</span>/&gt;
            &lt;result-type name="freemarker" <span style="color: #0000ff;">class</span>="org.apache.struts2.views.freemarker.FreemarkerResult"/&gt;
            &lt;result-type name="httpheader" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.HttpHeaderResult"/&gt;
            &lt;result-type name="<span style="color: #ff0000;">redirect</span>" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.ServletRedirectResult"/&gt;
            &lt;result-type name="<span style="color: #ff0000;">redirectAction</span>" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.ServletActionRedirectResult"/&gt;
            &lt;result-type name="<span style="color: #ff0000;">stream</span>" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.StreamResult"/&gt;
            &lt;result-type name="velocity" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.VelocityResult"/&gt;
            &lt;result-type name="xslt" <span style="color: #0000ff;">class</span>="org.apache.struts2.views.xslt.XSLTResult"/&gt;
            &lt;result-type name="<span style="color: #ff0000;">plainText</span>" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.PlainTextResult" /&gt;
            &lt;result-type name="postback" <span style="color: #0000ff;">class</span>="org.apache.struts2.result.PostbackResult" /&gt;
        &lt;/result-types&gt;</code></pre>

<p>&nbsp;</p>
<h4>&nbsp;</h4>
<h4>chain&nbsp; &nbsp; 链式处理，由下一个action接着处理</h4>
<src class="cnblogs_code">
<pre><code>&lt;result name="" type="chain"&gt;
                &lt;param name="actionName"&gt;LoginAction&lt;/param&gt;
                &lt;param name="namespace"&gt;/&lt;/param&gt;
          &lt;!--  &lt;param name="namespace"&gt;/action&lt;/param&gt;    --&gt;
&lt;/result&gt;</code></pre>

<p>需要用2个&lt;param&gt;指定下一个action的信息，actionName指定下一个Action的name，namespace指定下一个action的namespce（一般是 / 或者 /包名 ）。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>dispatcher&nbsp; &nbsp;转发给jsp，由jsp来响应。默认值。</h4>
<src class="cnblogs_code">
<pre><code>&lt;result name="" type="dispatcher"&gt;/xxx.jsp&lt;/result&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>redirect&nbsp; &nbsp; &nbsp;重定向到新的url，可以是任何类型的url。直接写url即可。</h4>
<src class="cnblogs_code">
<pre><code>&lt;result name="" type="redirect"&gt;/XxxAction&lt;/result&gt;
&lt;result name="" type="redirect"&gt;/xxx.jsp&lt;/result&gt;</code></pre>

<p>重定向到action：命名空间是/，写为/action名；命名空间是/xxx，写为/xxx/action名。</p>
<p>用redirect重定向到action，IDEA会报红，但能通过编译，效果正常。建议用redirectAction，更专业。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>redirectAction&nbsp; &nbsp;重定向到另一个action</h4>
<src class="cnblogs_code">
<pre><code>&lt;result name="" type="redirectAction"&gt;
                &lt;param name="actionName"&gt;LoginAction&lt;/param&gt;
                &lt;param name="namespace"&gt;/&lt;/param&gt;
          &lt;!--  &lt;param name="namespace"&gt;/action&lt;/param&gt;    --&gt;
&lt;/result&gt;</code></pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>plainText&nbsp; &nbsp; 显示指定页面的源码</h4>
<src class="cnblogs_code">
<pre><code>&lt;result name="" type="plainText"&gt;/xxx.jsp&lt;/result&gt;</code></pre>

<p>只能显示jsp、html等的源码，不能显示action的源码。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>stream&nbsp; &nbsp;向浏览器返回一个InputStream，一般用于文件下载</h4>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>设置拦截器</h3>
<src class="cnblogs_code">
<pre><code>&lt;<span style="color: #0000ff;">package</span> name="action" namespace="/action" <span style="color: #0000ff;">extends</span>="struts-default"&gt;
       <span style="color: #ff0000;"> &lt;interceptors&gt;
            &lt;interceptor name="" class=""&gt;&lt;/interceptor&gt;
            &lt;interceptor-stack name=""&gt;
                &lt;interceptor-ref name="" /&gt;
                &lt;interceptor-ref name="" /&gt;
            &lt;/interceptor-stack&gt;
        &lt;/interceptors&gt;</span>

        <span style="color: #ff0000;">&lt;default-interceptor-ref name=""&gt;&lt;/default-interceptor-ref&gt;</span>

        &lt;action name="loginAction" <span style="color: #0000ff;">class</span>="action.LoginAction" method="exe"&gt;
            <span style="color: #ff0000;">&lt;interceptor-ref name=""&gt;&lt;/interceptor-ref&gt;
            &lt;interceptor-ref name=""&gt;&lt;/interceptor-ref&gt;</span>
            
        &lt;/action&gt;
    &lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<p>&nbsp;</p>
<p>在&lt;interceptors&gt;中注册拦截器、拦截器栈。</p>
<p>&lt;interceptor&gt;注册一个拦截器，name指定拦截器名，class指定拦截器对应的java类。</p>
<p>&lt;interceptor-stack&gt;注册一个拦截器栈，name指定拦截器栈的名字。&lt;interceptor-ref /&gt;指定要引用的拦截器。</p>
<p>&nbsp;</p>
<p>可以在&lt;action&gt;中使用&lt;interceptor-ref name=""&gt;&lt;/interceptor-ref&gt;设置当前&lt;action&gt;要使用的拦截器、拦截器栈，一个&lt;interceptor-ref name=""&gt;&lt;/interceptor-ref&gt;引用一个拦截器、拦截器栈，可同时使用多个&lt;interceptor-ref name=""&gt;&lt;/interceptor-ref&gt;。</p>
<p>也可在&lt;default-interceptor-ref name=""&gt;&lt;/default-interceptor-ref&gt;中设置整个包的默认拦截器、拦截器栈，对此包下所有的action都有效。</p>
<p>引用的拦截器、拦截器栈可以是自己定义的，也可以是structs-default.xml中自带的。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&lt;package&gt;的子元素有一定的顺序，&lt;action&gt;要放到最后。</p>
<p>&lt;action&gt;中的子元素也有一定的顺序，不能随意放置。</p>
<p>&nbsp;</p>
<p>可仿照structs-default.xml进行配置。</p>
<p>可直接对&nbsp;<span class="cnblogs_code"><span style="color: #0000ff;">extends</span>="struts-default"</span>&nbsp;中的struts-default，Ctrl+B找到struts-default.xml，也可以在struts2-core.jar的根目录下找。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>Struts2配置中的默认值</h3>
<src class="cnblogs_code">
<pre><code>    &lt;<span style="color: #0000ff;">package</span> name="action" namespace="/" <span style="color: #0000ff;">extends</span>="struts-default"&gt;
        &lt;<span style="color: #0000ff;">default</span>-interceptor-ref name=""&gt;&lt;/<span style="color: #0000ff;">default</span>-interceptor-ref&gt;
        &lt;<span style="color: #0000ff;">default</span>-action-ref name=""&gt;&lt;/<span style="color: #0000ff;">default</span>-action-ref&gt;
        &lt;<span style="color: #0000ff;">default</span>-<span style="color: #0000ff;">class</span>-ref <span style="color: #0000ff;">class</span>=""&gt;&lt;/<span style="color: #0000ff;">default</span>-<span style="color: #0000ff;">class</span>-ref&gt;
    
        &lt;action name="" <span style="color: #0000ff;">class</span>="" method=""&gt;
            &lt;result name="" type=""&gt;&lt;/result&gt;
            &lt;result name="" type=""&gt;&lt;/result&gt;
        &lt;/action&gt;

    &lt;/<span style="color: #0000ff;">package</span>&gt;</code></pre>

<p>&nbsp;</p>
<p>&lt;default-interceptor-ref name=""&gt;&lt;/default-interceptor-ref&gt;配置默认的拦截器、拦截器栈，name指定要引用的拦截器、拦截器栈。</p>
<p>&lt;default-action-ref name=""&gt;&lt;/default-action-ref&gt;配置默认action，name指定要引用的action的name，当命名空间中没有指定的action时，会调用默认action来处理。</p>
<p>&lt;default-class-ref class=""&gt;&lt;/default-class-ref&gt;配置action的默认处理类，class指定一个action类，当action缺省class属性时，会设置为默认的Class。</p>
<p>&nbsp;</p>
<p>&lt;action&gt;缺省method属性时，默认为execute；</p>
<p>&lt;result&gt;缺省name属性时，默认为success；缺省type属性时，默认为dispatcher（转发）。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>struts-default.xml中的默认配置：</p>
<src class="cnblogs_code">
<pre><code> &lt;<span style="color: #0000ff;">default</span>-interceptor-ref name="defaultStack"/&gt;
 &lt;<span style="color: #0000ff;">default</span>-<span style="color: #0000ff;">class</span>-ref <span style="color: #0000ff;">class</span>="com.opensymphony.xwork2.ActionSupport" /&gt;</code></pre>

<p>&nbsp;</p>
<p>ActionSupport类的execute()方法：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> String execute() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
        </span><span style="color: #0000ff;">return</span> "success"<span style="color: #000000;">;
    }</span></code></pre>

<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>