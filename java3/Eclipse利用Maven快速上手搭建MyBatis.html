<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Eclipse利用Maven快速上手搭建MyBatis' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Eclipse利用Maven快速上手搭建MyBatis</center></div><div class='banquan'>原文出处:本文由博客园博主陈彦斌提供。<br/>
原文连接:https://www.cnblogs.com/chenyanbin/p/11630334.html</div><br>
    <h1>一、what is maven?</h1>
<p>　　Maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的项目管理工具软件。</p>
<src>
<src class="para">　　Maven 除了以程序构建能力为特色之外，还提供高级项目管理工具。由于 Maven 的缺省构建规则有较高的可重用性，所以常常用两三行 Maven 构建脚本就可以构建简单的项目。由于 Maven 的面向项目的方法，许多 Apache Jakarta 项目发文时使用 Maven，而且公司项目采用 Maven 的比例在持续增长。
<src class="para">　　Maven这个单词来自于意第绪语（犹太语），意为知识的积累，最初在Jakata Turbine项目中用来简化构建过程。当时有一些项目（有各自Ant build文件），仅有细微的差别，而JAR文件都由<a href="https://baike.baidu.com/item/CVS" target="_blank">CVS</a>来维护。于是希望有一种标准化的方式构建项目，一个清晰的方式定义项目的组成，一个容易的方式发布项目的信息，以及一种简单的方式在多个项目中共享JARs。
<h1>二、安装与配置</h1>
<h2>　　2.1、直接下载(需jdk1.7或更高)</h2>
<p>地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.2/binaries/apache-maven-3.6.2-bin.zip" target="_blank">直接下载</a></p>

<src>
<h2>　　2.2、官网下载：http://maven.apache.org/download.cgi</h2>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis0.png" alt="" /></p>
<p>&nbsp;</p>
<h2>　　&nbsp;2.3、Maven与Eclipse关联</h2>

<p>&nbsp;</p>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis1.png" alt="" /></p>
<h2>&nbsp;　　2.4、创建Maven项目，并配置pom.xml</h2>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis2.png" alt="" /></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span>     &lt;dependencies&gt;
<span style="color: #008080;"> 2</span>         &lt;!-- 添加MyBatis框架3.<span style="color: #800080;">4</span>.6版本 --&gt;
<span style="color: #008080;"> 3</span>         &lt;dependency&gt;
<span style="color: #008080;"> 4</span>             &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
<span style="color: #008080;"> 5</span>             &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
<span style="color: #008080;"> 6</span>             &lt;version&gt;<span style="color: #800080;">3.4</span>.<span style="color: #800080;">6</span>&lt;/version&gt; &lt;!-- 版本号视情况修改 --&gt;
<span style="color: #008080;"> 7</span>         &lt;/dependency&gt;
<span style="color: #008080;"> 8</span>         &lt;!-- 添加MySql驱动包 --&gt;
<span style="color: #008080;"> 9</span>         &lt;dependency&gt;
<span style="color: #008080;">10</span>             &lt;groupId&gt;mysql&lt;/groupId&gt;
<span style="color: #008080;">11</span>             &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
<span style="color: #008080;">12</span>             &lt;version&gt;<span style="color: #800080;">5.1</span>.<span style="color: #800080;">25</span>&lt;/version&gt;
<span style="color: #008080;">13</span>         &lt;/dependency&gt;
<span style="color: #008080;">14</span>     &lt;/dependencies&gt;</code></pre>

<h2>　　2.5、创建XML配置MyBatis</h2>
<p>&nbsp;<img src="./images/Eclipse利用Maven快速上手搭建MyBatis3.png" alt="" /></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;?xml version=<span style="color: #800000;">"</span><span style="color: #800000;">1.0</span><span style="color: #800000;">"</span> encoding=<span style="color: #800000;">"</span><span style="color: #800000;">UTF-8</span><span style="color: #800000;">"</span>?&gt;
<span style="color: #008080;"> 2</span> &lt;!<span style="color: #000000;">DOCTYPE configuration
</span><span style="color: #008080;"> 3</span>   PUBLIC <span style="color: #800000;">"</span><span style="color: #800000;">-//mybatis.org//DTD Config 3.0//EN</span><span style="color: #800000;">"</span>
<span style="color: #008080;"> 4</span>   <span style="color: #800000;">"</span><span style="color: #800000;">http://mybatis.org/dtd/mybatis-3-config.dtd</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 5</span> &lt;configuration&gt;
<span style="color: #008080;"> 6</span>     &lt;environments <span style="color: #0000ff;">default</span>=<span style="color: #800000;">"</span><span style="color: #800000;">development</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 7</span>         &lt;environment id=<span style="color: #800000;">"</span><span style="color: #800000;">development</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 8</span>             &lt;transactionManager type=<span style="color: #800000;">"</span><span style="color: #800000;">JDBC</span><span style="color: #800000;">"</span> /&gt;
<span style="color: #008080;"> 9</span>             &lt;dataSource type=<span style="color: #800000;">"</span><span style="color: #800000;">POOLED</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;">10</span>                 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">driver</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">com.mysql.jdbc.Driver</span><span style="color: #800000;">"</span> /&gt; &lt;!-- 驱动类型 --&gt;
<span style="color: #008080;">11</span>                 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">url</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">jdbc:mysql://localhost:3306/sam</span><span style="color: #800000;">"</span> /&gt; &lt;!-- 连接字符串 --&gt;
<span style="color: #008080;">12</span>                 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">username</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span> /&gt; &lt;!-- 用户名 --&gt;
<span style="color: #008080;">13</span>                 &lt;property name=<span style="color: #800000;">"</span><span style="color: #800000;">password</span><span style="color: #800000;">"</span> value=<span style="color: #800000;">"</span><span style="color: #800000;">root</span><span style="color: #800000;">"</span> /&gt; &lt;!-- 密码 --&gt;
<span style="color: #008080;">14</span>             &lt;/dataSource&gt;
<span style="color: #008080;">15</span>         &lt;/environment&gt;
<span style="color: #008080;">16</span>     &lt;/environments&gt;
<span style="color: #008080;">17</span>     &lt;mappers&gt;
<span style="color: #008080;">18</span>         &lt;mapper resource=<span style="color: #800000;">"</span><span style="color: #800000;">DeptMapper.xml</span><span style="color: #800000;">"</span> /&gt; &lt;!-- 映射SQL语句的XML文件 --&gt;
<span style="color: #008080;">19</span>     &lt;/mappers&gt;
<span style="color: #008080;">20</span> &lt;/configuration&gt;</code></pre>

<h2>　　2.6、创建XML映射SQL语句</h2>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis4.png" alt="" /></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;?xml version=<span style="color: #800000;">"</span><span style="color: #800000;">1.0</span><span style="color: #800000;">"</span> encoding=<span style="color: #800000;">"</span><span style="color: #800000;">UTF-8</span><span style="color: #800000;">"</span>?&gt;
<span style="color: #008080;"> 2</span> &lt;!<span style="color: #000000;">DOCTYPE mapper
</span><span style="color: #008080;"> 3</span>   PUBLIC <span style="color: #800000;">"</span><span style="color: #800000;">-//mybatis.org//DTD Mapper 3.0//EN</span><span style="color: #800000;">"</span>
<span style="color: #008080;"> 4</span>   <span style="color: #800000;">"</span><span style="color: #800000;">http://mybatis.org/dtd/mybatis-3-mapper.dtd</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 5</span> &lt;mapper <span style="color: #0000ff;">namespace</span>=<span style="color: #800000;">"</span><span style="color: #800000;">Dept</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 6</span>     &lt;!-- 插入单个部门信息 --&gt;
<span style="color: #008080;"> 7</span>     &lt;insert id=<span style="color: #800000;">"</span><span style="color: #800000;">InsertDept</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 8</span> <span style="color: #000000;">        INSERT INTO DEPT (DNAME,LOC)
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        VALUES (#{DName},#{Loc})
</span><span style="color: #008080;">10</span>     &lt;/insert&gt;
<span style="color: #008080;">11</span> &lt;/mapper&gt;</code></pre>

<p>CRUD语法</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> &lt;insert id=<span style="color: #800000;">"</span><span style="color: #800000;">insertAuthor</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 2</span> <span style="color: #000000;">  insert into Author (id,username,password,email,bio)
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">  values (#{id},#{username},#{password},#{email},#{bio})
</span><span style="color: #008080;"> 4</span> &lt;/insert&gt;
<span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> &lt;update id=<span style="color: #800000;">"</span><span style="color: #800000;">updateAuthor</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 7</span>   update Author <span style="color: #0000ff;">set</span>
<span style="color: #008080;"> 8</span>     username =<span style="color: #000000;"> #{username},
</span><span style="color: #008080;"> 9</span>     password =<span style="color: #000000;"> #{password},
</span><span style="color: #008080;">10</span>     email =<span style="color: #000000;"> #{email},
</span><span style="color: #008080;">11</span>     bio =<span style="color: #000000;"> #{bio}
</span><span style="color: #008080;">12</span>   <span style="color: #0000ff;">where</span> id =<span style="color: #000000;"> #{id}
</span><span style="color: #008080;">13</span> &lt;/update&gt;
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> &lt;delete id=<span style="color: #800000;">"</span><span style="color: #800000;">deleteAuthor</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;">16</span>   delete <span style="color: #0000ff;">from</span> Author <span style="color: #0000ff;">where</span> id =<span style="color: #000000;"> #{id}
</span><span style="color: #008080;">17</span> &lt;/delete&gt;</code></pre>

<h2>　　2.7、创建实体类</h2>
<p>表结构</p>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis5.png" alt="" /></p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.chenyanbin;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Dept {
</span><span style="color: #008080;"> 4</span>     <span style="color: #008000;">//</span><span style="color: #008000;">部门名称</span>
<span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String DName;
</span><span style="color: #008080;"> 6</span>     <span style="color: #008000;">//</span><span style="color: #008000;">部门位置</span>
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String Loc;
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getDName() {
</span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> DName;
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setDName(String dName) {
</span><span style="color: #008080;">12</span>         DName =<span style="color: #000000;"> dName;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getLoc() {
</span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> Loc;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setLoc(String loc) {
</span><span style="color: #008080;">18</span>         Loc =<span style="color: #000000;"> loc;
</span><span style="color: #008080;">19</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">20</span> }</code></pre>

<h2>　　2.8、创建Main函数</h2>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #000000;">package com.chenyanbin;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #000000;">import java.io.IOException;
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">import java.io.InputStream;
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">import org.apache.ibatis.io.Resources;
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSession;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactory;
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">import org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestMain {
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) throws IOException {
</span><span style="color: #008080;">12</span>         <span style="color: #008000;">//</span><span style="color: #008000;">创建实体类</span>
<span style="color: #008080;">13</span>         Dept dept = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Dept();
</span><span style="color: #008080;">14</span>         dept.setDName(<span style="color: #800000;">"</span><span style="color: #800000;">上海事业部</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span>         dept.setLoc(<span style="color: #800000;">"</span><span style="color: #800000;">上海</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">16</span>         <span style="color: #008000;">//</span><span style="color: #008000;">加载XML文件</span>
<span style="color: #008080;">17</span>         InputStream <span style="color: #0000ff;">is</span> = Resources.getResourceAsStream(<span style="color: #800000;">"</span><span style="color: #800000;">myBatis-config.xml</span><span style="color: #800000;">"</span>); <span style="color: #008000;">//</span><span style="color: #008000;">加载MyBatis的配置文件
</span><span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">初始化SqlSessionFactory</span>
<span style="color: #008080;">19</span>         SqlSessionFactory factory = <span style="color: #0000ff;">new</span> SqlSessionFactoryBuilder().build(<span style="color: #0000ff;">is</span><span style="color: #000000;">);
</span><span style="color: #008080;">20</span>         SqlSession session =<span style="color: #000000;"> factory.openSession();
</span><span style="color: #008080;">21</span>         session.insert(<span style="color: #800000;">"</span><span style="color: #800000;">InsertDept</span><span style="color: #800000;">"</span><span style="color: #000000;">, dept);
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        session.commit();
</span><span style="color: #008080;">23</span> <span style="color: #000000;">        session.close();
</span><span style="color: #008080;">24</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">25</span> }</code></pre>

<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis6.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/Eclipse利用Maven快速上手搭建MyBatis7.png" alt="" />&nbsp;</p>
<h2>　　2.9、项目文件目录图</h2>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis8.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px;">&nbsp;以上配置完成，但是博主碰到一个问题，数据库保存进去了，程序警告，警告如下：</span></p>
<p><img src="./images/Eclipse利用Maven快速上手搭建MyBatis9.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;WARNING: An illegal reflective access operation has occurred</p>
<p><em id="__mceDel">WARNING: Illegal reflective access by org.apache.ibatis.reflection.Reflector (file:/C:/Users/Windows10/.m2/repository/org/mybatis/mybatis/3.4.6/mybatis-3.4.6.jar) to method java.lang.Class.checkPackageAccess(java.lang.SecurityManager,java.lang.ClassLoader,boolean)<br />WARNING: Please consider reporting this to the maintainers of org.apache.ibatis.reflection.Reflector<br />WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br />WARNING: All illegal access operations will be denied in a future release</em></p>
<p><span style="font-size: 16px;">　　网上查了下，jdk8之后对反射做限制了，有两种解决方案</span></p>
<ol>
<li><span style="font-size: 16px;">把jdk回到jdk9之前</span></li>
<li><span style="font-size: 16px;">升级MyBatis</span></li>




</ol>
<h1>&nbsp;三、MyBatis框架执行流程解析</h1>
<ul>
<li>将sql语句和数据库配置信息保存在配置文件</li>
<li>在MyBatis运行时，将配置信息存储Configuration对象</li>
<li>在创建SqlSession对象，提供属性
<ul>
<li>Configuration对象</li>
<li>dirty：true-&gt;sql语句执行完毕后，可以事务提交；false-&gt;sql语句执行发送错误，事务进行回滚</li>
<li>Executor执行器对象：创建Statement对象，在创建过程中依靠MapperStatement对象将赋值内容与sql占位符进行绑定处理</li>
</ul>
</li>
<li>SqlSession.commit()：此时根据dirty属性绝对提交和回滚</li>
<li>SqlSession.close()：</li>
</ul>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>