<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修ActiveMQ学习总结------入门篇01' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>ActiveMQ学习总结------入门篇01</center></div><div class='banquan'>原文出处:本文由博客园博主Arebirth提供。<br/>
原文连接:https://www.cnblogs.com/arebirth/p/activemq01.html</div><br>
    <h2><span style="font-family: 黑体;">注：*这篇博文文章主要介绍ActiveMQ是什么原理性的内容和如何安装和简易操作</span></h2>
<hr />
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h2><span style="font-family: 黑体;">一、 ActiveMQ&nbsp; 简介</span></h2>
<h3><span style="font-family: 黑体;">1 ActiveMQ是什么呢？看起来好碉堡的东西哇！</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">ActiveMQ 是 Apache 出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个</span><br /><span style="font-family: 黑体;">完全支持 JMS1.1 和 J2EE 1.4 规范的 JMS Provider 实现，尽管 JMS 规范出台已经是很久</span><br /><span style="font-family: 黑体;">的事情了，但是 JMS 在当今的 J2EE 应用中间仍然扮演着特殊的地位。</span></p>

</blockquote>
<h3><span style="font-family: 黑体;">2&nbsp; 什么是消息呢？</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">大家对消息的这个词肯定不会陌生，那么在我们ActiveMQ里面指的是什么，我想你应该有必要了解下</span></p>
<p><span style="font-family: 黑体;">&ldquo;消息&rdquo;是在两台计算机间传送的数据单位。消息可以非常简单，例如只包含文本字符串；</span><br /><span style="font-family: 黑体;">也可以更复杂，可能包含嵌入对象。</span></p>

</blockquote>
<h3><span style="font-family: 黑体;">3 什么是队列？</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">我觉的下面的这张图对大家而言，相比已经很清楚了（能学到MQ都很了不起啦！）</span></p>
<p><span style="font-family: 黑体;"><img src="./images/ActiveMQ学习总结------入门篇010.png" alt="" /></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">4 什么是 消息队列？</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">简单来说：</span></p>
<p><span style="font-family: 黑体;">&ldquo;消息队列&rdquo;是在消息的传输过程中保存消息的容器。&nbsp;&nbsp;</span></p>
<p><span style="font-family: 黑体;">举个小例子：比如你在qq上根你朋友俩天，聊天肯定是双方的，那么你发给你朋友的消息就是存储在这个腾讯的服务器中（理解为消息队列）的，当你朋友上线（登录QQ）的时候，就从服务器中收到了这条消息</span></p>
<p><span style="font-family: 黑体;">是不是看起来很高大上，起始很容易了解，哈哈</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">5 常用消费服务应用</span></h3>
<blockquote>
<p><span style="font-family: 黑体;"><strong>5.1 ActiveMQ</strong></span></p>
<p><span style="font-family: 黑体;">ActiveMQ 是 Apache 出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完</span><br /><span style="font-family: 黑体;">全支持 JMS1.1 和 J2EE 1.4 规范的 JMS Provider 实现。（也是我们本次用的喔！）</span></p>
<p><br /><span style="font-family: 黑体;"><strong>5.2 RabbitMQ</strong></span><br /><span style="font-family: 黑体;">RabbitMQ 是一个在 AMQP 基础上完成的，可复用的企业消息系统。他遵循 Mozilla Public</span><br /><span style="font-family: 黑体;">License 开源协议。开发语言为 Erlang。</span></p>
<p><br /><span style="font-family: 黑体;"><strong>5.3 RocketMQ</strong></span><br /><span style="font-family: 黑体;">由阿里巴巴定义开发的一套消息队列应用服务。</span></p>

</blockquote>
<hr />
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h2><span style="font-family: 黑体;">二、消息服务的应用场景</span></h2>
<blockquote>
<p><span style="font-family: 黑体;">　　消息队列的主要特点是<span style="color: #ff0000;">异步处理</span>，主要目的是<span style="color: #ff0000;">减少请求响应时间和解耦</span>。所以主要的使</span><br /><span style="font-family: 黑体;">用场景就是将比较耗时而且<span style="color: #ff0000;">不需要即时（同步）</span>返回结果的操作作为消息放入消息队列。同</span><br /><span style="font-family: 黑体;">时由于使用了消息队列，只要保证消息格式不变，消息的发送方和接收方并不需要彼此联系，</span><br /><span style="font-family: 黑体;">也不需要受对方的影响，即解耦和。</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;"><img src="./images/ActiveMQ学习总结------入门篇011.png" alt="" /></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">5.1&nbsp; 异步处理</span></h3>
<blockquote>
<p><span style="font-family: 黑体;"><strong>例如：用户注册</strong></span></p>
<p><span style="font-family: 黑体;">用户注册流程：</span><br /><span style="font-family: 黑体;">1）注册处理以及写数据库</span><br /><span style="font-family: 黑体;">2）发送注册成功的手机短信</span><br /><span style="font-family: 黑体;">3）发送注册成功的邮件信息</span><br /><span style="font-family: 黑体;">如果用消息中间件：则可以创建两个线程来做这些事情，直接发送消息给消息中间件，</span><br /><span style="font-family: 黑体;">然后让邮件服务和短信服务自己去消息中间件里面去取消息，然后取到消息后再自己做对应</span><br /><span style="font-family: 黑体;">的业务操作。就是这么方便</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">5.2 应用的解耦</span></h3>
<blockquote>
<p><span style="font-family: 黑体;"><strong>例如：订单处理</strong></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">生成订单流程：</span><br /><span style="font-family: 黑体;">1）在购物车中点击结算</span><br /><span style="font-family: 黑体;">2）完成支付</span><br /><span style="font-family: 黑体;">3）创建订单</span><br /><span style="font-family: 黑体;">4）调用库存系统</span><br /><span style="font-family: 黑体;">订单完成后，订单系统并不去直接调用库存系统，而是发送消息到消息中间件，写入一</span><br /><span style="font-family: 黑体;">个订单信息。库存系统自己去消息中间件上去获取，然后做发货处理，并更新库存，这样能</span><br /><span style="font-family: 黑体;">够实现互联网型应用追求的快这一个属性。而库存系统读取订单后库存应用这个操作也是非</span><br /><span style="font-family: 黑体;">常快的，所以有消息中间件对解耦来说也是一个不错的方向。</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">5.3&nbsp; 流量的消峰</span></h3>
<blockquote>
<p><span style="font-family: 黑体;"><strong>例如：秒杀功能</strong></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">秒杀流程：</span><br /><span style="font-family: 黑体;">1）用户点击秒杀</span><br /><span style="font-family: 黑体;">2）发送请求到秒杀应用</span><br /><span style="font-family: 黑体;">3）在请求秒杀应用之前将请求放入到消息队列</span><br /><span style="font-family: 黑体;">4）秒杀应用从消息队列中获取请求并处理。</span><br /><span style="font-family: 黑体;">比如，系统举行秒杀活动，热门商品。流量蜂拥而至 100 件商品，10 万人挤进来怎么</span><br /><span style="font-family: 黑体;">办？10 万秒杀的操作，放入消息队列。秒杀应用处理消息队列中的 10 万个请求中的前 100</span><br /><span style="font-family: 黑体;">个，其他的打回，通知失败。流量峰值控制在消息队列处，秒杀应用不会瞬间被怼死</span></p>

</blockquote>
<hr />
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h2><span style="font-family: 黑体;">三、 JMS</span></h2>
<h3><span style="font-family: 黑体;">1 什么是 JMS</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">JMS（Java Messaging Service）是 Java 平台上有关面向消息中间件的技术规范，它便于</span><br /><span style="font-family: 黑体;">消息系统中的 Java 应用程序进行消息交换,并且通过提供标准的产生、发送、接收消息的接</span><br /><span style="font-family: 黑体;">口，简化企业应用的开发，也就是Java帮我们定义的一套规范</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">2 JMS模型</span></h3>
<h4><span style="font-family: 黑体;">2.1&nbsp; 点对点模型(Point To Point)</span></h4>
<blockquote>
<p><span style="font-family: 黑体;"><strong>生产者发送一条消息到 queue，只有一个消费者能收到。</strong></span></p>
<p><span style="font-family: 黑体;">例如：你给你的好友发送一条消息，那么只有他能知道你发了啥</span></p>
<p><span style="font-family: 黑体;"><img src="./images/ActiveMQ学习总结------入门篇012.png" alt="" /></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h4><span style="font-family: 黑体;">2.2&nbsp; 发布订阅模型(Publish/Subscribe)</span></h4>
<blockquote>
<p><span style="font-family: 黑体;"><strong>发布者发送到 topic 的消息，只有订阅了 topic 的订阅者才会收到消息。</strong></span></p>
<p><span style="font-family: 黑体;">例如：你在教室里面大喊&ldquo;我不要当码农！&rdquo;，那么在教室的所有人都会听见。&nbsp;&nbsp;</span></p>
<p><span style="font-family: 黑体;"><img src="./images/ActiveMQ学习总结------入门篇013.png" alt="" /></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>

</blockquote>
<p><span style="color: #ff0000; font-family: 黑体;"><strong>*学到后面的时候，你将知道，我为什么举得这两个例子命名可以都在一个条件下成立，为什么还换到了另一个不着边际的立场点上。</strong></span></p>
<hr />
<h2><span style="font-family: 黑体;">四、 ActiveMQ&nbsp; 安装</span></h2>
<p><span style="font-family: 黑体;"><strong>准备环境：Linux</strong></span></p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h4><span style="font-family: 黑体;">1 下载资源</span></h4>
<blockquote>
<h4><span style="font-family: 黑体;">&nbsp;ActiveMQ 官网： http://activemq.apache.org</span></h4>
<p><span style="font-family: 黑体;">版本说明</span><br /><span style="font-family: 黑体;">ActiveMQ5.10.x 以上版本必须使用 JDK1.8 才能正常使用。</span><br /><span style="font-family: 黑体;">ActiveMQ5.9.x 及以下版本使用 JDK1.7 即可正常使用。</span></p>
<p><span style="font-family: 黑体;">根据自己的JDK版本酌情而定，初学者不必太纠结版本问题,我这里采用的是ActiveMQ5.9.0版本</span></p>

</blockquote>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
<h3><span style="font-family: 黑体;">2 上传至 Linux 服务器</span></h3>
<h3><br /><span style="font-family: 黑体;">3  解压安装文件</span></h3>
<src class="cnblogs_Highlighter">
<pre><code>tar -zxf apache-activemq-5.9.0-bin.tar.gz
</code></pre>

<p>　　</p>
<h3><br /><span style="font-family: 黑体;">4  检查权限（大部分都没事的，可以略过）</span></h3>
<src class="cnblogs_Highlighter">
<pre><code>ls -al apache-activemq-5.9.0/bin
如果权限不足,则无法执行,需要修改文件权限:
chmod 755 activemq
</code></pre>

<p>　　</p>
<h3><br /><span style="font-family: 黑体;">5  复制应用至本地目录</span></h3>
<p><span style="font-family: 黑体;">cp -r apache-activemq-5.9.0 /usr/local/activemq</span></p>
<h3><br /><span style="font-family: 黑体;">6  启动 ActiveMQ</span></h3>
<p><span style="font-family: 黑体;">/usr/local/activemq/bin/activemq start</span></p>
<h3><br /><span style="font-family: 黑体;">7  测试 ActiveMQ</span></h3>
<blockquote>
<p><span style="font-family: 黑体;">检查进程</span><br /><span style="font-family: 黑体;">ps aux | grep activemq</span><br /><span style="font-family: 黑体;">见到下述内容即代表启动成功</span></p>
<p><span style="font-family: 黑体;"><img src="./images/ActiveMQ学习总结------入门篇014.png" alt="" /></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-family: 黑体;">&nbsp;</span></p>
</blockquote>
<p>&nbsp;</p>
<h3>7.2 管理界面</h3>
<blockquote>
<p>使用浏览器访问 ActiveMQ 管理应用, 地址如下:<br />http://ip:8161/admin/<br />用户名: admin<br />密码: admin<br />ActiveMQ 使用的是 jetty 提供 HTTP 服务.启动稍慢,建议短暂等待再访问测试.<br />见到如下界面代表服务启动成功</p>
<p><img src="./images/ActiveMQ学习总结------入门篇015.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</blockquote>
<p>&nbsp;</p>
<h3>7.3 修改访问端口（如果你想的话）</h3>
<blockquote>
<p>修改 ActiveMQ 配置文件: /usr/local/activemq/conf/jetty.xml&nbsp; &nbsp;</p>
<p><img src="./images/ActiveMQ学习总结------入门篇016.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>配置文件修改完毕，保存并重新启动 ActiveMQ 服务</p>
</blockquote>
<p>&nbsp;</p>
<h3>7.4 修改用户名和密码</h3>
<blockquote>
<p>修改 conf/users.properties 配置文件.内容为: 用户名=密码<br />保存并重启 ActiveMQ 服务即可</p>
</blockquote>
<p>&nbsp;</p>
<h3>8 重启 ActiveMQ</h3>
<src class="cnblogs_Highlighter">
<pre><code>/usr/local/activemq/bin/activemq restart</code></pre>

<h3>9 关闭 ActiveMQ</h3>
<src class="cnblogs_Highlighter">
<pre><code>/usr/local/activemq/bin/activemq stop
</code></pre>

<p>　　</p>
<h3>10&nbsp; 配置文件 activemq.xm</h3>
<blockquote>
<p><strong>自行在vim里面输入ese /61616搜索下位置哈（虚拟机坏了，按时不做截图了）</strong></p>
<p>配置文件中,配置的是 ActiveMQ 的核心配置信息. 是提供服务时使用的配置. 可以修改<br />启动的访问端口. 即 java 编程中访问 ActiveMQ 的访问端口.<br />默认端口为 61616.<br />使用协议是: tcp 协议.<br />修改端口后, 保存并重启 ActiveMQ 服务即可.</p>
</blockquote>
<h3><br />11 ActiveMQ&nbsp;</h3>
<blockquote>
<p>从它的目录来说,还是很简单的:<br />* bin 存放的是脚本文件<br />* conf 存放的是基本配置文件<br />* data 存放的是日志文件<br />* docs 存放的是说明文档<br />* examples 存放的是简单的实例<br />* lib 存放的是 activemq 所需 jar 包<br />* webapps 用于存放项目的目录</p>
</blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>ps：</strong></p>
<p><strong>*如果你感到枯燥的话，那就过会再来看看吧，原理性的东西，嗯，蛮重要的</strong></p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>