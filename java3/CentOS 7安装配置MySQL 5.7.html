<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修CentOS 7安装配置MySQL 5.7' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>CentOS 7安装配置MySQL 5.7</center></div><div class='banquan'>原文出处:本文由博客园博主Dcl_Snow提供。<br/>
原文连接:https://www.cnblogs.com/Dcl-Snow/p/11969388.html</div><br>
    <p><font size="4"><strong>概述</strong></font><br>
前文记录了在Windows系统中安装配置MySQL 5.7（前文连接：<a href="https://www.cnblogs.com/Dcl-Snow/p/10513925.html">https://www.cnblogs.com/Dcl-Snow/p/10513925.html</a><a href="https://），由于安装部署大数据环境需要，现在要在CentOS">），由于安装部署大数据环境需要，现在要在CentOS</a> 7系统中安装配置MySQL 5.7，CentOS 7环境安装配置也已经记录过（前文连接：<a href="https://www.cnblogs.com/Dcl-Snow/p/10811659.html">https://www.cnblogs.com/Dcl-Snow/p/10811659.html</a>），所以此处直接进行安装配置。<br><font size="4"><strong>
yum源安装MySQL 5.7</strong></font><br><font size="3"><strong>
安装MySQL 5.7</strong></font><br>
在CentOS 7系统中系统默认的源文件是不包含MySQL的，直接使用yum源执行安装命令会提示“没有可用软件包 mysql-community-server。”：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105635006-266008523.png"><img width="500" height="506" title="mysql01" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql01" src="./images/CentOS 7安装配置MySQL 5.70.png" border="0"></a><br>
所以需要先手动执行以下命令，下载源文件的安装文件：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # cd /home
<span style="color: rgb(0, 128, 128);">  2</span> # wget 'https:<span style="color: rgb(0, 128, 0);">//dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm'</span></code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105636354-229814352.png"><img width="499" height="506" title="mysql02" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql02" src="./images/CentOS 7安装配置MySQL 5.71.png" border="0"></a><br>
然后执行源文件安装命令：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # rpm -ivh mysql57-community-release-el7-11.noarch.rpm</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105637613-1594594550.png"><img width="499" height="506" title="mysql03" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql03" src="./images/CentOS 7安装配置MySQL 5.72.png" border="0"></a><br>
现在可以安装MySQL了，执行如下命令：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # yum install -y mysql-community-server</code></pre><br>
稍候片刻，等待下载安装完成：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105638888-1431574811.png"><img width="499" height="506" title="mysql04" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql04" src="./images/CentOS 7安装配置MySQL 5.73.png" border="0"></a><br>
执行如下命令，启动数据库并查看数据库状态：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl start mysqld
<span style="color: rgb(0, 128, 128);">  2</span> # systemctl status mysqld</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105640196-1863859270.png"><img width="499" height="506" title="mysql05" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql05" src="./images/CentOS 7安装配置MySQL 5.74.png" border="0"></a><br><strong><font size="3">
配置MySQL 5.7</font></strong><br>
该版本数据库会在安装时，会在/var/log/mysqld.log文件中生成一个随机的root用户的密码，查看该文件获取密码：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # cat /var/log/mysqld.log</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105641491-1820764862.png"><img width="499" height="506" title="mysql06" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql06" src="./images/CentOS 7安装配置MySQL 5.75.png" border="0"></a><br>
或者使用如下命令：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # grep 'temporary password' /var/log/mysqld.log</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105642894-793517078.png"><img width="499" height="506" title="mysql07" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql07" src="./images/CentOS 7安装配置MySQL 5.76.png" border="0"></a><br>
使用如下命令登录MySQL数据库：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # mysql -uroot -p</code></pre><br>
密码输入刚才查到的密码，即可登录数据库：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105643793-144182868.png"><img width="499" height="506" title="mysql08" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql08" src="./images/CentOS 7安装配置MySQL 5.77.png" border="0"></a><br>
使用如下命令，修改root用户密码：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> &gt; SET PASSWORD = PASSWORD('Password@123!');</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105645563-1467444661.png"><img width="499" height="506" title="mysql09" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql09" src="./images/CentOS 7安装配置MySQL 5.78.png" border="0"></a><br>
数据库默认远程访问未开放，使用如下命令进行配置：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> &gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'Password@123!' WITH GRANT OPTION;</code></pre><br>
然后输入quit，回车退出数据库登录，使用命令打开数据库的配置文件：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # vim /etc/my.cnf</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105647228-1942020381.png"><img width="499" height="506" title="mysql10" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql10" src="./images/CentOS 7安装配置MySQL 5.79.png" border="0"></a><br>
设置数据库字符集为utf8mb4，并设置sql_mode支持group by语句，完整的配置文件内容如下：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> [mysqld]
<span style="color: rgb(0, 128, 128);">  2</span> datadir=/var/lib/mysql
<span style="color: rgb(0, 128, 128);">  3</span> socket=/var/lib/mysql/mysql.sock
<span style="color: rgb(0, 128, 128);">  4</span> symbolic-links=0
<span style="color: rgb(0, 128, 128);">  5</span> log-error=/var/log/mysqld.log
<span style="color: rgb(0, 128, 128);">  6</span> pid-file=/var/run/mysqld/mysqld.pid
<span style="color: rgb(0, 128, 128);">  7</span> character-set-server = utf8mb4
<span style="color: rgb(0, 128, 128);">  8</span> collation-server = utf8mb4_unicode_ci
<span style="color: rgb(0, 128, 128);">  9</span> sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
<span style="color: rgb(0, 128, 128);"> 10</span> 
<span style="color: rgb(0, 128, 128);"> 11</span> [mysql]
<span style="color: rgb(0, 128, 128);"> 12</span> <span style="color: rgb(0, 0, 255);">default</span>-character-set = utf8mb4
<span style="color: rgb(0, 128, 128);"> 13</span> 
<span style="color: rgb(0, 128, 128);"> 14</span> [client]
<span style="color: rgb(0, 128, 128);"> 15</span> <span style="color: rgb(0, 0, 255);">default</span>-character-set = utf8mb4
<span style="color: rgb(0, 128, 128);"> 16</span> </code></pre></p><p><br><font color="#ff0000">
注意：<br>
此处设置为utf8mb4：一是因为utf8编码只支持3字节的数据，而移动端的表情数据是4个字节的字符，所以直接往utf-8编码的数据库中插入表情数据，会报异常；二是看过一位大神的文章提到，MySQL中的utf8并不是真正的utf8，所以使用utf8mb4。</font><br>
配置完成后，执行如下命令重启数据库服务：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl restart mysqld</code></pre><br>
使用修改后的密码，登录数据库，执行如下命令查看字符集设置：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # SHOW VARIABLES LIKE 'character%';</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105648423-2100073513.png"><img width="499" height="506" title="mysql11" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="mysql11" src="./images/CentOS 7安装配置MySQL 5.710.png" border="0"></a><br>
执行如下命令，设置数据库服务开机启动：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl enable mysqld</code></pre><br><font size="4"><strong>
压缩包安装MySQL 5.7</strong></font><br>
若服务器无法联网，不能使用yum源进行安装，可以使用能够联网的电脑，去官网下载压缩包进行安装，下面换台服务器进行压缩包安装。<br>
首先去官方网站：<a href="https://www.mysql.com/">https://www.mysql.com/</a>下载相关安装包：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105649732-948762859.png"><img width="956" height="216" title="压缩包安装01" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装01" src="./images/CentOS 7安装配置MySQL 5.711.png" border="0"></a><br>
远程连接到服务器上的/usr目录下创建mysql57：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # cd /usr
<span style="color: rgb(0, 128, 128);">  2</span> # mkdir mysql57</code></pre><br>
使用Xftp将压缩包上传到服务器上的mysql57目录：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105650616-161624518.png"><img width="811" height="506" title="压缩包安装02" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装02" src="./images/CentOS 7安装配置MySQL 5.712.png" border="0"></a><br>
由于CentOS 7系统中默认安装了mariadb，使用如下命令，查看并卸载mariadb：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # rpm -qa | grep mariadb
<span style="color: rgb(0, 128, 128);">  2</span> # rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</code></pre><br>
然后使用rpm命令进行安装：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # rpm -ivh *.rpm</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105651540-1322049497.png"><img width="981" height="159" title="压缩包安装03" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装03" src="./images/CentOS 7安装配置MySQL 5.713.png" border="0"></a><br>
使用如下命令启动MySQL服务，并查看服务运行状态：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl start mysqld
<span style="color: rgb(0, 128, 128);">  2</span> # systemctl status mysqld</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105652855-3761473.png"><img width="579" height="506" title="压缩包安装04" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装04" src="./images/CentOS 7安装配置MySQL 5.714.png" border="0"></a><br>
MySQL 5.7数据库安装完成。<br><font size="3"><strong>
配置MySQL 5.7</strong></font><br>
查看log文件获取密码：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # grep 'temporary password' /var/log/mysqld.log</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105653863-154057951.png"><img width="579" height="506" title="压缩包安装05" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装05" src="./images/CentOS 7安装配置MySQL 5.715.png" border="0"></a><br>
使用如下命令登录MySQL数据库：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # mysql -uroot -p</code></pre><br>
密码输入刚才查到的密码，即可登录数据库：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105655571-2124037900.png"><img width="578" height="506" title="压缩包安装06" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装06" src="./images/CentOS 7安装配置MySQL 5.716.png" border="0"></a><br>
使用如下命令，修改root用户密码：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> &gt; SET PASSWORD = PASSWORD('******');</code></pre><br>
数据库默认远程访问未开放，使用如下命令进行配置：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> &gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '******' WITH GRANT OPTION;</code></pre><br>
星号为root用户的密码（下图红色覆盖区域）：<br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105656709-949620595.png"><img width="577" height="506" title="压缩包安装07" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装07" src="./images/CentOS 7安装配置MySQL 5.717.png" border="0"></a><br>
然后输入quit，回车退出数据库登录，使用命令打开数据库的配置文件：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # vim /etc/my.cnf</code></pre><br>
设置数据库字符集为utf8mb4，并设置sql_mode支持group by语句，完整的配置文件内容如下：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> [mysqld]
<span style="color: rgb(0, 128, 128);">  2</span> character-set-server = utf8mb4
<span style="color: rgb(0, 128, 128);">  3</span> collation-server = utf8mb4_unicode_ci
<span style="color: rgb(0, 128, 128);">  4</span>  sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
<span style="color: rgb(0, 128, 128);">  5</span> 
<span style="color: rgb(0, 128, 128);">  6</span> [mysql]
<span style="color: rgb(0, 128, 128);">  7</span> <span style="color: rgb(0, 0, 255);">default</span>-character-set = utf8mb4
<span style="color: rgb(0, 128, 128);">  8</span> 
<span style="color: rgb(0, 128, 128);">  9</span> [client]
<span style="color: rgb(0, 128, 128);"> 10</span> <span style="color: rgb(0, 0, 255);">default</span>-character-set = utf8mb4
<span style="color: rgb(0, 128, 128);"> 11</span> </code></pre></p><p><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105658213-1806220679.png"><img width="579" height="506" title="压缩包安装08" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装08" src="./images/CentOS 7安装配置MySQL 5.718.png" border="0"></a><br><font color="#ff0000">
注意：<br>
此处设置为utf8mb4：一是因为utf8编码只支持3字节的数据，而移动端的表情数据是4个字节的字符，所以直接往utf-8编码的数据库中插入表情数据，会报异常；二是看过一位大神的文章提到，MySQL中的utf8并不是真正的utf8，所以使用utf8mb4。</font><br>
配置完成后，执行如下命令重启数据库服务：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl restart mysqld</code></pre><br>
使用修改后的密码，登录数据库，执行如下命令查看字符集设置：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # SHOW VARIABLES LIKE 'character%';</code></pre><br>
<a href="https://img2018.cnblogs.com/blog/526027/201912/526027-20191202105659609-1455439029.png"><img width="578" height="506" title="压缩包安装09" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="压缩包安装09" src="./images/CentOS 7安装配置MySQL 5.719.png" border="0"></a><br>
执行如下命令，设置数据库服务开机启动：<br>
<src class="cnblogs_code"><pre><code><span style="color: rgb(0, 128, 128);">  1</span> # systemctl enable mysqld</code></pre><br>
因为记录了两种不同的安装方式，所以配置也记录了两遍，只是希望看不同安装方式的朋友不需要回头再去翻配置，至此CentOS 7安装配置MySQL 5.7记录完成。</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>